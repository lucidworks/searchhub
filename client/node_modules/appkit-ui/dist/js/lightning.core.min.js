/*! appkit-ui 2018-06-22 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return od.apply(null,arguments)}function b(a){od=a}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function e(a){var b;for(b in a)return!1;return!0}function f(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function g(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function h(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function i(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){for(var c in b)i(b,c)&&(a[c]=b[c]);return i(b,"toString")&&(a.toString=b.toString),i(b,"valueOf")&&(a.valueOf=b.valueOf),a}function k(a,b,c,d){return rb(a,b,c,d,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function m(a){return null==a._pf&&(a._pf=l()),a._pf}function n(a){if(null==a._isValid){var b=m(a),c=qd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function o(a){var b=k(NaN);return null!=a?j(m(b),a):m(b).userInvalidated=!0,b}function p(a){return void 0===a}function q(a,b){var c,d,e;if(p(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),p(b._i)||(a._i=b._i),p(b._f)||(a._f=b._f),p(b._l)||(a._l=b._l),p(b._strict)||(a._strict=b._strict),p(b._tzm)||(a._tzm=b._tzm),p(b._isUTC)||(a._isUTC=b._isUTC),p(b._offset)||(a._offset=b._offset),p(b._pf)||(a._pf=m(b)),p(b._locale)||(a._locale=b._locale),rd.length>0)for(c in rd)d=rd[c],e=b[d],p(e)||(a[d]=e);return a}function r(b){q(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),sd===!1&&(sd=!0,a.updateOffset(this),sd=!1)}function s(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function t(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=t(b)),c}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&u(a[d])!==u(b[d]))&&g++;return g+f}function w(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function x(b,c){var d=!0;return j(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==typeof arguments[g]){e+="\n["+g+"] ";for(var h in arguments[0])e+=h+": "+arguments[0][h]+", ";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}w(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),td[b]||(w(c),td[b]=!0)}function z(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function A(a){var b,c;for(c in a)b=a[c],z(b)?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function B(a,b){var c,e=j({},a);for(c in b)i(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},j(e[c],a[c]),j(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)i(a,c)&&!i(b,c)&&d(a[c])&&(e[c]=j({},e[c]));return e}function C(a){null!=a&&this.set(a)}function D(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return z(d)?d.call(b,c):d}function E(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function F(){return this._invalidDate}function G(a){return this._ordinal.replace("%d",a)}function H(a,b,c,d){var e=this._relativeTime[c];return z(e)?e(a,b,c,d):e.replace(/%d/i,a)}function I(a,b){var c=this._relativeTime[a>0?"future":"past"];return z(c)?c(b):c.replace(/%s/i,b)}function J(a,b){var c=a.toLowerCase();Dd[c]=Dd[c+"s"]=Dd[b]=a}function K(a){return"string"==typeof a?Dd[a]||Dd[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)i(a,c)&&(b=K(c),b&&(d[b]=a[c]));return d}function M(a,b){Ed[a]=b}function N(a){var b=[];for(var c in a)b.push({unit:c,priority:Ed[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}function O(b,c){return function(d){return null!=d?(Q(this,b,d),a.updateOffset(this,c),this):P(this,b)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Q(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function R(a){return a=K(a),z(this[a])?this[a]():this}function S(a,b){if("object"==typeof a){a=L(a);for(var c=N(a),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit])}else if(a=K(a),z(this[a]))return this[a](b);return this}function T(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function U(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Id[a]=e),b&&(Id[b[0]]=function(){return T(e.apply(this,arguments),b[1],b[2])}),c&&(Id[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function V(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function W(a){var b,c,d=a.match(Fd);for(b=0,c=d.length;b<c;b++)Id[d[b]]?d[b]=Id[d[b]]:d[b]=V(d[b]);return function(b){var e,f="";for(e=0;e<c;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}function X(a,b){return a.isValid()?(b=Y(b,a.localeData()),Hd[b]=Hd[b]||W(b),Hd[b](a)):a.localeData().invalidDate()}function Y(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Gd.lastIndex=0;d>=0&&Gd.test(a);)a=a.replace(Gd,c),Gd.lastIndex=0,d-=1;return a}function Z(a,b,c){$d[a]=z(b)?b:function(a,d){return a&&c?c:b}}function $(a,b){return i($d,a)?$d[a](b._strict,b._locale):new RegExp(_(a))}function _(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ba(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),f(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++)_d[a[c]]=d}function ca(a,b){ba(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function da(a,b,c){null!=b&&i(_d,a)&&_d[a](b,c._a,c,a)}function ea(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function fa(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ke).test(b)?"format":"standalone"][a.month()]:this._months}function ga(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ke.test(b)?"format":"standalone"][a.month()]:this._monthsShort}function ha(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=k([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?"MMM"===b?(e=je.call(this._shortMonthsParse,g),e!==-1?e:null):(e=je.call(this._longMonthsParse,g),e!==-1?e:null):"MMM"===b?(e=je.call(this._shortMonthsParse,g),e!==-1?e:(e=je.call(this._longMonthsParse,g),e!==-1?e:null)):(e=je.call(this._longMonthsParse,g),e!==-1?e:(e=je.call(this._shortMonthsParse,g),e!==-1?e:null))}function ia(a,b,c){var d,e,f;if(this._monthsParseExact)return ha.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=k([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function ja(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=u(b);else if(b=a.localeData().monthsParse(b),!f(b))return a;return c=Math.min(a.date(),ea(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ka(b){return null!=b?(ja(this,b),a.updateOffset(this,!0),this):P(this,"Month")}function la(){return ea(this.year(),this.month())}function ma(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=ne),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)}function na(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=oe),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)}function oa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=k([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=aa(d[b]),e[b]=aa(e[b]);for(b=0;b<24;b++)f[b]=aa(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function pa(a){return qa(a)?366:365}function qa(a){return a%4===0&&a%100!==0||a%400===0}function ra(){return qa(this.year())}function sa(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<100&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ta(a){var b=new Date(Date.UTC.apply(null,arguments));return a<100&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ua(a,b,c){var d=7+b-c,e=(7+ta(a,0,d).getUTCDay()-b)%7;return-e+d-1}function va(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=ua(a,d,e),j=1+7*(b-1)+h+i;return j<=0?(f=a-1,g=pa(f)+j):j>pa(a)?(f=a+1,g=j-pa(a)):(f=a,g=j),{year:f,dayOfYear:g}}function wa(a,b,c){var d,e,f=ua(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return g<1?(e=a.year()-1,d=g+xa(e,b,c)):g>xa(a.year(),b,c)?(d=g-xa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function xa(a,b,c){var d=ua(a,b,c),e=ua(a+1,b,c);return(pa(a)-d+e)/7}function ya(a){return wa(a,this._week.dow,this._week.doy).week}function za(){return this._week.dow}function Aa(){return this._week.doy}function Ba(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ca(a){var b=wa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Da(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Ea(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}function Fa(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:this._weekdays}function Ga(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort}function Ha(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin}function Ia(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=k([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?"dddd"===b?(e=je.call(this._weekdaysParse,g),e!==-1?e:null):"ddd"===b?(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:null):(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null):"dddd"===b?(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null))):"ddd"===b?(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._minWeekdaysParse,g),e!==-1?e:null))):(e=je.call(this._minWeekdaysParse,g),e!==-1?e:(e=je.call(this._weekdaysParse,g),e!==-1?e:(e=je.call(this._shortWeekdaysParse,g),e!==-1?e:null)))}function Ja(a,b,c){var d,e,f;if(this._weekdaysParseExact)return Ia.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(e=k([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function Ka(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Da(a,this.localeData()),this.add(a-b,"d")):b}function La(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Ma(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=Ea(a,this.localeData());return this.day(this.day()%7?b:b-7)}return this.day()||7}function Na(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=ue),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)}function Oa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ve),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Pa(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=we),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)c=k([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=aa(h[b]),i[b]=aa(i[b]),j[b]=aa(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Ra(){return this.hours()%12||12}function Sa(){return this.hours()||24}function Ta(a,b){U(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ua(a,b){return b._meridiemParse}function Va(a){return"p"===(a+"").toLowerCase().charAt(0)}function Wa(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Xa(a){return a?a.toLowerCase().replace("_","-"):a}function Ya(a){for(var b,c,d,e,f=0;f<a.length;){for(e=Xa(a[f]).split("-"),b=e.length,c=Xa(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=Za(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function Za(a){var b=null;if(!Be[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=xe._abbr,require("./locale/"+a),$a(b)}catch(a){}return Be[a]}function $a(a,b){var c;return a&&(c=p(b)?bb(a):_a(a,b),c&&(xe=c)),xe._abbr}function _a(a,b){if(null!==b){var c=Ae;if(b.abbr=a,null!=Be[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=Be[a]._config;else if(null!=b.parentLocale){if(null==Be[b.parentLocale])return Ce[b.parentLocale]||(Ce[b.parentLocale]=[]),Ce[b.parentLocale].push({name:a,config:b}),null;c=Be[b.parentLocale]._config}return Be[a]=new C(B(c,b)),Ce[a]&&Ce[a].forEach(function(a){_a(a.name,a.config)}),$a(a),Be[a]}return delete Be[a],null}function ab(a,b){if(null!=b){var c,d=Ae;null!=Be[a]&&(d=Be[a]._config),b=B(d,b),c=new C(b),c.parentLocale=Be[a],Be[a]=c,$a(a)}else null!=Be[a]&&(null!=Be[a].parentLocale?Be[a]=Be[a].parentLocale:null!=Be[a]&&delete Be[a]);return Be[a]}function bb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return xe;if(!c(a)){if(b=Za(a))return b;a=[a]}return Ya(a)}function cb(){return wd(Be)}function db(a){var b,c=a._a;return c&&m(a).overflow===-2&&(b=c[be]<0||c[be]>11?be:c[ce]<1||c[ce]>ea(c[ae],c[be])?ce:c[de]<0||c[de]>24||24===c[de]&&(0!==c[ee]||0!==c[fe]||0!==c[ge])?de:c[ee]<0||c[ee]>59?ee:c[fe]<0||c[fe]>59?fe:c[ge]<0||c[ge]>999?ge:-1,m(a)._overflowDayOfYear&&(b<ae||b>ce)&&(b=ce),m(a)._overflowWeeks&&b===-1&&(b=he),m(a)._overflowWeekday&&b===-1&&(b=ie),m(a).overflow=b),a}function eb(a){var b,c,d,e,f,g,h=a._i,i=De.exec(h)||Ee.exec(h);if(i){for(m(a).iso=!0,b=0,c=Ge.length;b<c;b++)if(Ge[b][1].exec(i[1])){e=Ge[b][0],d=Ge[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=He.length;b<c;b++)if(He[b][1].exec(i[3])){f=(i[2]||" ")+He[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Fe.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),kb(a)}else a._isValid=!1}function fb(b){var c=Ie.exec(b._i);return null!==c?void(b._d=new Date((+c[1]))):(eb(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function gb(a,b,c){return null!=a?a:null!=b?b:c}function hb(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ib(a){var b,c,d,e,f=[];if(!a._d){for(d=hb(a),a._w&&null==a._a[ce]&&null==a._a[be]&&jb(a),a._dayOfYear&&(e=gb(a._a[ae],d[ae]),a._dayOfYear>pa(e)&&(m(a)._overflowDayOfYear=!0),c=ta(e,0,a._dayOfYear),a._a[be]=c.getUTCMonth(),a._a[ce]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[de]&&0===a._a[ee]&&0===a._a[fe]&&0===a._a[ge]&&(a._nextDay=!0,a._a[de]=0),a._d=(a._useUTC?ta:sa).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[de]=24)}}function jb(a){var b,c,d,e,f,g,h,i;if(b=a._w,null!=b.GG||null!=b.W||null!=b.E)f=1,g=4,c=gb(b.GG,a._a[ae],wa(sb(),1,4).year),d=gb(b.W,1),e=gb(b.E,1),(e<1||e>7)&&(i=!0);else{f=a._locale._week.dow,g=a._locale._week.doy;var j=wa(sb(),f,g);c=gb(b.gg,a._a[ae],j.year),d=gb(b.w,j.week),null!=b.d?(e=b.d,(e<0||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f}d<1||d>xa(c,f,g)?m(a)._overflowWeeks=!0:null!=i?m(a)._overflowWeekday=!0:(h=va(c,d,e,f,g),a._a[ae]=h.year,a._dayOfYear=h.dayOfYear)}function kb(b){if(b._f===a.ISO_8601)return void eb(b);b._a=[],m(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Y(b._f,b._locale).match(Fd)||[],c=0;c<e.length;c++)f=e[c],d=(h.match($(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&m(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Id[f]?(d?m(b).empty=!1:m(b).unusedTokens.push(f),da(f,d,b)):b._strict&&!d&&m(b).unusedTokens.push(f);m(b).charsLeftOver=i-j,h.length>0&&m(b).unusedInput.push(h),b._a[de]<=12&&m(b).bigHour===!0&&b._a[de]>0&&(m(b).bigHour=void 0),m(b).parsedDateParts=b._a.slice(0),m(b).meridiem=b._meridiem,b._a[de]=lb(b._locale,b._a[de],b._meridiem),ib(b),db(b)}function lb(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&b<12&&(b+=12),d||12!==b||(b=0),b):b}function mb(a){var b,c,d,e,f;if(0===a._f.length)return m(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],kb(b),n(b)&&(f+=m(b).charsLeftOver,f+=10*m(b).unusedTokens.length,m(b).score=f,(null==d||f<d)&&(d=f,c=b));j(a,c||b)}function nb(a){if(!a._d){var b=L(a._i);a._a=h([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ib(a)}}function ob(a){var b=new r(db(pb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function pb(a){var b=a._i,d=a._f;return a._locale=a._locale||bb(a._l),null===b||void 0===d&&""===b?o({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),s(b)?new r(db(b)):(g(b)?a._d=b:c(d)?mb(a):d?kb(a):qb(a),n(a)||(a._d=null),a))}function qb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):g(d)?b._d=new Date(d.valueOf()):"string"==typeof d?fb(b):c(d)?(b._a=h(d.slice(0),function(a){return parseInt(a,10)}),ib(b)):"object"==typeof d?nb(b):f(d)?b._d=new Date(d):a.createFromInputFallback(b)}function rb(a,b,f,g,h){var i={};return f!==!0&&f!==!1||(g=f,f=void 0),(d(a)&&e(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,ob(i)}function sb(a,b,c,d){return rb(a,b,c,d,!1)}function tb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return sb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}function ub(){var a=[].slice.call(arguments,0);return tb("isBefore",a)}function vb(){var a=[].slice.call(arguments,0);return tb("isAfter",a)}function wb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=bb(),this._bubble()}function xb(a){return a instanceof wb}function yb(a){return a<0?Math.round(-1*a)*-1:Math.round(a)}function zb(a,b){U(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+T(~~(a/60),2)+b+T(~~a%60,2)})}function Ab(a,b){var c=(b||"").match(a);if(null===c)return null;var d=c[c.length-1]||[],e=(d+"").match(Me)||["-",0,0],f=+(60*e[1])+u(e[2]);return 0===f?0:"+"===e[0]?f:-f}function Bb(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(s(b)||g(b)?b.valueOf():sb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):sb(b).local()}function Cb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Db(b,c){var d,e=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null!=b){if("string"==typeof b){if(b=Ab(Xd,b),null===b)return this}else Math.abs(b)<16&&(b=60*b);return!this._isUTC&&c&&(d=Cb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Tb(this,Ob(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?e:Cb(this)}function Eb(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Fb(a){return this.utcOffset(0,a)}function Gb(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),"m")),this}function Hb(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var a=Ab(Wd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this}function Ib(a){return!!this.isValid()&&(a=a?sb(a).utcOffset():0,(this.utcOffset()-a)%60===0)}function Jb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kb(){if(!p(this._isDSTShifted))return this._isDSTShifted;var a={};if(q(a,this),a=pb(a),a._a){var b=a._isUTC?k(a._a):sb(a._a);this._isDSTShifted=this.isValid()&&v(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Lb(){return!!this.isValid()&&!this._isUTC}function Mb(){return!!this.isValid()&&this._isUTC}function Nb(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ob(a,b){var c,d,e,g=a,h=null;return xb(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:f(a)?(g={},b?g[b]=a:g.milliseconds=a):(h=Ne.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:u(h[ce])*c,h:u(h[de])*c,m:u(h[ee])*c,s:u(h[fe])*c,ms:u(yb(1e3*h[ge]))*c}):(h=Oe.exec(a))?(c="-"===h[1]?-1:1,g={y:Pb(h[2],c),M:Pb(h[3],c),w:Pb(h[4],c),d:Pb(h[5],c),h:Pb(h[6],c),m:Pb(h[7],c),s:Pb(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=Rb(sb(g.from),sb(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new wb(g),xb(a)&&i(a,"_locale")&&(d._locale=a._locale),d}function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Rb(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):(c=Qb(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function Sb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ob(c,d),Tb(this,e,a),this}}function Tb(b,c,d,e){var f=c._milliseconds,g=yb(c._days),h=yb(c._months);b.isValid()&&(e=null==e||e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&Q(b,"Date",P(b,"Date")+g*d),h&&ja(b,P(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function Ub(a,b){var c=a.diff(b,"days",!0);return c<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"}function Vb(b,c){var d=b||sb(),e=Bb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(z(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,sb(d)))}function Wb(){return new r(this)}function Xb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())}function Yb(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&(b=K(p(b)?"millisecond":b),"millisecond"===b?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())}function Zb(a,b,c,d){return d=d||"()",("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))}function $b(a,b){var c,d=s(a)?a:sb(a);return!(!this.isValid()||!d.isValid())&&(b=K(b||"millisecond"),"millisecond"===b?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))}function _b(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function ac(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function bc(a,b,c){var d,e,f,g;return this.isValid()?(d=Bb(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=K(b),"year"===b||"month"===b||"quarter"===b?(g=cc(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:t(g)):NaN):NaN}function cc(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return b-f<0?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)||0}function dc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ec(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?z(Date.prototype.toISOString)?this.toDate().toISOString():X(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var c="["+a+'("]',d=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",e="-MM-DD[T]HH:mm:ss.SSS",f=b+'[")]';return this.format(c+d+e+f)}function gc(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=X(this,b);return this.localeData().postformat(c)}function hc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ic(a){return this.from(sb(),a)}function jc(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function kc(a){return this.to(sb(),a)}function lc(a){var b;return void 0===a?this._locale._abbr:(b=bb(a),null!=b&&(this._locale=b),this)}function mc(){return this._locale}function nc(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function oc(a){return a=K(a),void 0===a||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))}function pc(){return this._d.valueOf()-6e4*(this._offset||0)}function qc(){return Math.floor(this.valueOf()/1e3)}function rc(){return new Date(this.valueOf())}function sc(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function tc(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function uc(){return this.isValid()?this.toISOString():null}function vc(){return n(this)}function wc(){return j({},m(this))}function xc(){return m(this).overflow}function yc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function zc(a,b){U(0,[a,a.length],0,b)}function Ac(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Bc(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Cc(){return xa(this.year(),1,4)}function Dc(){var a=this.localeData()._week;return xa(this.year(),a.dow,a.doy)}function Ec(a,b,c,d,e){var f;return null==a?wa(this,d,e).year:(f=xa(a,d,e),b>f&&(b=f),Fc.call(this,a,b,c,d,e))}function Fc(a,b,c,d,e){var f=va(a,b,c,d,e),g=ta(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Gc(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function Ic(a,b){b[ge]=u(1e3*("0."+a))}function Jc(){return this._isUTC?"UTC":""}function Kc(){return this._isUTC?"Coordinated Universal Time":""}function Lc(a){return sb(1e3*a)}function Mc(){return sb.apply(null,arguments).parseZone()}function Nc(a){return a}function Oc(a,b,c,d){var e=bb(),f=k().set(d,b);return e[c](f,a)}function Pc(a,b,c){if(f(a)&&(b=a,a=void 0),a=a||"",null!=b)return Oc(a,b,c,"month");var d,e=[];for(d=0;d<12;d++)e[d]=Oc(a,d,c,"month");return e;
}function Qc(a,b,c,d){"boolean"==typeof a?(f(b)&&(c=b,b=void 0),b=b||""):(b=a,c=b,a=!1,f(b)&&(c=b,b=void 0),b=b||"");var e=bb(),g=a?e._week.dow:0;if(null!=c)return Oc(b,(c+g)%7,d,"day");var h,i=[];for(h=0;h<7;h++)i[h]=Oc(b,(h+g)%7,d,"day");return i}function Rc(a,b){return Pc(a,b,"months")}function Sc(a,b){return Pc(a,b,"monthsShort")}function Tc(a,b,c){return Qc(a,b,c,"weekdays")}function Uc(a,b,c){return Qc(a,b,c,"weekdaysShort")}function Vc(a,b,c){return Qc(a,b,c,"weekdaysMin")}function Wc(){var a=this._data;return this._milliseconds=Ze(this._milliseconds),this._days=Ze(this._days),this._months=Ze(this._months),a.milliseconds=Ze(a.milliseconds),a.seconds=Ze(a.seconds),a.minutes=Ze(a.minutes),a.hours=Ze(a.hours),a.months=Ze(a.months),a.years=Ze(a.years),this}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Yc(a,b){return Xc(this,a,b,1)}function Zc(a,b){return Xc(this,a,b,-1)}function $c(a){return a<0?Math.floor(a):Math.ceil(a)}function _c(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||f<=0&&g<=0&&h<=0||(f+=864e5*$c(bd(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=t(f/1e3),i.seconds=a%60,b=t(a/60),i.minutes=b%60,c=t(b/60),i.hours=c%24,g+=t(c/24),e=t(ad(g)),h+=e,g-=$c(bd(e)),d=t(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function ad(a){return 4800*a/146097}function bd(a){return 146097*a/4800}function cd(a){var b,c,d=this._milliseconds;if(a=K(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+ad(b),"month"===a?c:c/12;switch(b=this._days+Math.round(bd(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function dd(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*u(this._months/12)}function ed(a){return function(){return this.as(a)}}function fd(a){return a=K(a),this[a+"s"]()}function gd(a){return function(){return this._data[a]}}function hd(){return t(this.days()/7)}function id(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function jd(a,b,c){var d=Ob(a).abs(),e=of(d.as("s")),f=of(d.as("m")),g=of(d.as("h")),h=of(d.as("d")),i=of(d.as("M")),j=of(d.as("y")),k=e<pf.s&&["s",e]||f<=1&&["m"]||f<pf.m&&["mm",f]||g<=1&&["h"]||g<pf.h&&["hh",g]||h<=1&&["d"]||h<pf.d&&["dd",h]||i<=1&&["M"]||i<pf.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,id.apply(null,k)}function kd(a){return void 0===a?of:"function"==typeof a&&(of=a,!0)}function ld(a,b){return void 0!==pf[a]&&(void 0===b?pf[a]:(pf[a]=b,!0))}function md(a){var b=this.localeData(),c=jd(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function nd(){var a,b,c,d=qf(this._milliseconds)/1e3,e=qf(this._days),f=qf(this._months);a=t(d/60),b=t(a/60),d%=60,a%=60,c=t(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(m<0?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var od,pd;pd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var qd=pd,rd=a.momentProperties=[],sd=!1,td={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var ud;ud=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)i(a,b)&&c.push(b);return c};var vd,wd=ud,xd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},yd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},zd="Invalid date",Ad="%d",Bd=/\d{1,2}/,Cd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Dd={},Ed={},Fd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hd={},Id={},Jd=/\d/,Kd=/\d\d/,Ld=/\d{3}/,Md=/\d{4}/,Nd=/[+-]?\d{6}/,Od=/\d\d?/,Pd=/\d\d\d\d?/,Qd=/\d\d\d\d\d\d?/,Rd=/\d{1,3}/,Sd=/\d{1,4}/,Td=/[+-]?\d{1,6}/,Ud=/\d+/,Vd=/[+-]?\d+/,Wd=/Z|[+-]\d\d:?\d\d/gi,Xd=/Z|[+-]\d\d(?::?\d\d)?/gi,Yd=/[+-]?\d+(\.\d{1,3})?/,Zd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$d={},_d={},ae=0,be=1,ce=2,de=3,ee=4,fe=5,ge=6,he=7,ie=8;vd=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};var je=vd;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),U("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),M("month",8),Z("M",Od),Z("MM",Od,Kd),Z("MMM",function(a,b){return b.monthsShortRegex(a)}),Z("MMMM",function(a,b){return b.monthsRegex(a)}),ba(["M","MM"],function(a,b){b[be]=u(a)-1}),ba(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[be]=e:m(c).invalidMonth=a});var ke=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),me="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=Zd,oe=Zd;U("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),J("year","y"),M("year",1),Z("Y",Vd),Z("YY",Od,Kd),Z("YYYY",Sd,Md),Z("YYYYY",Td,Nd),Z("YYYYYY",Td,Nd),ba(["YYYYY","YYYYYY"],ae),ba("YYYY",function(b,c){c[ae]=2===b.length?a.parseTwoDigitYear(b):u(b)}),ba("YY",function(b,c){c[ae]=a.parseTwoDigitYear(b)}),ba("Y",function(a,b){b[ae]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return u(a)+(u(a)>68?1900:2e3)};var pe=O("FullYear",!0);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),M("week",5),M("isoWeek",5),Z("w",Od),Z("ww",Od,Kd),Z("W",Od),Z("WW",Od,Kd),ca(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});var qe={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),U("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),U("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),M("day",11),M("weekday",11),M("isoWeekday",11),Z("d",Od),Z("e",Od),Z("E",Od),Z("dd",function(a,b){return b.weekdaysMinRegex(a)}),Z("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Z("dddd",function(a,b){return b.weekdaysRegex(a)}),ca(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:m(c).invalidWeekday=a}),ca(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var re="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),se="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),te="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ue=Zd,ve=Zd,we=Zd;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ra),U("k",["kk",2],0,Sa),U("hmm",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ta("a",!0),Ta("A",!1),J("hour","h"),M("hour",13),Z("a",Ua),Z("A",Ua),Z("H",Od),Z("h",Od),Z("HH",Od,Kd),Z("hh",Od,Kd),Z("hmm",Pd),Z("hmmss",Qd),Z("Hmm",Pd),Z("Hmmss",Qd),ba(["H","HH"],de),ba(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ba(["h","hh"],function(a,b,c){b[de]=u(a),m(c).bigHour=!0}),ba("hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d)),m(c).bigHour=!0}),ba("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e)),m(c).bigHour=!0}),ba("Hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d))}),ba("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e))});var xe,ye=/[ap]\.?m?\.?/i,ze=O("Hours",!0),Ae={calendar:xd,longDateFormat:yd,invalidDate:zd,ordinal:Ad,ordinalParse:Bd,relativeTime:Cd,months:le,monthsShort:me,week:qe,weekdays:re,weekdaysMin:te,weekdaysShort:se,meridiemParse:ye},Be={},Ce={},De=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ee=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fe=/Z|[+-]\d\d(?::?\d\d)?/,Ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],He=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ie=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=x("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),a.ISO_8601=function(){};var Je=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:o()}),Ke=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:o()}),Le=function(){return Date.now?Date.now():+new Date};zb("Z",":"),zb("ZZ",""),Z("Z",Xd),Z("ZZ",Xd),ba(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Xd,a)});var Me=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Ne=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Oe=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=wb.prototype;var Pe=Sb(1,"add"),Qe=Sb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Re=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),zc("gggg","weekYear"),zc("ggggg","weekYear"),zc("GGGG","isoWeekYear"),zc("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),M("weekYear",1),M("isoWeekYear",1),Z("G",Vd),Z("g",Vd),Z("GG",Od,Kd),Z("gg",Od,Kd),Z("GGGG",Sd,Md),Z("gggg",Sd,Md),Z("GGGGG",Td,Nd),Z("ggggg",Td,Nd),ca(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),ca(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),U("Q",0,"Qo","quarter"),J("quarter","Q"),M("quarter",7),Z("Q",Jd),ba("Q",function(a,b){b[be]=3*(u(a)-1)}),U("D",["DD",2],"Do","date"),J("date","D"),M("date",9),Z("D",Od),Z("DD",Od,Kd),Z("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ba(["D","DD"],ce),ba("Do",function(a,b){b[ce]=u(a.match(Od)[0],10)});var Se=O("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),M("dayOfYear",4),Z("DDD",Rd),Z("DDDD",Ld),ba(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)}),U("m",["mm",2],0,"minute"),J("minute","m"),M("minute",14),Z("m",Od),Z("mm",Od,Kd),ba(["m","mm"],ee);var Te=O("Minutes",!1);U("s",["ss",2],0,"second"),J("second","s"),M("second",15),Z("s",Od),Z("ss",Od,Kd),ba(["s","ss"],fe);var Ue=O("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),M("millisecond",16),Z("S",Rd,Jd),Z("SS",Rd,Kd),Z("SSS",Rd,Ld);var Ve;for(Ve="SSSS";Ve.length<=9;Ve+="S")Z(Ve,Ud);for(Ve="S";Ve.length<=9;Ve+="S")ba(Ve,Ic);var We=O("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var Xe=r.prototype;Xe.add=Pe,Xe.calendar=Vb,Xe.clone=Wb,Xe.diff=bc,Xe.endOf=oc,Xe.format=gc,Xe.from=hc,Xe.fromNow=ic,Xe.to=jc,Xe.toNow=kc,Xe.get=R,Xe.invalidAt=xc,Xe.isAfter=Xb,Xe.isBefore=Yb,Xe.isBetween=Zb,Xe.isSame=$b,Xe.isSameOrAfter=_b,Xe.isSameOrBefore=ac,Xe.isValid=vc,Xe.lang=Re,Xe.locale=lc,Xe.localeData=mc,Xe.max=Ke,Xe.min=Je,Xe.parsingFlags=wc,Xe.set=S,Xe.startOf=nc,Xe.subtract=Qe,Xe.toArray=sc,Xe.toObject=tc,Xe.toDate=rc,Xe.toISOString=ec,Xe.inspect=fc,Xe.toJSON=uc,Xe.toString=dc,Xe.unix=qc,Xe.valueOf=pc,Xe.creationData=yc,Xe.year=pe,Xe.isLeapYear=ra,Xe.weekYear=Ac,Xe.isoWeekYear=Bc,Xe.quarter=Xe.quarters=Gc,Xe.month=ka,Xe.daysInMonth=la,Xe.week=Xe.weeks=Ba,Xe.isoWeek=Xe.isoWeeks=Ca,Xe.weeksInYear=Dc,Xe.isoWeeksInYear=Cc,Xe.date=Se,Xe.day=Xe.days=Ka,Xe.weekday=La,Xe.isoWeekday=Ma,Xe.dayOfYear=Hc,Xe.hour=Xe.hours=ze,Xe.minute=Xe.minutes=Te,Xe.second=Xe.seconds=Ue,Xe.millisecond=Xe.milliseconds=We,Xe.utcOffset=Db,Xe.utc=Fb,Xe.local=Gb,Xe.parseZone=Hb,Xe.hasAlignedHourOffset=Ib,Xe.isDST=Jb,Xe.isLocal=Lb,Xe.isUtcOffset=Mb,Xe.isUtc=Nb,Xe.isUTC=Nb,Xe.zoneAbbr=Jc,Xe.zoneName=Kc,Xe.dates=x("dates accessor is deprecated. Use date instead.",Se),Xe.months=x("months accessor is deprecated. Use month instead",ka),Xe.years=x("years accessor is deprecated. Use year instead",pe),Xe.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Eb),Xe.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Kb);var Ye=C.prototype;Ye.calendar=D,Ye.longDateFormat=E,Ye.invalidDate=F,Ye.ordinal=G,Ye.preparse=Nc,Ye.postformat=Nc,Ye.relativeTime=H,Ye.pastFuture=I,Ye.set=A,Ye.months=fa,Ye.monthsShort=ga,Ye.monthsParse=ia,Ye.monthsRegex=na,Ye.monthsShortRegex=ma,Ye.week=ya,Ye.firstDayOfYear=Aa,Ye.firstDayOfWeek=za,Ye.weekdays=Fa,Ye.weekdaysMin=Ha,Ye.weekdaysShort=Ga,Ye.weekdaysParse=Ja,Ye.weekdaysRegex=Na,Ye.weekdaysShortRegex=Oa,Ye.weekdaysMinRegex=Pa,Ye.isPM=Va,Ye.meridiem=Wa,$a("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=x("moment.lang is deprecated. Use moment.locale instead.",$a),a.langData=x("moment.langData is deprecated. Use moment.localeData instead.",bb);var Ze=Math.abs,$e=ed("ms"),_e=ed("s"),af=ed("m"),bf=ed("h"),cf=ed("d"),df=ed("w"),ef=ed("M"),ff=ed("y"),gf=gd("milliseconds"),hf=gd("seconds"),jf=gd("minutes"),kf=gd("hours"),lf=gd("days"),mf=gd("months"),nf=gd("years"),of=Math.round,pf={s:45,m:45,h:22,d:26,M:11},qf=Math.abs,rf=wb.prototype;return rf.abs=Wc,rf.add=Yc,rf.subtract=Zc,rf.as=cd,rf.asMilliseconds=$e,rf.asSeconds=_e,rf.asMinutes=af,rf.asHours=bf,rf.asDays=cf,rf.asWeeks=df,rf.asMonths=ef,rf.asYears=ff,rf.valueOf=dd,rf._bubble=_c,rf.get=fd,rf.milliseconds=gf,rf.seconds=hf,rf.minutes=jf,rf.hours=kf,rf.days=lf,rf.weeks=hd,rf.months=mf,rf.years=nf,rf.humanize=md,rf.toISOString=nd,rf.toString=nd,rf.toJSON=nd,rf.locale=lc,rf.localeData=mc,rf.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),rf.lang=Re,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Z("x",Vd),Z("X",Yd),ba("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ba("x",function(a,b,c){c._d=new Date(u(a))}),a.version="2.17.1",b(sb),a.fn=Xe,a.min=ub,a.max=vb,a.now=Le,a.utc=k,a.unix=Lc,a.months=Rc,a.isDate=g,a.locale=$a,a.invalid=o,a.duration=Ob,a.isMoment=s,a.weekdays=Tc,a.parseZone=Mc,a.localeData=bb,a.isDuration=xb,a.monthsShort=Sc,a.weekdaysMin=Vc,a.defineLocale=_a,a.updateLocale=ab,a.locales=cb,a.weekdaysShort=Uc,a.normalizeUnits=K,a.relativeTimeRounding=kd,a.relativeTimeThreshold=ld,a.calendarFormat=Ub,a.prototype=Xe,a}),!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):a.hasOwnProperty("angular")?b(a.angular):"object"==typeof exports&&(module.exports=b(require("angular")))}(this,function(a){"use strict";function b(a,b){var c;try{c=a[b]}catch(d){c=!1}if(c){var e="__"+Math.round(1e7*Math.random());try{a[b].setItem(e,e),a[b].removeItem(e,e)}catch(d){c=!1}}return c}function c(c){var d=b(window,c);return function(){var e="ngStorage-";this.setKeyPrefix=function(a){if("string"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setKeyPrefix() expects a String.");e=a};var f=a.toJson,g=a.fromJson;this.setSerializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setSerializer expects a function.");f=a},this.setDeserializer=function(a){if("function"!=typeof a)throw new TypeError("[ngStorage] - "+c+"Provider.setDeserializer expects a function.");g=a},this.supported=function(){return!!d},this.get=function(a){return d&&g(d.getItem(e+a))},this.set=function(a,b){return d&&d.setItem(e+a,f(b))},this.remove=function(a){d&&d.removeItem(e+a)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(d,h,i,j,k){var l,m,n=e.length,o=b(h,c),p=o||(i.warn("This browser does not support Web Storage!"),{setItem:a.noop,getItem:a.noop,removeItem:a.noop}),q={$default:function(b){for(var c in b)a.isDefined(q[c])||(q[c]=a.copy(b[c]));return q.$sync(),q},$reset:function(a){for(var b in q)"$"===b[0]||delete q[b]&&p.removeItem(e+b);return q.$default(a)},$sync:function(){for(var a,b=0,c=p.length;c>b;b++)(a=p.key(b))&&e===a.slice(0,n)&&(q[a.slice(n)]=g(p.getItem(a)))},$apply:function(){var b;if(m=null,!a.equals(q,l)){b=a.copy(l),a.forEach(q,function(c,d){a.isDefined(c)&&"$"!==d[0]&&(p.setItem(e+d,f(c)),delete b[d])});for(var c in b)p.removeItem(e+c);l=a.copy(q)}},$supported:function(){return!!o}};return q.$sync(),l=a.copy(q),d.$watch(function(){m||(m=j(q.$apply,100,!1))}),h.addEventListener&&h.addEventListener("storage",function(b){if(b.key){var c=k[0];c.hasFocus&&c.hasFocus()||e!==b.key.slice(0,n)||(b.newValue?q[b.key.slice(n)]=g(b.newValue):delete q[b.key.slice(n)],l=a.copy(q),d.$apply())}}),h.addEventListener&&h.addEventListener("beforeunload",function(){q.$apply()}),q}]}}return a=a&&a.module?a:window.angular,a.module("ngStorage",[]).provider("$localStorage",c("localStorage")).provider("$sessionStorage",c("sessionStorage"))}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.relativeDate=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b,c){var d=e(a,c);return function(a){var c=b||new Date;a instanceof Date||(a=new Date(a));var e=null,g=60,h=60*g,i=24*h,j=7*i,k=30*i,l=365*i;e=f(c,a),e>i&&e<j&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),e=f(c,a));var m=function(b,e){var f;return f="just_now"===b?b:c>=a?b+"_ago":b+"_from_now",d.instant(f,{time:e})};switch(!1){case!(e<30):return m("just_now");case!(e<g):return m("seconds",e);case!(e<2*g):return m("a_minute");case!(e<h):return m("minutes",Math.floor(e/g));case 1!==Math.floor(e/h):return m("an_hour");case!(e<i):return m("hours",Math.floor(e/h));case!(e<2*i):return m("a_day");case!(e<j):return m("days",Math.floor(e/i));case 1!==Math.floor(e/j):return m("a_week");case!(e<k):return m("weeks",Math.floor(e/j));case 1!==Math.floor(e/k):return m("a_month");case!(e<l):return m("months",Math.floor(e/k));case 1!==Math.floor(e/l):return m("a_year");case Math.floor(e/l)<=1:return m("years",Math.floor(e/l));default:return m("over_a_year")}}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var e=function(a,b){return a.has("$translate")?a.get("$translate"):{instant:function(a,c){return b[a].replace("{{time}}",c.time)}}},f=function(a,b){return Math.round(Math.abs(a-b)/1e3)}},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./translations"),f=d(e),g=a("./filter"),h=d(g),i=angular.module("relativeDate",[]);i.value("now",null),i.value("relativeDateTranslations",f["default"]),i.filter("relativeDate",["$injector","now","relativeDateTranslations",h["default"]]),c["default"]=i},{"./filter":1,"./translations":3}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={just_now:"just now",seconds_ago:"{{time}} seconds ago",a_minute_ago:"a minute ago",minutes_ago:"{{time}} minutes ago",an_hour_ago:"an hour ago",hours_ago:"{{time}} hours ago",a_day_ago:"yesterday",days_ago:"{{time}} days ago",a_week_ago:"a week ago",weeks_ago:"{{time}} weeks ago",a_month_ago:"a month ago",months_ago:"{{time}} months ago",a_year_ago:"a year ago",years_ago:"{{time}} years ago",over_a_year_ago:"over a year ago",seconds_from_now:"{{time}} seconds from now",a_minute_from_now:"a minute from now",minutes_from_now:"{{time}} minutes from now",an_hour_from_now:"an hour from now",hours_from_now:"{{time}} hours from now",a_day_from_now:"tomorrow",days_from_now:"{{time}} days from now",a_week_from_now:"a week from now",weeks_from_now:"{{time}} weeks from now",a_month_from_now:"a month from now",months_from_now:"{{time}} months from now",a_year_from_now:"a year from now",years_from_now:"{{time}} years from now",over_a_year_from_now:"over a year from now"}},{}]},{},[2])(2)}),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(j(a,c),b)}function f(a,b,c){return!!Array.isArray(a)&&(g(a,c[b],c),!0)}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(b,c,d){var e="DEPRECATED METHOD: "+c+"\n"+d+" AT \n";return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",f=a.console&&(a.console.warn||a.console.log);return f&&f.call(a.console,e,d),b.apply(this,arguments)}}function i(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&la(d,c)}function j(a,b){return function(){return a.apply(b,arguments)}}function k(a,b){return typeof a==oa?a.apply(b?b[0]||d:d,b):a}function l(a,b){return a===d?b:a}function m(a,b,c){g(q(b),function(b){a.addEventListener(b,c,!1)})}function n(a,b,c){g(q(b),function(b){a.removeEventListener(b,c,!1)})}function o(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function p(a,b){return a.indexOf(b)>-1}function q(a){return a.trim().split(/\s+/g)}function r(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function s(a){return Array.prototype.slice.call(a,0)}function t(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];r(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function u(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ma.length;){if(c=ma[g],e=c?c+f:b,e in a)return e;g++}return d}function v(){return ua++}function w(b){var c=b.ownerDocument||b;return c.defaultView||c.parentWindow||a}function x(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){k(a.options.enable,[a])&&c.handler(b)},this.init()}function y(a){var b,c=a.options.inputClass;return new(b=c?c:xa?M:ya?P:wa?R:L)(a,z)}function z(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&Ea&&d-e===0,g=b&(Ga|Ha)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,A(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function A(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=D(b)),e>1&&!c.firstMultiple?c.firstMultiple=D(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=E(d);b.timeStamp=ra(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=I(h,i),b.distance=H(h,i),B(c,b),b.offsetDirection=G(b.deltaX,b.deltaY);var j=F(b.deltaTime,b.deltaX,b.deltaY);b.overallVelocityX=j.x,b.overallVelocityY=j.y,b.overallVelocity=qa(j.x)>qa(j.y)?j.x:j.y,b.scale=g?K(g.pointers,d):1,b.rotation=g?J(g.pointers,d):0,b.maxPointers=c.prevInput?b.pointers.length>c.prevInput.maxPointers?b.pointers.length:c.prevInput.maxPointers:b.pointers.length,C(c,b);var k=a.element;o(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function B(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};b.eventType!==Ea&&f.eventType!==Ga||(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function C(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ha&&(i>Da||h.velocity===d)){var j=b.deltaX-h.deltaX,k=b.deltaY-h.deltaY,l=F(i,j,k);e=l.x,f=l.y,c=qa(l.x)>qa(l.y)?l.x:l.y,g=G(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function D(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:pa(a.pointers[c].clientX),clientY:pa(a.pointers[c].clientY)},c++;return{timeStamp:ra(),pointers:b,center:E(b),deltaX:a.deltaX,deltaY:a.deltaY}}function E(a){var b=a.length;if(1===b)return{x:pa(a[0].clientX),y:pa(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:pa(c/b),y:pa(d/b)}}function F(a,b,c){return{x:b/a||0,y:c/a||0}}function G(a,b){return a===b?Ia:qa(a)>=qa(b)?0>a?Ja:Ka:0>b?La:Ma}function H(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function I(a,b,c){c||(c=Qa);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function J(a,b){return I(b[1],b[0],Ra)+I(a[1],a[0],Ra)}function K(a,b){return H(b[0],b[1],Ra)/H(a[0],a[1],Ra)}function L(){this.evEl=Ta,this.evWin=Ua,this.pressed=!1,x.apply(this,arguments)}function M(){this.evEl=Xa,this.evWin=Ya,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=$a,this.evWin=_a,this.started=!1,x.apply(this,arguments)}function O(a,b){var c=s(a.touches),d=s(a.changedTouches);return b&(Ga|Ha)&&(c=t(c.concat(d),"identifier",!0)),[c,d]}function P(){this.evTarget=bb,this.targetIds={},x.apply(this,arguments)}function Q(a,b){var c=s(a.touches),d=this.targetIds;if(b&(Ea|Fa)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=s(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return o(a.target,i)}),b===Ea)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Ga|Ha)&&delete d[g[e].identifier],e++;return h.length?[t(f.concat(h),"identifier",!0),h]:void 0}function R(){x.apply(this,arguments);var a=j(this.handler,this);this.touch=new P(this.manager,a),this.mouse=new L(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}function S(a,b){a&Ea?(this.primaryTouch=b.changedPointers[0].identifier,T.call(this,b)):a&(Ga|Ha)&&T.call(this,b)}function T(a){var b=a.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches,e=function(){var a=d.indexOf(c);a>-1&&d.splice(a,1)};setTimeout(e,cb)}}function U(a){for(var b=a.srcEvent.clientX,c=a.srcEvent.clientY,d=0;d<this.lastTouches.length;d++){var e=this.lastTouches[d],f=Math.abs(b-e.x),g=Math.abs(c-e.y);if(db>=f&&db>=g)return!0}return!1}function V(a,b){this.manager=a,this.set(b)}function W(a){if(p(a,jb))return jb;var b=p(a,kb),c=p(a,lb);return b&&c?jb:b||c?b?kb:lb:p(a,ib)?ib:hb}function X(){if(!fb)return!1;var b={},c=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(d){b[d]=!c||a.CSS.supports("touch-action",d)}),b}function Y(a){this.options=la({},this.defaults,a||{}),this.id=v(),this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=nb,this.simultaneous={},this.requireFail=[]}function Z(a){return a&sb?"cancel":a&qb?"end":a&pb?"move":a&ob?"start":""}function $(a){return a==Ma?"down":a==La?"up":a==Ja?"left":a==Ka?"right":""}function _(a,b){var c=b.manager;return c?c.get(a):a}function aa(){Y.apply(this,arguments)}function ba(){aa.apply(this,arguments),this.pX=null,this.pY=null}function ca(){aa.apply(this,arguments)}function da(){Y.apply(this,arguments),this._timer=null,this._input=null}function ea(){aa.apply(this,arguments)}function fa(){aa.apply(this,arguments)}function ga(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ha(a,b){return b=b||{},b.recognizers=l(b.recognizers,ha.defaults.preset),new ia(a,b)}function ia(a,b){this.options=la({},ha.defaults,b||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=y(this),this.touchAction=new V(this,this.options.touchAction),ja(this,!0),g(this.options.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ja(a,b){var c=a.element;if(c.style){var d;g(a.options.cssProps,function(e,f){d=u(c.style,f),b?(a.oldCssProps[d]=c.style[d],c.style[d]=e):c.style[d]=a.oldCssProps[d]||""}),b||(a.oldCssProps={})}}function ka(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var la,ma=["","webkit","Moz","MS","ms","o"],na=b.createElement("div"),oa="function",pa=Math.round,qa=Math.abs,ra=Date.now;la="function"!=typeof Object.assign?function(a){if(a===d||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(a),c=1;c<arguments.length;c++){var e=arguments[c];if(e!==d&&null!==e)for(var f in e)e.hasOwnProperty(f)&&(b[f]=e[f])}return b}:Object.assign;var sa=h(function(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a},"extend","Use `assign`."),ta=h(function(a,b){return sa(a,b,!0)},"merge","Use `assign`."),ua=1,va=/mobile|tablet|ip(ad|hone|od)|android/i,wa="ontouchstart"in a,xa=u(a,"PointerEvent")!==d,ya=wa&&va.test(navigator.userAgent),za="touch",Aa="pen",Ba="mouse",Ca="kinect",Da=25,Ea=1,Fa=2,Ga=4,Ha=8,Ia=1,Ja=2,Ka=4,La=8,Ma=16,Na=Ja|Ka,Oa=La|Ma,Pa=Na|Oa,Qa=["x","y"],Ra=["clientX","clientY"];x.prototype={handler:function(){},
init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(w(this.element),this.evWin,this.domHandler)}};var Sa={mousedown:Ea,mousemove:Fa,mouseup:Ga},Ta="mousedown",Ua="mousemove mouseup";i(L,x,{handler:function(a){var b=Sa[a.type];b&Ea&&0===a.button&&(this.pressed=!0),b&Fa&&1!==a.which&&(b=Ga),this.pressed&&(b&Ga&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:Ba,srcEvent:a}))}});var Va={pointerdown:Ea,pointermove:Fa,pointerup:Ga,pointercancel:Ha,pointerout:Ha},Wa={2:za,3:Aa,4:Ba,5:Ca},Xa="pointerdown",Ya="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Xa="MSPointerDown",Ya="MSPointerMove MSPointerUp MSPointerCancel"),i(M,x,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Va[d],f=Wa[a.pointerType]||a.pointerType,g=f==za,h=r(b,a.pointerId,"pointerId");e&Ea&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Ga|Ha)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Za={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},$a="touchstart",_a="touchstart touchmove touchend touchcancel";i(N,x,{handler:function(a){var b=Za[a.type];if(b===Ea&&(this.started=!0),this.started){var c=O.call(this,a,b);b&(Ga|Ha)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}}});var ab={touchstart:Ea,touchmove:Fa,touchend:Ga,touchcancel:Ha},bb="touchstart touchmove touchend touchcancel";i(P,x,{handler:function(a){var b=ab[a.type],c=Q.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:za,srcEvent:a})}});var cb=2500,db=25;i(R,x,{handler:function(a,b,c){var d=c.pointerType==za,e=c.pointerType==Ba;if(!(e&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)S.call(this,b,c);else if(e&&U.call(this,c))return;this.callback(a,b,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eb=u(na.style,"touchAction"),fb=eb!==d,gb="compute",hb="auto",ib="manipulation",jb="none",kb="pan-x",lb="pan-y",mb=X();V.prototype={set:function(a){a==gb&&(a=this.compute()),fb&&this.manager.element.style&&mb[a]&&(this.manager.element.style[eb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){k(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),W(a.join(" "))},preventDefaults:function(a){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=p(d,jb)&&!mb[jb],f=p(d,lb)&&!mb[lb],g=p(d,kb)&&!mb[kb];if(e){var h=1===a.pointers.length,i=a.distance<2,j=a.deltaTime<250;if(h&&i&&j)return}return g&&f?void 0:e||f&&c&Na||g&&c&Oa?this.preventSrc(b):void 0},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var nb=1,ob=2,pb=4,qb=8,rb=qb,sb=16,tb=32;Y.prototype={defaults:{},set:function(a){return la(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=_(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=_(a,this),-1===r(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=_(a,this);var b=r(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(b,a)}var c=this,d=this.state;qb>d&&b(c.options.event+Z(d)),b(c.options.event),a.additionalEvent&&b(a.additionalEvent),d>=qb&&b(c.options.event+Z(d))},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=tb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(tb|nb)))return!1;a++}return!0},recognize:function(a){var b=la({},a);return k(this.options.enable,[this,b])?(this.state&(rb|sb|tb)&&(this.state=nb),this.state=this.process(b),void(this.state&(ob|pb|qb|sb)&&this.tryEmit(b))):(this.reset(),void(this.state=tb))},process:function(a){},getTouchAction:function(){},reset:function(){}},i(aa,Y,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(ob|pb),e=this.attrTest(a);return d&&(c&Ha||!e)?b|sb:d||e?c&Ga?b|qb:b&ob?b|pb:ob:tb}}),i(ba,aa,{defaults:{event:"pan",threshold:10,pointers:1,direction:Pa},getTouchAction:function(){var a=this.options.direction,b=[];return a&Na&&b.push(lb),a&Oa&&b.push(kb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Na?(e=0===f?Ia:0>f?Ja:Ka,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ia:0>g?La:Ma,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return aa.prototype.attrTest.call(this,a)&&(this.state&ob||!(this.state&ob)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$(a.direction);b&&(a.additionalEvent=this.options.event+b),this._super.emit.call(this,a)}}),i(ca,aa,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&ob)},emit:function(a){if(1!==a.scale){var b=a.scale<1?"in":"out";a.additionalEvent=this.options.event+b}this._super.emit.call(this,a)}}),i(da,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[hb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Ga|Ha)&&!f)this.reset();else if(a.eventType&Ea)this.reset(),this._timer=e(function(){this.state=rb,this.tryEmit()},b.time,this);else if(a.eventType&Ga)return rb;return tb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===rb&&(a&&a.eventType&Ga?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=ra(),this.manager.emit(this.options.event,this._input)))}}),i(ea,aa,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[jb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&ob)}}),i(fa,aa,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Na|Oa,pointers:1},getTouchAction:function(){return ba.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Na|Oa)?b=a.overallVelocity:c&Na?b=a.overallVelocityX:c&Oa&&(b=a.overallVelocityY),this._super.attrTest.call(this,a)&&c&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&qa(b)>this.options.velocity&&a.eventType&Ga},emit:function(a){var b=$(a.offsetDirection);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),i(ga,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ib]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&Ea&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Ga)return this.failTimeout();var g=!this.pTime||a.timeStamp-this.pTime<b.interval,h=!this.pCenter||H(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=rb,this.tryEmit()},b.interval,this),ob):rb}return tb},failTimeout:function(){return this._timer=e(function(){this.state=tb},this.options.interval,this),tb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==rb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ha.VERSION="2.0.7",ha.defaults={domEvents:!1,touchAction:gb,enable:!0,inputTarget:null,inputClass:null,preset:[[ea,{enable:!1}],[ca,{enable:!1},["rotate"]],[fa,{direction:Na}],[ba,{direction:Na},["swipe"]],[ga],[ga,{event:"doubletap",taps:2},["tap"]],[da]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ub=1,vb=2;ia.prototype={set:function(a){return la(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?vb:ub},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&rb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===vb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(ob|pb|qb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Y)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;if(a=this.get(a)){var b=this.recognizers,c=r(b,a);-1!==c&&(b.splice(c,1),this.touchAction.update())}return this},on:function(a,b){if(a!==d&&b!==d){var c=this.handlers;return g(q(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this}},off:function(a,b){if(a!==d){var c=this.handlers;return g(q(a),function(a){b?c[a]&&c[a].splice(r(c[a],b),1):delete c[a]}),this}},emit:function(a,b){this.options.domEvents&&ka(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ja(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},la(ha,{INPUT_START:Ea,INPUT_MOVE:Fa,INPUT_END:Ga,INPUT_CANCEL:Ha,STATE_POSSIBLE:nb,STATE_BEGAN:ob,STATE_CHANGED:pb,STATE_ENDED:qb,STATE_RECOGNIZED:rb,STATE_CANCELLED:sb,STATE_FAILED:tb,DIRECTION_NONE:Ia,DIRECTION_LEFT:Ja,DIRECTION_RIGHT:Ka,DIRECTION_UP:La,DIRECTION_DOWN:Ma,DIRECTION_HORIZONTAL:Na,DIRECTION_VERTICAL:Oa,DIRECTION_ALL:Pa,Manager:ia,Input:x,TouchAction:V,TouchInput:P,MouseInput:L,PointerEventInput:M,TouchMouseInput:R,SingleTouchInput:N,Recognizer:Y,AttrRecognizer:aa,Tap:ga,Pan:ba,Swipe:fa,Pinch:ca,Rotate:ea,Press:da,on:m,off:n,each:g,merge:ta,extend:sa,assign:la,inherit:i,bindFn:j,prefixed:u});var wb="undefined"!=typeof a?a:"undefined"!=typeof self?self:{};wb.Hammer=ha,"function"==typeof define&&define.amd?define(function(){return ha}):"undefined"!=typeof module&&module.exports?module.exports=ha:a[c]=ha}(window,document,"Hammer"),function(){function a(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function b(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function c(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function d(a,b){for(var c=null==a?0:a.length;c--&&!1!==b(a[c],c,a););return a}function e(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function f(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function g(a,b){return!(null==a||!a.length)&&-1<p(a,b,0)}function h(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function i(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function j(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function k(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function l(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function m(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function n(a,b,c){var d;return c(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function o(a,b,c,d){var e=a.length;for(c+=d?1:-1;d?c--:++c<e;)if(b(a[c],c,a))return c;return-1}function p(a,b,c){if(b===b)a:{--c;for(var d=a.length;++c<d;)if(a[c]===b){a=c;break a}a=-1}else a=o(a,r,c);return a}function q(a,b,c,d){--c;for(var e=a.length;++c<e;)if(d(a[c],b))return c;return-1}function r(a){return a!==a}function s(a,b){var c=null==a?0:a.length;return c?x(a,b)/c:P}function t(a){return function(b){return null==b?N:b[a]}}function u(a){return function(b){return null==a?N:a[b]}}function v(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function w(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].c;return a}function x(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==N&&(c=c===N?f:c+f)}return c}function y(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function z(a,b){return i(b,function(b){return[b,a[b]]})}function A(a){return function(b){return a(b)}}function B(a,b){return i(b,function(b){return a[b]})}function C(a,b){return a.has(b)}function D(a,b){for(var c=-1,d=a.length;++c<d&&-1<p(b,a[c],0););return c}function E(a,b){for(var c=a.length;c--&&-1<p(b,a[c],0););return c}function F(a){return"\\"+Ia[a]}function G(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function H(a,b){return function(c){return a(b(c))}}function I(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&"__lodash_placeholder__"!==g||(a[c]="__lodash_placeholder__",f[e++]=c)}return f}function J(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function K(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function L(a){if(Da.test(a)){for(var b=Ba.lastIndex=0;Ba.test(a);)++b;a=b}else a=Za(a);return a}function M(a){return Da.test(a)?a.match(Ba)||[]:a.split("")}var N,O=1/0,P=NaN,Q=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],R=/\b__p\+='';/g,S=/\b(__p\+=)''\+/g,T=/(__e\(.*?\)|\b__t\))\+'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,W=RegExp(U.source),X=RegExp(V.source),Y=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aa=/^\w*$/,ba=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ca=/[\\^$.*+?()[\]{}|]/g,da=RegExp(ca.source),ea=/^\s+|\s+$/g,fa=/^\s+/,ga=/\s+$/,ha=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ia=/\{\n\/\* \[wrapped with (.+)\] \*/,ja=/,? & /,ka=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,la=/\\(\\)?/g,ma=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,na=/\w*$/,oa=/^[-+]0x[0-9a-f]+$/i,pa=/^0b[01]+$/i,qa=/^\[object .+?Constructor\]$/,ra=/^0o[0-7]+$/i,sa=/^(?:0|[1-9]\d*)$/,ta=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ua=/($^)/,va=/['\n\r\u2028\u2029\\]/g,wa="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",xa="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+wa,ya="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",za=RegExp("[']","g"),Aa=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Ba=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+ya+wa,"g"),Ca=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",xa].join("|"),"g"),Da=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ea=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fa="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Ga={};Ga["[object Float32Array]"]=Ga["[object Float64Array]"]=Ga["[object Int8Array]"]=Ga["[object Int16Array]"]=Ga["[object Int32Array]"]=Ga["[object Uint8Array]"]=Ga["[object Uint8ClampedArray]"]=Ga["[object Uint16Array]"]=Ga["[object Uint32Array]"]=!0,Ga["[object Arguments]"]=Ga["[object Array]"]=Ga["[object ArrayBuffer]"]=Ga["[object Boolean]"]=Ga["[object DataView]"]=Ga["[object Date]"]=Ga["[object Error]"]=Ga["[object Function]"]=Ga["[object Map]"]=Ga["[object Number]"]=Ga["[object Object]"]=Ga["[object RegExp]"]=Ga["[object Set]"]=Ga["[object String]"]=Ga["[object WeakMap]"]=!1;var Ha={};Ha["[object Arguments]"]=Ha["[object Array]"]=Ha["[object ArrayBuffer]"]=Ha["[object DataView]"]=Ha["[object Boolean]"]=Ha["[object Date]"]=Ha["[object Float32Array]"]=Ha["[object Float64Array]"]=Ha["[object Int8Array]"]=Ha["[object Int16Array]"]=Ha["[object Int32Array]"]=Ha["[object Map]"]=Ha["[object Number]"]=Ha["[object Object]"]=Ha["[object RegExp]"]=Ha["[object Set]"]=Ha["[object String]"]=Ha["[object Symbol]"]=Ha["[object Uint8Array]"]=Ha["[object Uint8ClampedArray]"]=Ha["[object Uint16Array]"]=Ha["[object Uint32Array]"]=!0,Ha["[object Error]"]=Ha["[object Function]"]=Ha["[object WeakMap]"]=!1;var Ia={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ja=parseFloat,Ka=parseInt,La="object"==typeof global&&global&&global.Object===Object&&global,Ma="object"==typeof self&&self&&self.Object===Object&&self,Na=La||Ma||Function("return this")(),Oa="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pa=Oa&&"object"==typeof module&&module&&!module.nodeType&&module,Qa=Pa&&Pa.exports===Oa,Ra=Qa&&La.process,Sa=function(){try{var a=Pa&&Pa.f&&Pa.f("util").types;return a?a:Ra&&Ra.binding&&Ra.binding("util")}catch(a){}}(),Ta=Sa&&Sa.isArrayBuffer,Ua=Sa&&Sa.isDate,Va=Sa&&Sa.isMap,Wa=Sa&&Sa.isRegExp,Xa=Sa&&Sa.isSet,Ya=Sa&&Sa.isTypedArray,Za=t("length"),$a=u({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),_a=u({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),ab=u({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),bb=function cb(u){function wa(a){if(qe(a)&&!eh(a)&&!(a instanceof Ba)){if(a instanceof ya)return a;if(ef.call(a,"__wrapped__"))return Nd(a)}return new ya(a)}function xa(){}function ya(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=N}function Ba(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ia(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function La(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Ma(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Oa(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new Ma;++b<c;)this.add(a[b])}function Pa(a){this.size=(this.__data__=new La(a)).size}function Ra(a,b){var c,d=eh(a),e=!d&&dh(a),f=!d&&!e&&gh(a),g=!d&&!e&&!f&&lh(a),e=(d=d||e||f||g)?y(a.length,$e):[],h=e.length;for(c in a)!b&&!ef.call(a,c)||d&&("length"==c||f&&("offset"==c||"parent"==c)||g&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ad(c,h))||e.push(c);return e}function Sa(a){var b=a.length;return b?a[ec(0,b-1)]:N}function Za(a,b){return Jd(Ic(a),mb(b,0,a.length))}function db(a){return Jd(Ic(a))}function eb(a,b,c){(c===N||ie(a[b],c))&&(c!==N||b in a)||kb(a,b,c)}function fb(a,b,c){var d=a[b];ef.call(a,b)&&ie(d,c)&&(c!==N||b in a)||kb(a,b,c)}function gb(a,b){for(var c=a.length;c--;)if(ie(a[c][0],b))return c;return-1}function hb(a,b,c,d){return dg(a,function(a,e,f){b(d,a,c(a),f)}),d}function ib(a,b){return a&&Jc(b,Ee(b),a)}function jb(a,b){return a&&Jc(b,Fe(b),a)}function kb(a,b,c){"__proto__"==b&&xf?xf(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function lb(a,b){for(var c=-1,d=b.length,e=Te(d),f=null==a;++c<d;)e[c]=f?N:Ce(a,b[c]);return e}function mb(a,b,c){return a===a&&(c!==N&&(a=a<=c?a:c),b!==N&&(a=a>=b?a:b)),a}function nb(a,b,d,e,f,g){var h,i=1&b,j=2&b,k=4&b;if(d&&(h=f?d(a,e,f,g):d(a)),h!==N)return h;if(!pe(a))return a;if(e=eh(a)){if(h=wd(a),!i)return Ic(a,h)}else{var l=og(a),m="[object Function]"==l||"[object GeneratorFunction]"==l;if(gh(a))return Cc(a,i);if("[object Object]"==l||"[object Arguments]"==l||m&&!f){if(h=j||m?{}:xd(a),!i)return j?Lc(a,jb(h,a)):Kc(a,ib(h,a))}else{if(!Ha[l])return f?a:{};h=yd(a,l,i)}}if(g||(g=new Pa),f=g.get(a))return f;if(g.set(a,h),kh(a))return a.forEach(function(c){h.add(nb(c,b,d,c,a,g))}),h;if(ih(a))return a.forEach(function(c,e){h.set(e,nb(c,b,d,e,a,g))}),h;var j=k?j?od:nd:j?Fe:Ee,n=e?N:j(a);return c(n||a,function(c,e){n&&(e=c,c=a[e]),fb(h,e,nb(c,b,d,e,a,g))}),h}function ob(a){var b=Ee(a);return function(c){return pb(c,a,b)}}function pb(a,b,c){var d=c.length;if(null==a)return!d;for(a=Ye(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===N&&!(e in a)||!f(g))return!1}return!0}function qb(a,b,c){if("function"!=typeof a)throw new _e("Expected a function");return rg(function(){a.apply(N,c)},b)}function rb(a,b,c,d){var e=-1,f=g,j=!0,k=a.length,l=[],m=b.length;if(!k)return l;c&&(b=i(b,A(c))),d?(f=h,j=!1):200<=b.length&&(f=C,j=!1,b=new Oa(b));a:for(;++e<k;){var n=a[e],o=null==c?n:c(n),n=d||0!==n?n:0;if(j&&o===o){for(var p=m;p--;)if(b[p]===o)continue a;l.push(n)}else f(b,o,d)||l.push(n)}return l}function sb(a,b){var c=!0;return dg(a,function(a,d,e){return c=!!b(a,d,e)}),c}function tb(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===N?g===g&&!ue(g):c(g,h)))var h=g,i=f}return i}function ub(a,b){var c=[];return dg(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function vb(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=zd),e||(e=[]);++f<g;){var h=a[f];0<b&&c(h)?1<b?vb(h,b-1,c,d,e):j(e,h):d||(e[e.length]=h)}return e}function wb(a,b){return a&&fg(a,b,Ee)}function xb(a,b){return a&&gg(a,b,Ee)}function yb(a,b){return f(b,function(b){return me(a[b])})}function zb(a,b){b=Ac(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[Kd(b[c++])];return c&&c==d?a:N}function Ab(a,b,c){return b=b(a),eh(a)?b:j(b,c(a))}function Bb(a){if(null==a)a=a===N?"[object Undefined]":"[object Null]";else if(wf&&wf in Ye(a)){var b=ef.call(a,wf),c=a[wf];try{a[wf]=N;var d=!0}catch(a){}var e=hf.call(a);d&&(b?a[wf]=c:delete a[wf]),a=e}else a=hf.call(a);return a}function Cb(a,b){return a>b}function Db(a,b){return null!=a&&ef.call(a,b)}function Eb(a,b){return null!=a&&b in Ye(a)}function Fb(a,b,c){for(var d=c?h:g,e=a[0].length,f=a.length,j=f,k=Te(f),l=1/0,m=[];j--;){var n=a[j];j&&b&&(n=i(n,A(b))),l=Jf(n.length,l),k[j]=!c&&(b||120<=e&&120<=n.length)?new Oa(j&&n):N}var n=a[0],o=-1,p=k[0];a:for(;++o<e&&m.length<l;){var q=n[o],r=b?b(q):q,q=c||0!==q?q:0;if(p?!C(p,r):!d(m,r,c)){for(j=f;--j;){var s=k[j];if(s?!C(s,r):!d(a[j],r,c))continue a}p&&p.push(r),m.push(q)}}return m}function Gb(a,b,c){var d={};return wb(a,function(a,e,f){b(d,c(a),e,f)}),d}function Hb(b,c,d){return c=Ac(c,b),b=2>c.length?b:zb(b,lc(c,0,-1)),c=null==b?b:b[Kd(Sd(c))],null==c?N:a(c,b,d)}function Ib(a){return qe(a)&&"[object Arguments]"==Bb(a)}function Jb(a){return qe(a)&&"[object ArrayBuffer]"==Bb(a)}function Kb(a){return qe(a)&&"[object Date]"==Bb(a)}function Lb(a,b,c,d,e){if(a===b)b=!0;else if(null==a||null==b||!qe(a)&&!qe(b))b=a!==a&&b!==b;else a:{var f=eh(a),g=eh(b),h=f?"[object Array]":og(a),i=g?"[object Array]":og(b),h="[object Arguments]"==h?"[object Object]":h,i="[object Arguments]"==i?"[object Object]":i,j="[object Object]"==h,g="[object Object]"==i;if((i=h==i)&&gh(a)){if(!gh(b)){b=!1;break a}f=!0,j=!1}if(i&&!j)e||(e=new Pa),b=f||lh(a)?kd(a,b,c,d,Lb,e):ld(a,b,h,c,d,Lb,e);else{if(!(1&c)&&(f=j&&ef.call(a,"__wrapped__"),h=g&&ef.call(b,"__wrapped__"),f||h)){a=f?a.value():a,b=h?b.value():b,e||(e=new Pa),b=Lb(a,b,c,d,e);break a}if(i)b:if(e||(e=new Pa),f=1&c,h=nd(a),g=h.length,i=nd(b).length,g==i||f){for(j=g;j--;){var k=h[j];if(!(f?k in b:ef.call(b,k))){b=!1;break b}}if((i=e.get(a))&&e.get(b))b=i==b;else{i=!0,e.set(a,b),e.set(b,a);for(var l=f;++j<g;){var k=h[j],m=a[k],n=b[k];if(d)var o=f?d(n,m,k,b,a,e):d(m,n,k,a,b,e);if(o===N?m!==n&&!Lb(m,n,c,d,e):!o){i=!1;break}l||(l="constructor"==k)}i&&!l&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(i=!1)),e["delete"](a),e["delete"](b),b=i}}else b=!1;else b=!1}}return b}function Mb(a){return qe(a)&&"[object Map]"==og(a)}function Nb(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Ye(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var h=c[e],i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===N&&!(i in a))return!1}else{if(h=new Pa,d)var l=d(j,k,i,a,b,h);if(l===N?!Lb(k,j,3,d,h):!l)return!1}}return!0}function Ob(a){return!(!pe(a)||gf&&gf in a)&&(me(a)?lf:qa).test(Ld(a))}function Pb(a){return qe(a)&&"[object RegExp]"==Bb(a)}function Qb(a){return qe(a)&&"[object Set]"==og(a)}function Rb(a){return qe(a)&&oe(a.length)&&!!Ga[Bb(a)]}function Sb(a){return"function"==typeof a?a:null==a?Me:"object"==typeof a?eh(a)?Xb(a[0],a[1]):Wb(a):Qe(a)}function Tb(a){if(!Ed(a))return Hf(a);var b,c=[];for(b in Ye(a))ef.call(a,b)&&"constructor"!=b&&c.push(b);return c}function Ub(a,b){return a<b}function Vb(a,b){var c=-1,d=je(a)?Te(a.length):[];return dg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Wb(a){var b=td(a);return 1==b.length&&b[0][2]?Fd(b[0][0],b[0][1]):function(c){return c===a||Nb(c,a,b)}}function Xb(a,b){return Cd(a)&&b===b&&!pe(b)?Fd(Kd(a),b):function(c){var d=Ce(c,a);return d===N&&d===b?De(c,a):Lb(b,d,3)}}function Yb(a,b,c,d,e){a!==b&&fg(b,function(f,g){if(pe(f)){e||(e=new Pa);var h=e,i="__proto__"==g?N:a[g],j="__proto__"==g?N:b[g],k=h.get(j);if(k)eb(a,g,k);else{var k=d?d(i,j,g+"",a,b,h):N,l=k===N;if(l){var m=eh(j),n=!m&&gh(j),o=!m&&!n&&lh(j),k=j;m||n||o?eh(i)?k=i:ke(i)?k=Ic(i):n?(l=!1,k=Cc(j,!0)):o?(l=!1,k=Ec(j,!0)):k=[]:se(j)||dh(j)?(k=i,dh(i)?k=Ae(i):(!pe(i)||c&&me(i))&&(k=xd(j))):l=!1}l&&(h.set(j,k),Yb(k,j,c,d,h),h["delete"](j)),eb(a,g,k)}}else h=d?d("__proto__"==g?N:a[g],f,g+"",a,b,e):N,h===N&&(h=f),eb(a,g,h)},Fe)}function Zb(a,b){var c=a.length;if(c)return b+=0>b?c:0,Ad(b,c)?a[b]:N}function $b(a,b,c){var d=-1;return b=i(b.length?b:[Me],A(rd())),a=Vb(a,function(a){return{a:i(b,function(b){return b(a)}),b:++d,c:a}}),w(a,function(a,b){var d;a:{d=-1;for(var e=a.a,f=b.a,g=e.length,h=c.length;++d<g;){var i=Fc(e[d],f[d]);if(i){d=d>=h?i:i*("desc"==c[d]?-1:1);break a}}d=a.b-b.b}return d})}function _b(a,b){return ac(a,b,function(b,c){return De(a,c)})}function ac(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=zb(a,g);c(h,g)&&jc(f,Ac(g,a),h)}return f}function bc(a){return function(b){return zb(b,a)}}function cc(a,b,c,d){var e=d?q:p,f=-1,g=b.length,h=a;for(a===b&&(b=Ic(b)),c&&(h=i(a,A(c)));++f<g;)for(var j=0,k=b[f],k=c?c(k):k;-1<(j=e(h,k,j,d));)h!==a&&tf.call(h,j,1),tf.call(a,j,1);return a}function dc(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;Ad(e)?tf.call(a,e,1):tc(a,e)}}}function ec(a,b){return a+Cf(Mf()*(b-a+1))}function fc(a,b){var c="";if(!a||1>b||9007199254740991<b)return c;do b%2&&(c+=a),(b=Cf(b/2))&&(a+=a);while(b);return c}function gc(a,b){return sg(Gd(a,b,Me),a+"")}function hc(a){return Sa(He(a))}function ic(a,b){var c=He(a);return Jd(c,mb(b,0,c.length))}function jc(a,b,c,d){if(!pe(a))return a;b=Ac(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=Kd(b[e]),j=c;if(e!=g){var k=h[i],j=d?d(k,i,h):N;j===N&&(j=pe(k)?k:Ad(b[e+1])?[]:{})}fb(h,i,j),h=h[i]}return a}function kc(a){return Jd(He(a))}function lc(a,b,c){var d=-1,e=a.length;for(0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),
e=b>c?0:c-b>>>0,b>>>=0,c=Te(e);++d<e;)c[d]=a[d+b];return c}function mc(a,b){var c;return dg(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function nc(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&2147483647>=e){for(;d<e;){var f=d+e>>>1,g=a[f];null!==g&&!ue(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return oc(a,b,Me,c)}function oc(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,i=ue(b),j=b===N;e<f;){var k=Cf((e+f)/2),l=c(a[k]),m=l!==N,n=null===l,o=l===l,p=ue(l);(g?d||o:j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):n||p?0:d?l<=b:l<b)?e=k+1:f=k}return Jf(f,4294967294)}function pc(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!ie(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function qc(a){return"number"==typeof a?a:ue(a)?P:+a}function rc(a){if("string"==typeof a)return a;if(eh(a))return i(a,rc)+"";if(ue(a))return bg?bg.call(a):"";var b=a+"";return"0"==b&&1/a==-O?"-0":b}function sc(a,b,c){var d=-1,e=g,f=a.length,i=!0,j=[],k=j;if(c)i=!1,e=h;else if(200<=f){if(e=b?null:kg(a))return J(e);i=!1,e=C,k=new Oa}else k=b?[]:j;a:for(;++d<f;){var l=a[d],m=b?b(l):l,l=c||0!==l?l:0;if(i&&m===m){for(var n=k.length;n--;)if(k[n]===m)continue a;b&&k.push(m),j.push(l)}else e(k,m,c)||(k!==j&&k.push(m),j.push(l))}return j}function tc(a,b){return b=Ac(b,a),a=2>b.length?a:zb(a,lc(b,0,-1)),null==a||delete a[Kd(Sd(b))]}function uc(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?lc(a,d?0:f,d?f+1:e):lc(a,d?f+1:0,d?e:f)}function vc(a,b){var c=a;return c instanceof Ba&&(c=c.value()),k(b,function(a,b){return b.func.apply(b.thisArg,j([a],b.args))},c)}function wc(a,b,c){var d=a.length;if(2>d)return d?sc(a[0]):[];for(var e=-1,f=Te(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=rb(f[e]||g,a[h],b,c));return sc(vb(f,1),b,c)}function xc(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;)c(g,a[d],d<f?b[d]:N);return g}function yc(a){return ke(a)?a:[]}function zc(a){return"function"==typeof a?a:Me}function Ac(a,b){return eh(a)?a:Cd(a,b)?[a]:tg(Be(a))}function Bc(a,b,c){var d=a.length;return c=c===N?d:c,!b&&c>=d?a:lc(a,b,c)}function Cc(a,b){if(b)return a.slice();var c=a.length,c=pf?pf(c):new a.constructor(c);return a.copy(c),c}function Dc(a){var b=new a.constructor(a.byteLength);return new of(b).set(new of(a)),b}function Ec(a,b){return new a.constructor(b?Dc(a.buffer):a.buffer,a.byteOffset,a.length)}function Fc(a,b){if(a!==b){var c=a!==N,d=null===a,e=a===a,f=ue(a),g=b!==N,h=null===b,i=b===b,j=ue(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&a<b||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function Gc(a,b,c,d){var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=If(f-g,0),k=Te(i+j);for(d=!d;++h<i;)k[h]=b[h];for(;++e<g;)(d||e<f)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function Hc(a,b,c,d){var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=If(f-h,0),l=Te(k+j);for(d=!d;++e<k;)l[e]=a[e];for(k=e;++i<j;)l[k+i]=b[i];for(;++g<h;)(d||e<f)&&(l[k+c[g]]=a[e++]);return l}function Ic(a,b){var c=-1,d=a.length;for(b||(b=Te(d));++c<d;)b[c]=a[c];return b}function Jc(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):N;i===N&&(i=a[h]),e?kb(c,h,i):fb(c,h,i)}return c}function Kc(a,b){return Jc(a,mg(a),b)}function Lc(a,b){return Jc(a,ng(a),b)}function Mc(a,c){return function(d,e){var f=eh(d)?b:hb,g=c?c():{};return f(d,a,rd(e,2),g)}}function Nc(a){return gc(function(b,c){var d=-1,e=c.length,f=1<e?c[e-1]:N,g=2<e?c[2]:N,f=3<a.length&&"function"==typeof f?(e--,f):N;for(g&&Bd(c[0],c[1],g)&&(f=3>e?N:f,e=1),b=Ye(b);++d<e;)(g=c[d])&&a(b,g,d,f);return b})}function Oc(a,b){return function(c,d){if(null==c)return c;if(!je(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Ye(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Pc(a){return function(b,c,d){var e=-1,f=Ye(b);d=d(b);for(var g=d.length;g--;){var h=d[a?g:++e];if(!1===c(f[h],h,f))break}return b}}function Qc(a,b,c){function d(){return(this&&this!==Na&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=1&b,f=Tc(a);return d}function Rc(a){return function(b){b=Be(b);var c=Da.test(b)?M(b):N,d=c?c[0]:b.charAt(0);return b=c?Bc(c,1).join(""):b.slice(1),d[a]()+b}}function Sc(a){return function(b){return k(Ke(Je(b).replace(za,"")),a,"")}}function Tc(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=cg(a.prototype),b=a.apply(c,b);return pe(b)?b:c}}function Uc(b,c,d){function e(){for(var g=arguments.length,h=Te(g),i=g,j=qd(e);i--;)h[i]=arguments[i];return i=3>g&&h[0]!==j&&h[g-1]!==j?[]:I(h,j),g-=i.length,g<d?dd(b,c,Xc,e.placeholder,N,h,i,N,N,d-g):a(this&&this!==Na&&this instanceof e?f:b,this,h)}var f=Tc(b);return e}function Vc(a){return function(b,c,d){var e=Ye(b);if(!je(b)){var f=rd(c,3);b=Ee(b),c=function(a){return f(e[a],a,e)}}return c=a(b,c,d),-1<c?e[f?b[c]:c]:N}}function Wc(a){return md(function(b){var c=b.length,d=c,e=ya.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new _e("Expected a function");if(e&&!g&&"wrapper"==pd(f))var g=new ya([],(!0))}for(d=g?d:c;++d<c;)var f=b[d],e=pd(f),h="wrapper"==e?lg(f):N,g=h&&Dd(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[pd(h[0])].apply(g,h[3]):1==f.length&&Dd(f)?g[e]():g.thru(f);return function(){var a=arguments,d=a[0];if(g&&1==a.length&&eh(d))return g.plant(d).value();for(var e=0,a=c?b[e].apply(this,a):d;++e<c;)a=b[e].call(this,a);return a}})}function Xc(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=Te(r),t=r;t--;)s[t]=arguments[t];if(o){var u,v=qd(k),t=s.length;for(u=0;t--;)s[t]===v&&++u}if(d&&(s=Gc(s,d,e,o)),f&&(s=Hc(s,f,g,o)),r-=u,o&&r<j)return v=I(s,v),dd(a,b,Xc,k.placeholder,c,s,v,h,i,j-r);if(v=m?c:this,t=n?v[a]:a,r=s.length,h){u=s.length;for(var w=Jf(h.length,u),x=Ic(s);w--;){var y=h[w];s[w]=Ad(y,u)?x[y]:N}}else p&&1<r&&s.reverse();return l&&i<r&&(s.length=i),this&&this!==Na&&this instanceof k&&(t=q||Tc(t)),t.apply(v,s)}var l=128&b,m=1&b,n=2&b,o=24&b,p=512&b,q=n?N:Tc(a);return k}function Yc(a,b){return function(c,d){return Gb(c,a,b(d))}}function Zc(a,b){return function(c,d){var e;if(c===N&&d===N)return b;if(c!==N&&(e=c),d!==N){if(e===N)return d;"string"==typeof c||"string"==typeof d?(c=rc(c),d=rc(d)):(c=qc(c),d=qc(d)),e=a(c,d)}return e}}function $c(b){return md(function(c){return c=i(c,A(rd())),gc(function(d){var e=this;return b(c,function(b){return a(b,e,d)})})})}function _c(a,b){b=b===N?" ":rc(b);var c=b.length;return 2>c?c?fc(b,a):b:(c=fc(b,Bf(a/L(b))),Da.test(b)?Bc(M(c),0,a).join(""):c.slice(0,a))}function ad(b,c,d,e){function f(){for(var c=-1,i=arguments.length,j=-1,k=e.length,l=Te(k+i),m=this&&this!==Na&&this instanceof f?h:b;++j<k;)l[j]=e[j];for(;i--;)l[j++]=arguments[++c];return a(m,g?d:this,l)}var g=1&c,h=Tc(b);return f}function bd(a){return function(b,c,d){d&&"number"!=typeof d&&Bd(b,c,d)&&(c=d=N),b=we(b),c===N?(c=b,b=0):c=we(c),d=d===N?b<c?1:-1:we(d);var e=-1;c=If(Bf((c-b)/(d||1)),0);for(var f=Te(c);c--;)f[a?c:++e]=b,b+=d;return f}}function cd(a){return function(b,c){return"string"==typeof b&&"string"==typeof c||(b=ze(b),c=ze(c)),a(b,c)}}function dd(a,b,c,d,e,f,g,h,i,j){var k=8&b,l=k?g:N;g=k?N:g;var m=k?f:N;return f=k?N:f,b=(b|(k?32:64))&~(k?64:32),4&b||(b&=-4),e=[a,b,e,m,l,f,g,h,i,j],c=c.apply(N,e),Dd(a)&&qg(c,e),c.placeholder=d,Hd(c,a,b)}function ed(a){var b=Xe[a];return function(a,c){if(a=ze(a),c=null==c?0:Jf(xe(c),292)){var d=(Be(a)+"e").split("e"),d=b(d[0]+"e"+(+d[1]+c)),d=(Be(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-c))}return b(a)}}function fd(a){return function(b){var c=og(b);return"[object Map]"==c?G(b):"[object Set]"==c?K(b):z(b,a(b))}}function gd(a,b,c,d,e,f,g,h){var i=2&b;if(!i&&"function"!=typeof a)throw new _e("Expected a function");var j=d?d.length:0;if(j||(b&=-97,d=e=N),g=g===N?g:If(xe(g),0),h=h===N?h:xe(h),j-=e?e.length:0,64&b){var k=d,l=e;d=e=N}var m=i?N:lg(a);return f=[a,b,c,d,e,k,l,f,g,h],m&&(c=f[1],a=m[1],b=c|a,d=128==a&&8==c||128==a&&256==c&&f[7].length<=m[8]||384==a&&m[7].length<=m[8]&&8==c,131>b||d)&&(1&a&&(f[2]=m[2],b|=1&c?0:4),(c=m[3])&&(d=f[3],f[3]=d?Gc(d,c,m[4]):c,f[4]=d?I(f[3],"__lodash_placeholder__"):m[4]),(c=m[5])&&(d=f[5],f[5]=d?Hc(d,c,m[6]):c,f[6]=d?I(f[5],"__lodash_placeholder__"):m[6]),(c=m[7])&&(f[7]=c),128&a&&(f[8]=null==f[8]?m[8]:Jf(f[8],m[8])),null==f[9]&&(f[9]=m[9]),f[0]=m[0],f[1]=b),a=f[0],b=f[1],c=f[2],d=f[3],e=f[4],h=f[9]=f[9]===N?i?0:a.length:If(f[9]-j,0),!h&&24&b&&(b&=-25),Hd((m?hg:qg)(b&&1!=b?8==b||16==b?Uc(a,b,h):32!=b&&33!=b||e.length?Xc.apply(N,f):ad(a,b,c,d):Qc(a,b,c),f),a,b)}function hd(a,b,c,d){return a===N||ie(a,bf[c])&&!ef.call(d,c)?b:a}function id(a,b,c,d,e,f){return pe(a)&&pe(b)&&(f.set(b,a),Yb(a,b,N,id,f),f["delete"](b)),a}function jd(a){return se(a)?N:a}function kd(a,b,c,d,e,f){var g=1&c,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;if((i=f.get(a))&&f.get(b))return i==b;var i=-1,j=!0,k=2&c?new Oa:N;for(f.set(a,b),f.set(b,a);++i<h;){var l=a[i],n=b[i];if(d)var o=g?d(n,l,i,b,a,f):d(l,n,i,a,b,f);if(o!==N){if(o)continue;j=!1;break}if(k){if(!m(b,function(a,b){if(!C(k,b)&&(l===a||e(l,a,c,d,f)))return k.push(b)})){j=!1;break}}else if(l!==n&&!e(l,n,c,d,f)){j=!1;break}}return f["delete"](a),f["delete"](b),j}function ld(a,b,c,d,e,f,g){switch(c){case"[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer,b=b.buffer;case"[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new of(a),new of(b)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return ie(+a,+b);case"[object Error]":return a.name==b.name&&a.message==b.message;case"[object RegExp]":case"[object String]":return a==b+"";case"[object Map]":var h=G;case"[object Set]":if(h||(h=J),a.size!=b.size&&!(1&d))break;return(c=g.get(a))?c==b:(d|=2,g.set(a,b),b=kd(h(a),h(b),d,e,f,g),g["delete"](a),b);case"[object Symbol]":if(ag)return ag.call(a)==ag.call(b)}return!1}function md(a){return sg(Gd(a,N,Qd),a+"")}function nd(a){return Ab(a,Ee,mg)}function od(a){return Ab(a,Fe,ng)}function pd(a){for(var b=a.name+"",c=Vf[b],d=ef.call(Vf,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function qd(a){return(ef.call(wa,"placeholder")?wa:a).placeholder}function rd(){var a=wa.iteratee||Ne,a=a===Ne?Sb:a;return arguments.length?a(arguments[0],arguments[1]):a}function sd(a,b){var c=a.__data__,d=typeof b;return("string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==b:null===b)?c["string"==typeof b?"string":"hash"]:c.map}function td(a){for(var b=Ee(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!pe(e)]}return b}function ud(a,b){var c=null==a?N:a[b];return Ob(c)?c:N}function vd(a,b,c){b=Ac(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=Kd(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:(e=null==a?0:a.length,!!e&&oe(e)&&Ad(g,e)&&(eh(a)||dh(a)))}function wd(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&ef.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function xd(a){return"function"!=typeof a.constructor||Ed(a)?{}:cg(qf(a))}function yd(a,b,c){var d=a.constructor;switch(b){case"[object ArrayBuffer]":return Dc(a);case"[object Boolean]":case"[object Date]":return new d((+a));case"[object DataView]":return b=c?Dc(a.buffer):a.buffer,new a.constructor(b,a.byteOffset,a.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ec(a,c);case"[object Map]":return new d;case"[object Number]":case"[object String]":return new d(a);case"[object RegExp]":return b=new a.constructor(a.source,na.exec(a)),b.lastIndex=a.lastIndex,b;case"[object Set]":return new d;case"[object Symbol]":return ag?Ye(ag.call(a)):{}}}function zd(a){return eh(a)||dh(a)||!!(uf&&a&&a[uf])}function Ad(a,b){var c=typeof a;return b=null==b?9007199254740991:b,!!b&&("number"==c||"symbol"!=c&&sa.test(a))&&-1<a&&0==a%1&&a<b}function Bd(a,b,c){if(!pe(c))return!1;var d=typeof b;return!!("number"==d?je(c)&&Ad(b,c.length):"string"==d&&b in c)&&ie(c[b],a)}function Cd(a,b){if(eh(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!ue(a))||aa.test(a)||!_.test(a)||null!=b&&a in Ye(b)}function Dd(a){var b=pd(a),c=wa[b];return"function"==typeof c&&b in Ba.prototype&&(a===c||(b=lg(c),!!b&&a===b[0]))}function Ed(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||bf)}function Fd(a,b){return function(c){return null!=c&&c[a]===b&&(b!==N||a in Ye(c))}}function Gd(b,c,d){return c=If(c===N?b.length-1:c,0),function(){for(var e=arguments,f=-1,g=If(e.length-c,0),h=Te(g);++f<g;)h[f]=e[c+f];for(f=-1,g=Te(c+1);++f<c;)g[f]=e[f];return g[c]=d(h),a(b,this,g)}}function Hd(a,b,c){var d=b+"";b=sg;var e,f=Md;return e=(e=d.match(ia))?e[1].split(ja):[],c=f(e,c),(f=c.length)&&(e=f-1,c[e]=(1<f?"& ":"")+c[e],c=c.join(2<f?", ":" "),d=d.replace(ha,"{\n/* [wrapped with "+c+"] */\n")),b(a,d)}function Id(a){var b=0,c=0;return function(){var d=Kf(),e=16-(d-c);if(c=d,0<e){if(800<=++b)return arguments[0]}else b=0;return a.apply(N,arguments)}}function Jd(a,b){var c=-1,d=a.length,e=d-1;for(b=b===N?d:b;++c<b;){var d=ec(c,e),f=a[d];a[d]=a[c],a[c]=f}return a.length=b,a}function Kd(a){if("string"==typeof a||ue(a))return a;var b=a+"";return"0"==b&&1/a==-O?"-0":b}function Ld(a){if(null!=a){try{return df.call(a)}catch(a){}return a+""}return""}function Md(a,b){return c(Q,function(c){var d="_."+c[0];b&c[1]&&!g(a,d)&&a.push(d)}),a.sort()}function Nd(a){if(a instanceof Ba)return a.clone();var b=new ya(a.__wrapped__,a.__chain__);return b.__actions__=Ic(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function Od(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:xe(c),0>c&&(c=If(d+c,0)),o(a,rd(b,3),c)):-1}function Pd(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;return c!==N&&(e=xe(c),e=0>c?If(d+e,0):Jf(e,d-1)),o(a,rd(b,3),e,!0)}function Qd(a){return(null==a?0:a.length)?vb(a,1):[]}function Rd(a){return a&&a.length?a[0]:N}function Sd(a){var b=null==a?0:a.length;return b?a[b-1]:N}function Td(a,b){return a&&a.length&&b&&b.length?cc(a,b):a}function Ud(a){return null==a?a:Nf.call(a)}function Vd(a){if(!a||!a.length)return[];var b=0;return a=f(a,function(a){if(ke(a))return b=If(a.length,b),!0}),y(b,function(b){return i(a,t(b))})}function Wd(b,c){if(!b||!b.length)return[];var d=Vd(b);return null==c?d:i(d,function(b){return a(c,N,b)})}function Xd(a){return a=wa(a),a.__chain__=!0,a}function Yd(a,b){return b(a)}function Zd(){return this}function $d(a,b){return(eh(a)?c:dg)(a,rd(b,3))}function _d(a,b){return(eh(a)?d:eg)(a,rd(b,3))}function ae(a,b){return(eh(a)?i:Vb)(a,rd(b,3))}function be(a,b,c){return b=c?N:b,b=a&&null==b?a.length:b,gd(a,128,N,N,N,N,b)}function ce(a,b){var c;if("function"!=typeof b)throw new _e("Expected a function");return a=xe(a),function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=N),c}}function de(a,b,c){return b=c?N:b,a=gd(a,8,N,N,N,N,N,b),a.placeholder=de.placeholder,a}function ee(a,b,c){return b=c?N:b,a=gd(a,16,N,N,N,N,N,b),a.placeholder=ee.placeholder,a}function fe(a,b,c){function d(b){var c=i,d=j;return i=j=N,o=b,l=a.apply(d,c)}function e(a){var c=a-n;return a-=o,n===N||c>=b||0>c||q&&a>=k}function f(){var a=Ug();if(e(a))return g(a);var c,d=rg;c=a-o,a=b-(a-n),c=q?Jf(a,k-c):a,m=d(f,c)}function g(a){return m=N,r&&i?d(a):(i=j=N,l)}function h(){var a=Ug(),c=e(a);if(i=arguments,j=this,n=a,c){if(m===N)return o=a=n,m=rg(f,b),p?d(a):l;if(q)return m=rg(f,b),d(n)}return m===N&&(m=rg(f,b)),l}var i,j,k,l,m,n,o=0,p=!1,q=!1,r=!0;if("function"!=typeof a)throw new _e("Expected a function");return b=ze(b)||0,pe(c)&&(p=!!c.leading,k=(q="maxWait"in c)?If(ze(c.maxWait)||0,b):k,r="trailing"in c?!!c.trailing:r),h.cancel=function(){m!==N&&jg(m),o=0,i=n=j=m=N},h.flush=function(){return m===N?l:g(Ug())},h}function ge(a,b){function c(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;return f.has(e)?f.get(e):(d=a.apply(this,d),c.cache=f.set(e,d)||f,d)}if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new _e("Expected a function");return c.cache=new(ge.Cache||Ma),c}function he(a){if("function"!=typeof a)throw new _e("Expected a function");return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function ie(a,b){return a===b||a!==a&&b!==b}function je(a){return null!=a&&oe(a.length)&&!me(a)}function ke(a){return qe(a)&&je(a)}function le(a){if(!qe(a))return!1;var b=Bb(a);return"[object Error]"==b||"[object DOMException]"==b||"string"==typeof a.message&&"string"==typeof a.name&&!se(a)}function me(a){return!!pe(a)&&(a=Bb(a),"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a)}function ne(a){return"number"==typeof a&&a==xe(a)}function oe(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function pe(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function qe(a){return null!=a&&"object"==typeof a}function re(a){return"number"==typeof a||qe(a)&&"[object Number]"==Bb(a)}function se(a){return!(!qe(a)||"[object Object]"!=Bb(a))&&(a=qf(a),null===a||(a=ef.call(a,"constructor")&&a.constructor,"function"==typeof a&&a instanceof a&&df.call(a)==jf))}function te(a){return"string"==typeof a||!eh(a)&&qe(a)&&"[object String]"==Bb(a)}function ue(a){return"symbol"==typeof a||qe(a)&&"[object Symbol]"==Bb(a)}function ve(a){if(!a)return[];if(je(a))return te(a)?M(a):Ic(a);if(vf&&a[vf]){a=a[vf]();for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}return b=og(a),("[object Map]"==b?G:"[object Set]"==b?J:He)(a)}function we(a){return a?(a=ze(a),a===O||a===-O?1.7976931348623157e308*(0>a?-1:1):a===a?a:0):0===a?a:0}function xe(a){a=we(a);var b=a%1;return a===a?b?a-b:a:0}function ye(a){return a?mb(xe(a),0,4294967295):0}function ze(a){if("number"==typeof a)return a;if(ue(a))return P;if(pe(a)&&(a="function"==typeof a.valueOf?a.valueOf():a,a=pe(a)?a+"":a),"string"!=typeof a)return 0===a?a:+a;a=a.replace(ea,"");var b=pa.test(a);return b||ra.test(a)?Ka(a.slice(2),b?2:8):oa.test(a)?P:+a}function Ae(a){return Jc(a,Fe(a))}function Be(a){return null==a?"":rc(a)}function Ce(a,b,c){return a=null==a?N:zb(a,b),a===N?c:a}function De(a,b){return null!=a&&vd(a,b,Eb)}function Ee(a){return je(a)?Ra(a):Tb(a)}function Fe(a){if(je(a))a=Ra(a,!0);else if(pe(a)){var b,c=Ed(a),d=[];for(b in a)("constructor"!=b||!c&&ef.call(a,b))&&d.push(b);a=d}else{if(b=[],null!=a)for(c in Ye(a))b.push(c);a=b}return a}function Ge(a,b){if(null==a)return{};var c=i(od(a),function(a){return[a]});return b=rd(b),ac(a,c,function(a,c){return b(a,c[0])})}function He(a){return null==a?[]:B(a,Ee(a))}function Ie(a){return Lh(Be(a).toLowerCase())}function Je(a){return(a=Be(a))&&a.replace(ta,$a).replace(Aa,"")}function Ke(a,b,c){return a=Be(a),b=c?N:b,b===N?Ea.test(a)?a.match(Ca)||[]:a.match(ka)||[]:a.match(b)||[]}function Le(a){return function(){return a}}function Me(a){return a}function Ne(a){return Sb("function"==typeof a?a:nb(a,1))}function Oe(a,b,d){var e=Ee(b),f=yb(b,e);null!=d||pe(b)&&(f.length||!e.length)||(d=b,b=a,a=this,f=yb(b,Ee(b)));var g=!(pe(d)&&"chain"in d&&!d.chain),h=me(a);return c(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__);return(c.__actions__=Ic(this.__actions__)).push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,j([this.value()],arguments))})}),a}function Pe(){}function Qe(a){return Cd(a)?t(Kd(a)):bc(a)}function Re(){return[]}function Se(){return!1}u=null==u?Na:bb.defaults(Na.Object(),u,bb.pick(Na,Fa));var Te=u.Array,Ue=u.Date,Ve=u.Error,We=u.Function,Xe=u.Math,Ye=u.Object,Ze=u.RegExp,$e=u.String,_e=u.TypeError,af=Te.prototype,bf=Ye.prototype,cf=u["__core-js_shared__"],df=We.prototype.toString,ef=bf.hasOwnProperty,ff=0,gf=function(){var a=/[^.]+$/.exec(cf&&cf.keys&&cf.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),hf=bf.toString,jf=df.call(Ye),kf=Na._,lf=Ze("^"+df.call(ef).replace(ca,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mf=Qa?u.Buffer:N,nf=u.Symbol,of=u.Uint8Array,pf=mf?mf.g:N,qf=H(Ye.getPrototypeOf,Ye),rf=Ye.create,sf=bf.propertyIsEnumerable,tf=af.splice,uf=nf?nf.isConcatSpreadable:N,vf=nf?nf.iterator:N,wf=nf?nf.toStringTag:N,xf=function(){try{var a=ud(Ye,"defineProperty");return a({},"",{}),a}catch(a){}}(),yf=u.clearTimeout!==Na.clearTimeout&&u.clearTimeout,zf=Ue&&Ue.now!==Na.Date.now&&Ue.now,Af=u.setTimeout!==Na.setTimeout&&u.setTimeout,Bf=Xe.ceil,Cf=Xe.floor,Df=Ye.getOwnPropertySymbols,Ef=mf?mf.isBuffer:N,Ff=u.isFinite,Gf=af.join,Hf=H(Ye.keys,Ye),If=Xe.max,Jf=Xe.min,Kf=Ue.now,Lf=u.parseInt,Mf=Xe.random,Nf=af.reverse,Of=ud(u,"DataView"),Pf=ud(u,"Map"),Qf=ud(u,"Promise"),Rf=ud(u,"Set"),Sf=ud(u,"WeakMap"),Tf=ud(Ye,"create"),Uf=Sf&&new Sf,Vf={},Wf=Ld(Of),Xf=Ld(Pf),Yf=Ld(Qf),Zf=Ld(Rf),$f=Ld(Sf),_f=nf?nf.prototype:N,ag=_f?_f.valueOf:N,bg=_f?_f.toString:N,cg=function(){function a(){}return function(b){return pe(b)?rf?rf(b):(a.prototype=b,b=new a,a.prototype=N,b):{}}}();wa.templateSettings={escape:Y,evaluate:Z,interpolate:$,variable:"",imports:{_:wa}},wa.prototype=xa.prototype,wa.prototype.constructor=wa,ya.prototype=cg(xa.prototype),ya.prototype.constructor=ya,Ba.prototype=cg(xa.prototype),Ba.prototype.constructor=Ba,Ia.prototype.clear=function(){this.__data__=Tf?Tf(null):{},this.size=0},Ia.prototype["delete"]=function(a){return a=this.has(a)&&delete this.__data__[a],this.size-=a?1:0,a},Ia.prototype.get=function(a){var b=this.__data__;return Tf?(a=b[a],"__lodash_hash_undefined__"===a?N:a):ef.call(b,a)?b[a]:N},Ia.prototype.has=function(a){var b=this.__data__;return Tf?b[a]!==N:ef.call(b,a)},Ia.prototype.set=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=Tf&&b===N?"__lodash_hash_undefined__":b,this},La.prototype.clear=function(){this.__data__=[],this.size=0},La.prototype["delete"]=function(a){var b=this.__data__;return a=gb(b,a),!(0>a||(a==b.length-1?b.pop():tf.call(b,a,1),--this.size,0))},La.prototype.get=function(a){var b=this.__data__;return a=gb(b,a),0>a?N:b[a][1]},La.prototype.has=function(a){return-1<gb(this.__data__,a)},La.prototype.set=function(a,b){var c=this.__data__,d=gb(c,a);return 0>d?(++this.size,c.push([a,b])):c[d][1]=b,this},Ma.prototype.clear=function(){this.size=0,this.__data__={hash:new Ia,map:new(Pf||La),string:new Ia}},Ma.prototype["delete"]=function(a){return a=sd(this,a)["delete"](a),this.size-=a?1:0,a},Ma.prototype.get=function(a){return sd(this,a).get(a)},Ma.prototype.has=function(a){return sd(this,a).has(a)},Ma.prototype.set=function(a,b){var c=sd(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this},Oa.prototype.add=Oa.prototype.push=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Oa.prototype.has=function(a){return this.__data__.has(a)},Pa.prototype.clear=function(){this.__data__=new La,this.size=0},Pa.prototype["delete"]=function(a){var b=this.__data__;return a=b["delete"](a),this.size=b.size,a},Pa.prototype.get=function(a){return this.__data__.get(a)},Pa.prototype.has=function(a){return this.__data__.has(a)},Pa.prototype.set=function(a,b){var c=this.__data__;if(c instanceof La){var d=c.__data__;if(!Pf||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new Ma(d)}return c.set(a,b),this.size=c.size,this};var dg=Oc(wb),eg=Oc(xb,!0),fg=Pc(),gg=Pc(!0),hg=Uf?function(a,b){return Uf.set(a,b),a}:Me,ig=xf?function(a,b){return xf(a,"toString",{configurable:!0,enumerable:!1,value:Le(b),writable:!0})}:Me,jg=yf||function(a){return Na.clearTimeout(a)},kg=Rf&&1/J(new Rf([,-0]))[1]==O?function(a){return new Rf(a)}:Pe,lg=Uf?function(a){return Uf.get(a)}:Pe,mg=Df?function(a){return null==a?[]:(a=Ye(a),f(Df(a),function(b){return sf.call(a,b)}))}:Re,ng=Df?function(a){for(var b=[];a;)j(b,mg(a)),a=qf(a);return b}:Re,og=Bb;(Of&&"[object DataView]"!=og(new Of(new ArrayBuffer(1)))||Pf&&"[object Map]"!=og(new Pf)||Qf&&"[object Promise]"!=og(Qf.resolve())||Rf&&"[object Set]"!=og(new Rf)||Sf&&"[object WeakMap]"!=og(new Sf))&&(og=function(a){var b=Bb(a);if(a=(a="[object Object]"==b?a.constructor:N)?Ld(a):"")switch(a){case Wf:return"[object DataView]";case Xf:return"[object Map]";case Yf:return"[object Promise]";case Zf:return"[object Set]";case $f:return"[object WeakMap]"}return b});var pg=cf?me:Se,qg=Id(hg),rg=Af||function(a,b){return Na.setTimeout(a,b)},sg=Id(ig),tg=function(a){a=ge(a,function(a){return 500===b.size&&b.clear(),a});var b=a.cache;return a}(function(a){var b=[];return 46===a.charCodeAt(0)&&b.push(""),a.replace(ba,function(a,c,d,e){b.push(d?e.replace(la,"$1"):c||a)}),b}),ug=gc(function(a,b){return ke(a)?rb(a,vb(b,1,ke,!0)):[]}),vg=gc(function(a,b){var c=Sd(b);return ke(c)&&(c=N),ke(a)?rb(a,vb(b,1,ke,!0),rd(c,2)):[]}),wg=gc(function(a,b){var c=Sd(b);return ke(c)&&(c=N),ke(a)?rb(a,vb(b,1,ke,!0),N,c):[]}),xg=gc(function(a){var b=i(a,yc);return b.length&&b[0]===a[0]?Fb(b):[]}),yg=gc(function(a){var b=Sd(a),c=i(a,yc);return b===Sd(c)?b=N:c.pop(),c.length&&c[0]===a[0]?Fb(c,rd(b,2)):[]}),zg=gc(function(a){var b=Sd(a),c=i(a,yc);return(b="function"==typeof b?b:N)&&c.pop(),c.length&&c[0]===a[0]?Fb(c,N,b):[]}),Ag=gc(Td),Bg=md(function(a,b){var c=null==a?0:a.length,d=lb(a,b);return dc(a,i(b,function(a){return Ad(a,c)?+a:a}).sort(Fc)),d}),Cg=gc(function(a){return sc(vb(a,1,ke,!0))}),Dg=gc(function(a){var b=Sd(a);return ke(b)&&(b=N),sc(vb(a,1,ke,!0),rd(b,2))}),Eg=gc(function(a){var b=Sd(a),b="function"==typeof b?b:N;return sc(vb(a,1,ke,!0),N,b)}),Fg=gc(function(a,b){return ke(a)?rb(a,b):[]}),Gg=gc(function(a){return wc(f(a,ke))}),Hg=gc(function(a){var b=Sd(a);return ke(b)&&(b=N),wc(f(a,ke),rd(b,2))}),Ig=gc(function(a){var b=Sd(a),b="function"==typeof b?b:N;return wc(f(a,ke),N,b)}),Jg=gc(Vd),Kg=gc(function(a){var b=a.length,b=1<b?a[b-1]:N,b="function"==typeof b?(a.pop(),b):N;return Wd(a,b)}),Lg=md(function(a){function b(b){return lb(b,a)}var c=a.length,d=c?a[0]:0,e=this.__wrapped__;return!(1<c||this.__actions__.length)&&e instanceof Ba&&Ad(d)?(e=e.slice(d,+d+(c?1:0)),e.__actions__.push({func:Yd,args:[b],thisArg:N}),new ya(e,this.__chain__).thru(function(a){return c&&!a.length&&a.push(N),a})):this.thru(b)}),Mg=Mc(function(a,b,c){ef.call(a,c)?++a[c]:kb(a,c,1)}),Ng=Vc(Od),Og=Vc(Pd),Pg=Mc(function(a,b,c){ef.call(a,c)?a[c].push(b):kb(a,c,[b])}),Qg=gc(function(b,c,d){var e=-1,f="function"==typeof c,g=je(b)?Te(b.length):[];return dg(b,function(b){g[++e]=f?a(c,b,d):Hb(b,c,d)}),g}),Rg=Mc(function(a,b,c){kb(a,c,b)}),Sg=Mc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Tg=gc(function(a,b){if(null==a)return[];var c=b.length;return 1<c&&Bd(a,b[0],b[1])?b=[]:2<c&&Bd(b[0],b[1],b[2])&&(b=[b[0]]),$b(a,vb(b,1),[])}),Ug=zf||function(){return Na.Date.now()},Vg=gc(function(a,b,c){var d=1;if(c.length)var e=I(c,qd(Vg)),d=32|d;return gd(a,d,b,c,e)}),Wg=gc(function(a,b,c){var d=3;if(c.length)var e=I(c,qd(Wg)),d=32|d;return gd(b,d,a,c,e)}),Xg=gc(function(a,b){return qb(a,1,b)}),Yg=gc(function(a,b,c){return qb(a,ze(b)||0,c)});ge.Cache=Ma;var Zg=gc(function(b,c){c=1==c.length&&eh(c[0])?i(c[0],A(rd())):i(vb(c,1),A(rd()));var d=c.length;return gc(function(e){for(var f=-1,g=Jf(e.length,d);++f<g;)e[f]=c[f].call(this,e[f]);return a(b,this,e)})}),$g=gc(function(a,b){return gd(a,32,N,b,I(b,qd($g)))}),_g=gc(function(a,b){return gd(a,64,N,b,I(b,qd(_g)))}),ah=md(function(a,b){return gd(a,256,N,N,N,b)}),bh=cd(Cb),ch=cd(function(a,b){return a>=b}),dh=Ib(function(){return arguments}())?Ib:function(a){return qe(a)&&ef.call(a,"callee")&&!sf.call(a,"callee")},eh=Te.isArray,fh=Ta?A(Ta):Jb,gh=Ef||Se,hh=Ua?A(Ua):Kb,ih=Va?A(Va):Mb,jh=Wa?A(Wa):Pb,kh=Xa?A(Xa):Qb,lh=Ya?A(Ya):Rb,mh=cd(Ub),nh=cd(function(a,b){return a<=b}),oh=Nc(function(a,b){if(Ed(b)||je(b))Jc(b,Ee(b),a);else for(var c in b)ef.call(b,c)&&fb(a,c,b[c])}),ph=Nc(function(a,b){Jc(b,Fe(b),a)}),qh=Nc(function(a,b,c,d){Jc(b,Fe(b),a,d)}),rh=Nc(function(a,b,c,d){Jc(b,Ee(b),a,d)}),sh=md(lb),th=gc(function(a,b){a=Ye(a);var c=-1,d=b.length,e=2<d?b[2]:N;for(e&&Bd(b[0],b[1],e)&&(d=1);++c<d;)for(var e=b[c],f=Fe(e),g=-1,h=f.length;++g<h;){var i=f[g],j=a[i];(j===N||ie(j,bf[i])&&!ef.call(a,i))&&(a[i]=e[i])}return a}),uh=gc(function(b){return b.push(N,id),a(zh,N,b)}),vh=Yc(function(a,b,c){null!=b&&"function"!=typeof b.toString&&(b=hf.call(b)),a[b]=c},Le(Me)),wh=Yc(function(a,b,c){null!=b&&"function"!=typeof b.toString&&(b=hf.call(b)),ef.call(a,b)?a[b].push(c):a[b]=[c]},rd),xh=gc(Hb),yh=Nc(function(a,b,c){Yb(a,b,c)}),zh=Nc(function(a,b,c,d){Yb(a,b,c,d)}),Ah=md(function(a,b){var c={};if(null==a)return c;var d=!1;b=i(b,function(b){return b=Ac(b,a),d||(d=1<b.length),b}),Jc(a,od(a),c),d&&(c=nb(c,7,jd));for(var e=b.length;e--;)tc(c,b[e]);return c}),Bh=md(function(a,b){return null==a?{}:_b(a,b)}),Ch=fd(Ee),Dh=fd(Fe),Eh=Sc(function(a,b,c){return b=b.toLowerCase(),a+(c?Ie(b):b)}),Fh=Sc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Gh=Sc(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Hh=Rc("toLowerCase"),Ih=Sc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Jh=Sc(function(a,b,c){return a+(c?" ":"")+Lh(b)}),Kh=Sc(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Lh=Rc("toUpperCase"),Mh=gc(function(a,b){try{return c(a,N,b)}catch(c){return le(c)?c:new Ve(c)}}),Nh=md(function(a,b){return c(b,function(b){b=Kd(b),kb(a,b,Vg(a[b],a))}),a}),Oh=Wc(),Ph=Wc(!0),Qh=gc(function(a,b){return function(c){return Hb(c,a,b)}}),Rh=gc(function(a,b){return function(c){return Hb(a,c,b)}}),Sh=$c(i),Th=$c(e),Uh=$c(m),Vh=bd(),Wh=bd(!0),Xh=Zc(function(a,b){return a+b},0),Yh=ed("ceil"),Zh=Zc(function(a,b){return a/b},1),$h=ed("floor"),_h=Zc(function(a,b){return a*b},1),ai=ed("round"),bi=Zc(function(a,b){return a-b},0);return wa.after=function(a,b){if("function"!=typeof b)throw new _e("Expected a function");return a=xe(a),function(){if(1>--a)return b.apply(this,arguments)}},wa.ary=be,wa.assign=oh,wa.assignIn=ph,wa.assignInWith=qh,wa.assignWith=rh,wa.at=sh,wa.before=ce,wa.bind=Vg,wa.bindAll=Nh,wa.bindKey=Wg,wa.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return eh(a)?a:[a]},wa.chain=Xd,wa.chunk=function(a,b,c){if(b=(c?Bd(a,b,c):b===N)?1:If(xe(b),0),c=null==a?0:a.length,!c||1>b)return[];for(var d=0,e=0,f=Te(Bf(c/b));d<c;)f[e++]=lc(a,d,d+=b);return f},wa.compact=function(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e},wa.concat=function(){var a=arguments.length;if(!a)return[];for(var b=Te(a-1),c=arguments[0];a--;)b[a-1]=arguments[a];return j(eh(c)?Ic(c):[c],vb(b,1))},wa.cond=function(b){var c=null==b?0:b.length,d=rd();return b=c?i(b,function(a){if("function"!=typeof a[1])throw new _e("Expected a function");return[d(a[0]),a[1]]}):[],gc(function(d){for(var e=-1;++e<c;){var f=b[e];if(a(f[0],this,d))return a(f[1],this,d)}})},wa.conforms=function(a){return ob(nb(a,1))},wa.constant=Le,wa.countBy=Mg,wa.create=function(a,b){var c=cg(a);return null==b?c:ib(c,b)},wa.curry=de,wa.curryRight=ee,wa.debounce=fe,wa.defaults=th,wa.defaultsDeep=uh,wa.defer=Xg,wa.delay=Yg,wa.difference=ug,wa.differenceBy=vg,wa.differenceWith=wg,wa.drop=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===N?1:xe(b),lc(a,0>b?0:b,d)):[]},wa.dropRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===N?1:xe(b),b=d-b,lc(a,0,0>b?0:b)):[]},wa.dropRightWhile=function(a,b){return a&&a.length?uc(a,rd(b,3),!0,!0):[]},wa.dropWhile=function(a,b){return a&&a.length?uc(a,rd(b,3),!0):[]},wa.fill=function(a,b,c,d){var e=null==a?0:a.length;if(!e)return[];for(c&&"number"!=typeof c&&Bd(a,b,c)&&(c=0,d=e),e=a.length,c=xe(c),0>c&&(c=-c>e?0:e+c),d=d===N||d>e?e:xe(d),0>d&&(d+=e),d=c>d?0:ye(d);c<d;)a[c++]=b;return a},wa.filter=function(a,b){return(eh(a)?f:ub)(a,rd(b,3));
},wa.flatMap=function(a,b){return vb(ae(a,b),1)},wa.flatMapDeep=function(a,b){return vb(ae(a,b),O)},wa.flatMapDepth=function(a,b,c){return c=c===N?1:xe(c),vb(ae(a,b),c)},wa.flatten=Qd,wa.flattenDeep=function(a){return(null==a?0:a.length)?vb(a,O):[]},wa.flattenDepth=function(a,b){return null!=a&&a.length?(b=b===N?1:xe(b),vb(a,b)):[]},wa.flip=function(a){return gd(a,512)},wa.flow=Oh,wa.flowRight=Ph,wa.fromPairs=function(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d},wa.functions=function(a){return null==a?[]:yb(a,Ee(a))},wa.functionsIn=function(a){return null==a?[]:yb(a,Fe(a))},wa.groupBy=Pg,wa.initial=function(a){return(null==a?0:a.length)?lc(a,0,-1):[]},wa.intersection=xg,wa.intersectionBy=yg,wa.intersectionWith=zg,wa.invert=vh,wa.invertBy=wh,wa.invokeMap=Qg,wa.iteratee=Ne,wa.keyBy=Rg,wa.keys=Ee,wa.keysIn=Fe,wa.map=ae,wa.mapKeys=function(a,b){var c={};return b=rd(b,3),wb(a,function(a,d,e){kb(c,b(a,d,e),a)}),c},wa.mapValues=function(a,b){var c={};return b=rd(b,3),wb(a,function(a,d,e){kb(c,d,b(a,d,e))}),c},wa.matches=function(a){return Wb(nb(a,1))},wa.matchesProperty=function(a,b){return Xb(a,nb(b,1))},wa.memoize=ge,wa.merge=yh,wa.mergeWith=zh,wa.method=Qh,wa.methodOf=Rh,wa.mixin=Oe,wa.negate=he,wa.nthArg=function(a){return a=xe(a),gc(function(b){return Zb(b,a)})},wa.omit=Ah,wa.omitBy=function(a,b){return Ge(a,he(rd(b)))},wa.once=function(a){return ce(2,a)},wa.orderBy=function(a,b,c,d){return null==a?[]:(eh(b)||(b=null==b?[]:[b]),c=d?N:c,eh(c)||(c=null==c?[]:[c]),$b(a,b,c))},wa.over=Sh,wa.overArgs=Zg,wa.overEvery=Th,wa.overSome=Uh,wa.partial=$g,wa.partialRight=_g,wa.partition=Sg,wa.pick=Bh,wa.pickBy=Ge,wa.property=Qe,wa.propertyOf=function(a){return function(b){return null==a?N:zb(a,b)}},wa.pull=Ag,wa.pullAll=Td,wa.pullAllBy=function(a,b,c){return a&&a.length&&b&&b.length?cc(a,b,rd(c,2)):a},wa.pullAllWith=function(a,b,c){return a&&a.length&&b&&b.length?cc(a,b,N,c):a},wa.pullAt=Bg,wa.range=Vh,wa.rangeRight=Wh,wa.rearg=ah,wa.reject=function(a,b){return(eh(a)?f:ub)(a,he(rd(b,3)))},wa.remove=function(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=rd(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return dc(a,e),c},wa.rest=function(a,b){if("function"!=typeof a)throw new _e("Expected a function");return b=b===N?b:xe(b),gc(a,b)},wa.reverse=Ud,wa.sampleSize=function(a,b,c){return b=(c?Bd(a,b,c):b===N)?1:xe(b),(eh(a)?Za:ic)(a,b)},wa.set=function(a,b,c){return null==a?a:jc(a,b,c)},wa.setWith=function(a,b,c,d){return d="function"==typeof d?d:N,null==a?a:jc(a,b,c,d)},wa.shuffle=function(a){return(eh(a)?db:kc)(a)},wa.slice=function(a,b,c){var d=null==a?0:a.length;return d?(c&&"number"!=typeof c&&Bd(a,b,c)?(b=0,c=d):(b=null==b?0:xe(b),c=c===N?d:xe(c)),lc(a,b,c)):[]},wa.sortBy=Tg,wa.sortedUniq=function(a){return a&&a.length?pc(a):[]},wa.sortedUniqBy=function(a,b){return a&&a.length?pc(a,rd(b,2)):[]},wa.split=function(a,b,c){return c&&"number"!=typeof c&&Bd(a,b,c)&&(b=c=N),c=c===N?4294967295:c>>>0,c?(a=Be(a))&&("string"==typeof b||null!=b&&!jh(b))&&(b=rc(b),!b&&Da.test(a))?Bc(M(a),0,c):a.split(b,c):[]},wa.spread=function(b,c){if("function"!=typeof b)throw new _e("Expected a function");return c=null==c?0:If(xe(c),0),gc(function(d){var e=d[c];return d=Bc(d,0,c),e&&j(d,e),a(b,this,d)})},wa.tail=function(a){var b=null==a?0:a.length;return b?lc(a,1,b):[]},wa.take=function(a,b,c){return a&&a.length?(b=c||b===N?1:xe(b),lc(a,0,0>b?0:b)):[]},wa.takeRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===N?1:xe(b),b=d-b,lc(a,0>b?0:b,d)):[]},wa.takeRightWhile=function(a,b){return a&&a.length?uc(a,rd(b,3),!1,!0):[]},wa.takeWhile=function(a,b){return a&&a.length?uc(a,rd(b,3)):[]},wa.tap=function(a,b){return b(a),a},wa.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new _e("Expected a function");return pe(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),fe(a,b,{leading:d,maxWait:b,trailing:e})},wa.thru=Yd,wa.toArray=ve,wa.toPairs=Ch,wa.toPairsIn=Dh,wa.toPath=function(a){return eh(a)?i(a,Kd):ue(a)?[a]:Ic(tg(Be(a)))},wa.toPlainObject=Ae,wa.transform=function(a,b,d){var e=eh(a),f=e||gh(a)||lh(a);if(b=rd(b,4),null==d){var g=a&&a.constructor;d=f?e?new g:[]:pe(a)&&me(g)?cg(qf(a)):{}}return(f?c:wb)(a,function(a,c,e){return b(d,a,c,e)}),d},wa.unary=function(a){return be(a,1)},wa.union=Cg,wa.unionBy=Dg,wa.unionWith=Eg,wa.uniq=function(a){return a&&a.length?sc(a):[]},wa.uniqBy=function(a,b){return a&&a.length?sc(a,rd(b,2)):[]},wa.uniqWith=function(a,b){return b="function"==typeof b?b:N,a&&a.length?sc(a,N,b):[]},wa.unset=function(a,b){return null==a||tc(a,b)},wa.unzip=Vd,wa.unzipWith=Wd,wa.update=function(a,b,c){return null==a?a:jc(a,b,zc(c)(zb(a,b)),void 0)},wa.updateWith=function(a,b,c,d){return d="function"==typeof d?d:N,null!=a&&(a=jc(a,b,zc(c)(zb(a,b)),d)),a},wa.values=He,wa.valuesIn=function(a){return null==a?[]:B(a,Fe(a))},wa.without=Fg,wa.words=Ke,wa.wrap=function(a,b){return $g(zc(b),a)},wa.xor=Gg,wa.xorBy=Hg,wa.xorWith=Ig,wa.zip=Jg,wa.zipObject=function(a,b){return xc(a||[],b||[],fb)},wa.zipObjectDeep=function(a,b){return xc(a||[],b||[],jc)},wa.zipWith=Kg,wa.entries=Ch,wa.entriesIn=Dh,wa.extend=ph,wa.extendWith=qh,Oe(wa,wa),wa.add=Xh,wa.attempt=Mh,wa.camelCase=Eh,wa.capitalize=Ie,wa.ceil=Yh,wa.clamp=function(a,b,c){return c===N&&(c=b,b=N),c!==N&&(c=ze(c),c=c===c?c:0),b!==N&&(b=ze(b),b=b===b?b:0),mb(ze(a),b,c)},wa.clone=function(a){return nb(a,4)},wa.cloneDeep=function(a){return nb(a,5)},wa.cloneDeepWith=function(a,b){return b="function"==typeof b?b:N,nb(a,5,b)},wa.cloneWith=function(a,b){return b="function"==typeof b?b:N,nb(a,4,b)},wa.conformsTo=function(a,b){return null==b||pb(a,b,Ee(b))},wa.deburr=Je,wa.defaultTo=function(a,b){return null==a||a!==a?b:a},wa.divide=Zh,wa.endsWith=function(a,b,c){a=Be(a),b=rc(b);var d=a.length,d=c=c===N?d:mb(xe(c),0,d);return c-=b.length,0<=c&&a.slice(c,d)==b},wa.eq=ie,wa.escape=function(a){return(a=Be(a))&&X.test(a)?a.replace(V,_a):a},wa.escapeRegExp=function(a){return(a=Be(a))&&da.test(a)?a.replace(ca,"\\$&"):a},wa.every=function(a,b,c){var d=eh(a)?e:sb;return c&&Bd(a,b,c)&&(b=N),d(a,rd(b,3))},wa.find=Ng,wa.findIndex=Od,wa.findKey=function(a,b){return n(a,rd(b,3),wb)},wa.findLast=Og,wa.findLastIndex=Pd,wa.findLastKey=function(a,b){return n(a,rd(b,3),xb)},wa.floor=$h,wa.forEach=$d,wa.forEachRight=_d,wa.forIn=function(a,b){return null==a?a:fg(a,rd(b,3),Fe)},wa.forInRight=function(a,b){return null==a?a:gg(a,rd(b,3),Fe)},wa.forOwn=function(a,b){return a&&wb(a,rd(b,3))},wa.forOwnRight=function(a,b){return a&&xb(a,rd(b,3))},wa.get=Ce,wa.gt=bh,wa.gte=ch,wa.has=function(a,b){return null!=a&&vd(a,b,Db)},wa.hasIn=De,wa.head=Rd,wa.identity=Me,wa.includes=function(a,b,c,d){return a=je(a)?a:He(a),c=c&&!d?xe(c):0,d=a.length,0>c&&(c=If(d+c,0)),te(a)?c<=d&&-1<a.indexOf(b,c):!!d&&-1<p(a,b,c)},wa.indexOf=function(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:xe(c),0>c&&(c=If(d+c,0)),p(a,b,c)):-1},wa.inRange=function(a,b,c){return b=we(b),c===N?(c=b,b=0):c=we(c),a=ze(a),a>=Jf(b,c)&&a<If(b,c)},wa.invoke=xh,wa.isArguments=dh,wa.isArray=eh,wa.isArrayBuffer=fh,wa.isArrayLike=je,wa.isArrayLikeObject=ke,wa.isBoolean=function(a){return!0===a||!1===a||qe(a)&&"[object Boolean]"==Bb(a)},wa.isBuffer=gh,wa.isDate=hh,wa.isElement=function(a){return qe(a)&&1===a.nodeType&&!se(a)},wa.isEmpty=function(a){if(null==a)return!0;if(je(a)&&(eh(a)||"string"==typeof a||"function"==typeof a.splice||gh(a)||lh(a)||dh(a)))return!a.length;var b=og(a);if("[object Map]"==b||"[object Set]"==b)return!a.size;if(Ed(a))return!Tb(a).length;for(var c in a)if(ef.call(a,c))return!1;return!0},wa.isEqual=function(a,b){return Lb(a,b)},wa.isEqualWith=function(a,b,c){var d=(c="function"==typeof c?c:N)?c(a,b):N;return d===N?Lb(a,b,N,c):!!d},wa.isError=le,wa.isFinite=function(a){return"number"==typeof a&&Ff(a)},wa.isFunction=me,wa.isInteger=ne,wa.isLength=oe,wa.isMap=ih,wa.isMatch=function(a,b){return a===b||Nb(a,b,td(b))},wa.isMatchWith=function(a,b,c){return c="function"==typeof c?c:N,Nb(a,b,td(b),c)},wa.isNaN=function(a){return re(a)&&a!=+a},wa.isNative=function(a){if(pg(a))throw new Ve("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ob(a)},wa.isNil=function(a){return null==a},wa.isNull=function(a){return null===a},wa.isNumber=re,wa.isObject=pe,wa.isObjectLike=qe,wa.isPlainObject=se,wa.isRegExp=jh,wa.isSafeInteger=function(a){return ne(a)&&-9007199254740991<=a&&9007199254740991>=a},wa.isSet=kh,wa.isString=te,wa.isSymbol=ue,wa.isTypedArray=lh,wa.isUndefined=function(a){return a===N},wa.isWeakMap=function(a){return qe(a)&&"[object WeakMap]"==og(a)},wa.isWeakSet=function(a){return qe(a)&&"[object WeakSet]"==Bb(a)},wa.join=function(a,b){return null==a?"":Gf.call(a,b)},wa.kebabCase=Fh,wa.last=Sd,wa.lastIndexOf=function(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;if(c!==N&&(e=xe(c),e=0>e?If(d+e,0):Jf(e,d-1)),b===b){for(c=e+1;c--&&a[c]!==b;);a=c}else a=o(a,r,e,!0);return a},wa.lowerCase=Gh,wa.lowerFirst=Hh,wa.lt=mh,wa.lte=nh,wa.max=function(a){return a&&a.length?tb(a,Me,Cb):N},wa.maxBy=function(a,b){return a&&a.length?tb(a,rd(b,2),Cb):N},wa.mean=function(a){return s(a,Me)},wa.meanBy=function(a,b){return s(a,rd(b,2))},wa.min=function(a){return a&&a.length?tb(a,Me,Ub):N},wa.minBy=function(a,b){return a&&a.length?tb(a,rd(b,2),Ub):N},wa.stubArray=Re,wa.stubFalse=Se,wa.stubObject=function(){return{}},wa.stubString=function(){return""},wa.stubTrue=function(){return!0},wa.multiply=_h,wa.nth=function(a,b){return a&&a.length?Zb(a,xe(b)):N},wa.noConflict=function(){return Na._===this&&(Na._=kf),this},wa.noop=Pe,wa.now=Ug,wa.pad=function(a,b,c){a=Be(a);var d=(b=xe(b))?L(a):0;return!b||d>=b?a:(b=(b-d)/2,_c(Cf(b),c)+a+_c(Bf(b),c))},wa.padEnd=function(a,b,c){a=Be(a);var d=(b=xe(b))?L(a):0;return b&&d<b?a+_c(b-d,c):a},wa.padStart=function(a,b,c){a=Be(a);var d=(b=xe(b))?L(a):0;return b&&d<b?_c(b-d,c)+a:a},wa.parseInt=function(a,b,c){return c||null==b?b=0:b&&(b=+b),Lf(Be(a).replace(fa,""),b||0)},wa.random=function(a,b,c){if(c&&"boolean"!=typeof c&&Bd(a,b,c)&&(b=c=N),c===N&&("boolean"==typeof b?(c=b,b=N):"boolean"==typeof a&&(c=a,a=N)),a===N&&b===N?(a=0,b=1):(a=we(a),b===N?(b=a,a=0):b=we(b)),a>b){var d=a;a=b,b=d}return c||a%1||b%1?(c=Mf(),Jf(a+c*(b-a+Ja("1e-"+((c+"").length-1))),b)):ec(a,b)},wa.reduce=function(a,b,c){var d=eh(a)?k:v,e=3>arguments.length;return d(a,rd(b,4),c,e,dg)},wa.reduceRight=function(a,b,c){var d=eh(a)?l:v,e=3>arguments.length;return d(a,rd(b,4),c,e,eg)},wa.repeat=function(a,b,c){return b=(c?Bd(a,b,c):b===N)?1:xe(b),fc(Be(a),b)},wa.replace=function(){var a=arguments,b=Be(a[0]);return 3>a.length?b:b.replace(a[1],a[2])},wa.result=function(a,b,c){b=Ac(b,a);var d=-1,e=b.length;for(e||(e=1,a=N);++d<e;){var f=null==a?N:a[Kd(b[d])];f===N&&(d=e,f=c),a=me(f)?f.call(a):f}return a},wa.round=ai,wa.runInContext=cb,wa.sample=function(a){return(eh(a)?Sa:hc)(a)},wa.size=function(a){if(null==a)return 0;if(je(a))return te(a)?L(a):a.length;var b=og(a);return"[object Map]"==b||"[object Set]"==b?a.size:Tb(a).length},wa.snakeCase=Ih,wa.some=function(a,b,c){var d=eh(a)?m:mc;return c&&Bd(a,b,c)&&(b=N),d(a,rd(b,3))},wa.sortedIndex=function(a,b){return nc(a,b)},wa.sortedIndexBy=function(a,b,c){return oc(a,b,rd(c,2))},wa.sortedIndexOf=function(a,b){var c=null==a?0:a.length;if(c){var d=nc(a,b);if(d<c&&ie(a[d],b))return d}return-1},wa.sortedLastIndex=function(a,b){return nc(a,b,!0)},wa.sortedLastIndexBy=function(a,b,c){return oc(a,b,rd(c,2),!0)},wa.sortedLastIndexOf=function(a,b){if(null==a?0:a.length){var c=nc(a,b,!0)-1;if(ie(a[c],b))return c}return-1},wa.startCase=Jh,wa.startsWith=function(a,b,c){return a=Be(a),c=null==c?0:mb(xe(c),0,a.length),b=rc(b),a.slice(c,c+b.length)==b},wa.subtract=bi,wa.sum=function(a){return a&&a.length?x(a,Me):0},wa.sumBy=function(a,b){return a&&a.length?x(a,rd(b,2)):0},wa.template=function(a,b,c){var d=wa.templateSettings;c&&Bd(a,b,c)&&(b=N),a=Be(a),b=qh({},b,d,hd),c=qh({},b.imports,d.imports,hd);var e,f,g=Ee(c),h=B(c,g),i=0;c=b.interpolate||ua;var j="__p+='";c=Ze((b.escape||ua).source+"|"+c.source+"|"+(c===$?ma:ua).source+"|"+(b.evaluate||ua).source+"|$","g");var k="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,c,d,g,h,k){return d||(d=g),j+=a.slice(i,k).replace(va,F),c&&(e=!0,j+="'+__e("+c+")+'"),h&&(f=!0,j+="';"+h+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),i=k+b.length,b}),j+="';",(b=b.variable)||(j="with(obj){"+j+"}"),j=(f?j.replace(R,""):j).replace(S,"$1").replace(T,"$1;"),j="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(e?",__e=_.escape":"")+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}",b=Mh(function(){return We(g,k+"return "+j).apply(N,h)}),b.source=j,le(b))throw b;return b},wa.times=function(a,b){if(a=xe(a),1>a||9007199254740991<a)return[];var c=4294967295,d=Jf(a,4294967295);for(b=rd(b),a-=4294967295,d=y(d,b);++c<a;)b(c);return d},wa.toFinite=we,wa.toInteger=xe,wa.toLength=ye,wa.toLower=function(a){return Be(a).toLowerCase()},wa.toNumber=ze,wa.toSafeInteger=function(a){return a?mb(xe(a),-9007199254740991,9007199254740991):0===a?a:0},wa.toString=Be,wa.toUpper=function(a){return Be(a).toUpperCase()},wa.trim=function(a,b,c){return(a=Be(a))&&(c||b===N)?a.replace(ea,""):a&&(b=rc(b))?(a=M(a),c=M(b),b=D(a,c),c=E(a,c)+1,Bc(a,b,c).join("")):a},wa.trimEnd=function(a,b,c){return(a=Be(a))&&(c||b===N)?a.replace(ga,""):a&&(b=rc(b))?(a=M(a),b=E(a,M(b))+1,Bc(a,0,b).join("")):a},wa.trimStart=function(a,b,c){return(a=Be(a))&&(c||b===N)?a.replace(fa,""):a&&(b=rc(b))?(a=M(a),b=D(a,M(b)),Bc(a,b).join("")):a},wa.truncate=function(a,b){var c=30,d="...";if(pe(b))var e="separator"in b?b.separator:e,c="length"in b?xe(b.length):c,d="omission"in b?rc(b.omission):d;a=Be(a);var f=a.length;if(Da.test(a))var g=M(a),f=g.length;if(c>=f)return a;if(f=c-L(d),1>f)return d;if(c=g?Bc(g,0,f).join(""):a.slice(0,f),e===N)return c+d;if(g&&(f+=c.length-f),jh(e)){if(a.slice(f).search(e)){var h=c;for(e.global||(e=Ze(e.source,Be(na.exec(e))+"g")),e.lastIndex=0;g=e.exec(h);)var i=g.index;c=c.slice(0,i===N?f:i)}}else a.indexOf(rc(e),f)!=f&&(e=c.lastIndexOf(e),-1<e&&(c=c.slice(0,e)));return c+d},wa.unescape=function(a){return(a=Be(a))&&W.test(a)?a.replace(U,ab):a},wa.uniqueId=function(a){var b=++ff;return Be(a)+b},wa.upperCase=Kh,wa.upperFirst=Lh,wa.each=$d,wa.eachRight=_d,wa.first=Rd,Oe(wa,function(){var a={};return wb(wa,function(b,c){ef.call(wa.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),wa.VERSION="4.17.10",c("bind bindKey curry curryRight partial partialRight".split(" "),function(a){wa[a].placeholder=wa}),c(["drop","take"],function(a,b){Ba.prototype[a]=function(c){c=c===N?1:If(xe(c),0);var d=this.__filtered__&&!b?new Ba(this):this.clone();return d.__filtered__?d.__takeCount__=Jf(c,d.__takeCount__):d.__views__.push({size:Jf(c,4294967295),type:a+(0>d.__dir__?"Right":"")}),d},Ba.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),c(["filter","map","takeWhile"],function(a,b){var c=b+1,d=1==c||3==c;Ba.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:rd(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),c(["head","last"],function(a,b){var c="take"+(b?"Right":"");Ba.prototype[a]=function(){return this[c](1).value()[0]}}),c(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Ba.prototype[a]=function(){return this.__filtered__?new Ba(this):this[c](1)}}),Ba.prototype.compact=function(){return this.filter(Me)},Ba.prototype.find=function(a){return this.filter(a).head()},Ba.prototype.findLast=function(a){return this.reverse().find(a)},Ba.prototype.invokeMap=gc(function(a,b){return"function"==typeof a?new Ba(this):this.map(function(c){return Hb(c,a,b)})}),Ba.prototype.reject=function(a){return this.filter(he(rd(a)))},Ba.prototype.slice=function(a,b){a=xe(a);var c=this;return c.__filtered__&&(0<a||0>b)?new Ba(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==N&&(b=xe(b),c=0>b?c.dropRight(-b):c.take(b-a)),c)},Ba.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ba.prototype.toArray=function(){return this.take(4294967295)},wb(Ba.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=wa[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(wa.prototype[b]=function(){function b(a){return a=e.apply(wa,j([a],h)),d&&m?a[0]:a}var g=this.__wrapped__,h=d?[1]:arguments,i=g instanceof Ba,k=h[0],l=i||eh(g);l&&c&&"function"==typeof k&&1!=k.length&&(i=l=!1);var m=this.__chain__,n=!!this.__actions__.length,k=f&&!m,i=i&&!n;return!f&&l?(g=i?g:new Ba(this),g=a.apply(g,h),g.__actions__.push({func:Yd,args:[b],thisArg:N}),new ya(g,m)):k&&i?a.apply(this,h):(g=this.thru(b),k?d?g.value()[0]:g.value():g)})}),c("pop push shift sort splice unshift".split(" "),function(a){var b=af[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);wa.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(eh(e)?e:[],a)}return this[c](function(c){return b.apply(eh(c)?c:[],a)})}}),wb(Ba.prototype,function(a,b){var c=wa[b];if(c){var d=c.name+"";(Vf[d]||(Vf[d]=[])).push({name:b,func:c})}}),Vf[Xc(N,2).name]=[{name:"wrapper",func:N}],Ba.prototype.clone=function(){var a=new Ba(this.__wrapped__);return a.__actions__=Ic(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Ic(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Ic(this.__views__),a},Ba.prototype.reverse=function(){if(this.__filtered__){var a=new Ba(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},Ba.prototype.value=function(){var a,b=this.__wrapped__.value(),c=this.__dir__,d=eh(b),e=0>c,f=d?b.length:0;a=f;for(var g=this.__views__,h=0,i=-1,j=g.length;++i<j;){var k=g[i],l=k.size;switch(k.type){case"drop":h+=l;break;case"dropRight":a-=l;break;case"take":a=Jf(a,h+l);break;case"takeRight":h=If(h,a-l)}}if(a={start:h,end:a},g=a.start,h=a.end,a=h-g,g=e?h:g-1,h=this.__iteratees__,i=h.length,j=0,k=Jf(a,this.__takeCount__),!d||!e&&f==a&&k==a)return vc(b,this.__actions__);d=[];a:for(;a--&&j<k;){for(g+=c,e=-1,f=b[g];++e<i;){var m=h[e],l=m.type,m=(0,m.iteratee)(f);if(2==l)f=m;else if(!m){if(1==l)continue a;break a}}d[j++]=f}return d},wa.prototype.at=Lg,wa.prototype.chain=function(){return Xd(this)},wa.prototype.commit=function(){return new ya(this.value(),this.__chain__)},wa.prototype.next=function(){this.__values__===N&&(this.__values__=ve(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?N:this.__values__[this.__index__++]}},wa.prototype.plant=function(a){for(var b,c=this;c instanceof xa;){var d=Nd(c);d.__index__=0,d.__values__=N,b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}return e.__wrapped__=a,b},wa.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof Ba?(this.__actions__.length&&(a=new Ba(this)),a=a.reverse(),a.__actions__.push({func:Yd,args:[Ud],thisArg:N}),new ya(a,this.__chain__)):this.thru(Ud)},wa.prototype.toJSON=wa.prototype.valueOf=wa.prototype.value=function(){return vc(this.__wrapped__,this.__actions__)},wa.prototype.first=wa.prototype.head,vf&&(wa.prototype[vf]=Zd),wa}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Na._=bb,define(function(){return bb})):Pa?((Pa.exports=bb)._=bb,Oa._=bb):Na._=bb}.call(this),function(){"use strict";for(var a=["lightning-services","lightning-locations","ngAnimate","ngSanitize","ngCookies","ngStorage","relativeDate"],b=["highcharts-ng","uiGmapgoogle-maps","rzModule","esri.map","angular-websocket"],c=0;c<b.length;c++)try{angular.module(b[c]),a.push(b[c])}catch(d){}var e=angular.module("lightning",a);e.config(["$logProvider",function(a){a.debugEnabled(!1)}]),a.indexOf("uiGmapgoogle-maps")!=-1&&e.config(["uiGmapGoogleMapApiProvider",function(a){var b,c=angular.element(document.getElementById("constant-googleMapApi"));c.length>0?(c=c[0],null!=c.attributes["data-value"]&&(b=c.attributes["data-value"].value)):(c=document.getElementsByTagName("helper:constant"),angular.forEach(c,function(a){null!=a.attributes.name&&"googleMapApi"==a.attributes.name.value&&(b=a.attributes.value.value)})),null!=b?a.configure({key:b,libraries:"visualization,drawing"}):a.configure({libraries:"visualization,drawing"})}]),e.config(["$provide",function(a){var b=document.getElementsByTagName("helper:constant");angular.forEach(b,function(b){null!=b.attributes&&null!=b.attributes.name&&null!=b.attributes.value&&a.constant(b.attributes.name.value,b.attributes.value.value)})}]),e.config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor")}]),e.config(["$qProvider",function(a){a.errorOnUnhandledRejections(!1)}]),e.config(["$locationProvider",function(a){a.hashPrefix("")}]),e.run(["$rootScope","$location","ResponseService","PlatformService","QueryIdService","QueryService","$twigkit","$window",function(a,b,c,d,e,f,g,h){var i,j=!0,k=0;a.$on("reloadSearch",function(){k++}),a.$on("$locationChangeSuccess",function(){if(""!=b.path()){if(i===b.path())return void(1==a.preventReloadSearch?(k=0,a.preventReloadSearch=!1):0==k?(a.$broadcast("reloadSearch"),k=0):k=0);1!=j&&(k=0,c.clearResponses(),d.clearPlatforms(),e.clearQueries(),f.clearQueries()),i=b.path(),j=!1}}),a.$on("httpInterceptorError",function(c,d){var e=g.getContextPath("/"),f=g.getConstant("loginPage","login");"403"==d.status&&d.config.url.indexOf("twigkit/api")!=-1&&(a.$broadcast("twigkitApi403",{error:d,url:b.url()}),h.location.href=e+f)})}])}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{},controller:["$scope","$lightningUrl",function(a){a.model={filters:[],textInstances:[]};var b=this;b.getFilters=function(){return a.model.filters},b.getAdvancedTextInstances=function(){return a.model.textInstances}}],template:function(){return'<div class="tk-advanced-search" ng-submit="search()" ng-transclude></div>'}};return a}angular.module("lightning").directive("searchAdvanced",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!1,template:function(a,b){var c=b.buttonLabel||"Search",d='<search:box button-only="true" button-label="'+c+'" ';return b.searchWithinCheckbox&&(d+='search-within-checkbox="'+b.searchWithinCheckbox+'" '),b.searchWithinLabel&&(d+='search-within-label="'+b.searchWithinLabel+'" '),b.searchWithinDefaultValue&&(d+='search-within-default-value="'+b.searchWithinDefaultValue+'" '),b.action&&(d+='action="'+b.action+'"'),d+="></search:box>"}};return a}angular.module("lightning").directive("advancedButton",a)}(),function(){"use strict";function a(a,b,c){var d={restrict:"E",require:"^^searchAdvanced",scope:{fields:"@"},link:function(d,e,f,g){if(d.fields){var h=function(){return Math.random().toString(36).substr(2,9)+Math.random().toString(36).substr(2,9)},i=f.dateFormat||"medium";d.filters=g.getFilters(),d.instances=[{id:h(),displayFrom:"",displayTo:"",field:null,modifier:"exact"}];var j=function(a){for(var b={},c=a.split(","),d=0;d<c.length;d++){var e=c[d].split("=");2===e.length?b[e[1]]=e[0]:b[e[0]]=e[0]}return b};d.fieldOptions=j(d.fields),d.setRange=function(a,c,e){a&&c&&(e.displayFrom=b("dateFormat")(a,i),e.displayTo=b("dateFormat")(c,i),e.actualFrom=b("dateFormat")(a,"yyyy-MM-ddTHH:mm:ss"),e.actualTo=b("dateFormat")(c,"yyyy-MM-ddTHH:mm:ss"),d.createFilter(e))},d.createFilter=function(b){if(b.field&&b.actualFrom&&b.actualTo){b.id&&k(b.id);var c="none"==b.modifier,e=a.createRangeFilter(b.field,b.actualFrom,b.actualTo,b.displayFrom,b.displayTo,null,null,null,null,c);if(e){var f=a.stringToFilter(e);f.id=b.id,d.filters.push(f)}}},d.addInstance=function(){d.instances.push({id:h(),val:"",field:null,modifier:"exact",actualFrom:"",actualTo:"",displayFrom:"",displayTo:""})},d.removeInstance=function(a){k(a.id),d.instances.pop()};var k=function(a){for(var b=0;b<d.filters.length;b++){var c=d.filters[b];c.id==a&&(d.filters.splice(b,1),b--)}};d.$on("reloadSearch",function(){c(function(){for(var c=d.instances.length-1;c>=0;c--){var e=b("filter")(d.filters,{id:d.instances[c].id})[0];null==e||a.urlContainsFilterFromObject(e)||d.removeInstance(d.instances[c])}0==d.instances.length&&d.addInstance()})})}},template:function(a,b){var c=b.hasOwnProperty("label")?b.label:"",d='<div class="tk-stl-control-group tk-advanced-search-input" ng-repeat="instance in instances track by instance.id">',e=!b.hasOwnProperty("multiple")||"false"!=b.multiple,f=b.minView||"";return d+='<div class="entry">',c.length>0&&(d+="<label>"+c+"</label>"),d+='<widget:date-range on-set="setRange(fromDate, toDate, instance)" min-view="'+f+'" ></widget:date-range>',d+="</div>",d+='<select class="field-select" ng-model="instance.field" ng-change="createFilter(instance)"><option value="">Select</option><option ng-repeat="(key, value) in fieldOptions track by $index" value="{{ value }}">{{ key }}</option></select>',d+='<select ng-model="instance.modifier" ng-change="createFilter(instance)"><option value="exact">Match</option><option value="none">Exclude</option></select>',e&&(d+='<span class="actions clickable">',d+='<span ng-if="instances.length > 1 && $last"><i class="icon-minus" ng-click="removeInstance(instance)"></i></span>',d+='<span ng-if="$last"><i class="icon-plus" ng-click="addInstance()"></i></span>',d+="</span>"),d+="</div>"}};return d}angular.module("lightning").directive("advancedDateRange",["$lightningUrl","$filter","$timeout",a])}(),function(){"use strict";function a(a,b){var c={restrict:"E",require:"^^searchAdvanced",scope:{fields:"@"},link:function(c,d,e,f){if(c.fields){c.textInstances=f.getAdvancedTextInstances(),c.textInstances.push({val:"",field:null,modifier:"exact"});var g=function(a){for(var b={},c=a.split(","),d=0;d<c.length;d++){var e=c[d].split("=");2===e.length?b[e[1]]=e[0]:b[e[0]]=e[0]}return b};c.fieldOptions=g(c.fields),c.addInstance=function(){c.textInstances.push({val:"",field:null,modifier:"exact"})},c.removeInstance=function(){c.textInstances.pop()},c.$on("reloadSearch",function(){a(function(){for(var a=c.textInstances.length-1;a>=0;a--){var d;switch(c.textInstances[a].modifier){case"all":d=c.textInstances[a].val.split(" ");for(var e=0;e<d.length;e++)if(!b.urlContainsFilter(c.textInstances[a].field,d[e],d[e])){c.textInstances.splice(a,1);break}break;case"none":d=c.textInstances[a].val.split(" ");for(var f=0;f<d.length;f++)if(!b.urlContainsFilter(c.textInstances[a].field,d[f],d[f],null,!0)){c.textInstances.splice(a,1);break}break;case"any":d=c.textInstances[a].val.split(" ");for(var g=0;g<d.length;g++)if(!b.urlContainsFilter(c.textInstances[a].field,d[g],d[g],"value")){c.textInstances.splice(a,1);break}break;default:b.urlContainsFilter(c.textInstances[a].field,c.textInstances[a].val,c.textInstances[a].val)||c.textInstances.splice(a,1)}}0==c.textInstances.length&&c.addInstance()},0)})}},template:function(a,b){var c=b.hasOwnProperty("label")?b.label:"",d=b.hasOwnProperty("placeholder")?b.placeholder:"Search terms",e=!b.hasOwnProperty("multiple")||"false"!=b.multiple,f='<div class="tk-stl-control-group tk-advanced-search-input tk-advanced-search-input-text" ng-repeat="instance in textInstances track by $index">';return f+='<div class="entry">',c.length>0&&(f+="<label>"+c+"</label>"),f+='<input type="text" placeholder="'+d+'" ng-model="instance.val" ng-change="updateFilterForInstance(instance)" style="display: inline-block;">',f+="</div>",f+='<select class="field-select" ng-model="instance.field" ng-change="updateFilterForInstance(instance)"><option value="">Select</option><option ng-repeat="(key, value) in fieldOptions track by $index" value="{{ value }}">{{ key }}</option></select>',f+='<select ng-model="instance.modifier" ng-change="updateFilterForInstance(instance)"><option value="exact">Exact match</option><option value="all">All words</option><option value="all">Any word</option><option value="none">None of the words</option></select>',e&&(f+='<span class="actions clickable">',f+='<span ng-if="textInstances.length > 1 && $last"><i class="icon-minus" ng-click="removeInstance()"></i></span>',f+='<span ng-if="$last"><i class="icon-plus" ng-click="addInstance()"></i></span>',f+="</span>"),f+="</div>"}};return c}angular.module("lightning").directive("advancedText",a),a.$inject=["$timeout","$lightningUrl"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,template:function(){return'<div class="tk-stl-interruptor"><div ng-transclude></div></div>'}};return a}angular.module("lightning").directive("blockInterruptor",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope","$localStorage","$attrs",function(a,b,c){a.savePreference=function(a,c,d){if(a&&"undefined"!=d){var e=b.tkClassToggles||{};e[a]={"class":c,on:d},b.tkClassToggles=e}},a.applyPreferences=function(){var a=b.tkClassToggles;if(a&&a[c.name]){var d=a[c.name];if(1==d.on){var e=angular.element(document.querySelector(c.target));e.addClass(c.toggleClass)}}}}],link:function(a,b,c,d,e){e(a,function(a){b.append(a)}),a.applyPreferences(),c.target&&c.toggleClass&&b.bind("click",function(){var b=angular.element(document.querySelector(c.target));b.hasClass(c.toggleClass)?(b.removeClass(c.toggleClass),a.savePreference(c.name,c.toggleClass,!1)):(b.addClass(c.toggleClass),a.savePreference(c.name,c.toggleClass,!0))})}};return a}angular.module("lightning").directive("searchClassToggle",a)}(),function(){"use strict";function a(a,b){return{restrict:"A",link:function(c,d,e){function f(a){if(!g(a,k))return null==a.parentElement?c.$apply(function(){return i(c)}):void f(a.parentElement)}function g(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1}var h=void 0!==e.outsideIfNot?e.outsideIfNot.replace(", ",",").split(","):[],i=b(e.clickOutside),j=Math.random().toString(36).substr(2,9),k="click-outside-"+j;angular.element(d).addClass(k),void 0!==e.id&&h.push(e.id);var l=function(a){if(0!==a.x&&0!==a.y&&!angular.element(d).hasClass("ng-hide")){var b,c=0;if(a&&a.target){for(b=a.target;b;b=b.parentNode){var e=b.id,g=b.className,i=h.length;for(g&&void 0!==g.baseVal&&(g=g.baseVal),c=0;c<i;c++)if(void 0!==e&&"function"==typeof e.indexOf&&e.indexOf(h[c])>-1||g&&"function"==typeof g.indexOf&&g.indexOf(h[c])>-1)return}f(a.target)}}};a.on("click",l),c.$on("$destroy",function(){a.off("click",l)})}}}angular.module("lightning").directive("clickOutside",["$document","$parse",a])}(),function(){"use strict";function a(a,b,c,d,e){var f={restrict:"E",transclude:!0,scope:{result:"=?"},link:{post:function(f,g,h){function i(){1==f.bookmarkVm.active?k():j()}function j(){var e={target:h.target,title:h.title,id:0};null==h.topic||isNaN(h.topic)?e.topic=0:e.topic=parseFloat(h.topic),null!=h.collection&&(e.collection=h.collection),null!=h.url?e.url=h.url:e.url=b.absUrl()+"/"+e.target,a.postBookmark(e).then(function(a){c.$broadcast("bookmark_added"),f.bookmarkVm.bookmark=a.data,f.bookmarkVm.active=!0,f.bookmarkVm.count=f.bookmarkVm.count+1},function(a){d.error(a)})}function k(){null==f.bookmarkVm.bookmark&&(f.bookmarkVm.bookmark={}),a.deleteBookmark(f.bookmarkVm.bookmark.id).then(function(){c.$broadcast("bookmark_removed"),f.bookmarkVm.bookmark=null,f.bookmarkVm.active=null,null!=f.bookmarkVm.count&&f.bookmarkVm.count>0?f.bookmarkVm.count=f.bookmarkVm.count-1:f.bookmarkVm.count=null},function(a){d.error(a)})}function l(){var a=!1;if(null!=f.result.facts&&null!=f.result.facts.bookmarks&&f.result.facts.bookmarks.length>0){if(!h.hasOwnProperty("topic")&&!h.hasOwnProperty("collection")&&1==f.result.facts.bookmarks[0].bookmarked_by_user)return f.bookmarkVm.bookmark.id=f.result.facts.bookmarks[0].id,f.result.facts.bookmarks[0].count;h.hasOwnProperty("collection")&&f.result.facts.bookmarks[0].collections[h.collection]&&1==f.result.facts.bookmarks[0].collections[h.collection].bookmarked_by_user&&(f.bookmarkVm.bookmark.id=f.result.facts.bookmarks[0].collections[h.collection].id,a=f.result.facts.bookmarks[0].collections[h.collection].count),h.hasOwnProperty("topic")&&f.result.facts.bookmarks[0].topics[h.topic]&&1==f.result.facts.bookmarks[0].topics[h.topic].bookmarked_by_user&&(f.bookmarkVm.bookmark.id=f.result.facts.bookmarks[0].topics[h.topic].id,
a=f.result.facts.bookmarks[0].topics[h.topic].count)}else null!=f.result.facts&&null==f.result.facts.bookmarks&&e.warn("COLLABORATE:BOOKMARK",'The bookmark is within a result but no fact was found, please add the following workflow processor to your platform - "twigkit.social.processor.AddBookmarkFactsProcessor"');return a}if(f.showCount=!0,f.bookmarkVm={bookmark:{}},f.result=f.result||f.$parent.result,f.bookmarkVm.tooltip=null!=h.tooltip?h.tooltip:"Bookmark this?",f.bookmarkVm.activeTooltip=null!=h.activeTooltip?h.activeTooltip:"You have bookmarked this",f.bookmarkVm.singularTooltip=null!=h.singularTooltip?h.singularTooltip:" person has bookmarked this.",f.bookmarkVm.pluralTooltip=null!=h.pluralTooltip?h.pluralTooltip:" people have bookmarked this.",null==f.bookmarkVm.rendered)if(g.bind("click",i),f.bookmarkVm.rendered=!0,null!=f.result){var m=l();m&&(f.bookmarkVm.active=!0),f.bookmarkVm.count=m||0}else{f.showCount=!1;var n={};null!=h.target&&(n.target=h.target),null!=h.topic&&(n.topic=h.topic),null!=h.collection&&(n.collection=h.collection),a.getBookmarks({},n).then(function(a){var b=a.data;b.length>0?(f.bookmarkVm.bookmark.id=a.data[0].id,f.bookmarkVm.active=!0,f.bookmarkVm.count=1):(f.bookmarkVm.active=!1,f.bookmarkVm.count=0)},function(){f.bookmarkVm.active=!1,f.bookmarkVm.count=0})}g.on("$destroy",function(){g.unbind("click",i)})}},template:function(a,b){var c='<div class="tk-bookmark" ng-class="{active: bookmarkVm.active}" no-tracking><ng-transclude><a href="javascript:void(0);"';return"false"!=b.enableTooltip&&(c+='tooltip="{{!bookmarkVm.active ? bookmarkVm.tooltip : bookmarkVm.activeTooltip}}" styling="tooltip-top-right"'),c+='><i ng-class="{\'icon-bookmark-empty\': !hover && !bookmarkVm.active, \'icon-bookmark\': hover || bookmarkVm.active}" ng-mouseenter="hover = true" ng-mouseleave="hover = false"></i></a>',c+='<span ng-show="showCount && bookmarkVm.count != 0 && bookmarkVm.count != null"',"false"!=b.enableTooltip&&(c+='tooltip="{{bookmarkVm.count == 1 ? bookmarkVm.count + bookmarkVm.singularTooltip : bookmarkVm.count + bookmarkVm.pluralTooltip}}" styling="tooltip-top-right"'),c+=">{{bookmarkVm.count}}</span>",c+="</ng-transclude></div>"}};return f}angular.module("lightning").directive("collaborateBookmark",a),a.$inject=["$twigkit","$location","$rootScope","$log","$lightningLog"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{user:"=",topic:"@",collection:"@",dateFormat:"@"},controller:["$scope","$twigkit","$attrs","$log","$rootScope","PlatformService",function(a,b,c,d,e,f){function g(){var e={};null!=c.target&&(e.target=c.target),null!=a.topic&&(e.topic=a.topic),null!=a.collection&&(e.collection=a.collection),b.getBookmarks(a.user,e).then(function(b){a.bookmarks=_.map(b.data,function(a){return a.url&&(a.url=a.url.replace(/&amp;/g,"&")),a})},function(a){d.error(a)})}var h=this;a.bookmarks=[],a.emptyText=void 0!=c.emptyText?c.emptyText:"You don't have any bookmarks yet",a.deleteLabel=null==c.deleteLabel?"&times;":c.deleteLabel,a.platform=f.getPlatform(c.platform),a.dateFormat=a.dateFormat||"dd/MM/yyyy h:mma",g(),h.getBookmarks=g,a.showMoreBookmarks=function(){a.limitTo+a.showMore>a.comments.length?a.limitTo=a.comments.length:a.limitTo+=a.showMore},a.showLessBookmarks=function(){a.limitTo-a.showMore<a.show?a.limitTo=a.show:a.limitTo=a.limitTo-a.showMore},a.deleteBookmark=function(a){b.deleteBookmark(a.id).then(function(){e.$broadcast("bookmark_removed")},function(a){console.log("Error"),console.log(a)})},a.$on("bookmark_added",function(){g()}),a.$on("bookmark_removed",function(){g()})}],template:function(a,b){var c="";return c+="<ng-transclude>",c+='<div class="tk-stl-bookmarks-list">',b.title&&(c+='<p class="title">'+b.title+"</p>"),c+="<ul>",c+='<li ng-repeat="bookmark in bookmarks track by bookmark.id" ng-if="topic != 0 || (topic == 0 && !bookmark.topic)">',c+='<div class="content">',c+='<p><a href="{{::bookmark.url}}" ',b.urlTarget&&(c+='target="'+b.urlTarget+'"'),c+=">{{ ::bookmark.title }}</a></p>",c+='<span class="metadata">{{ ::bookmark.created | date: dateFormat}}</span>',c+='<span class="delete" ng-click="deleteBookmark(bookmark)" ng-bind-html="deleteLabel"></span>',c+="</div>",c+="</li>",c+='<li class="empty-message" ng-show="bookmarks.length == 0 && emptyText.length > 0">',c+='<div class="content"><p class="empty">{{::emptyText}}</p></div>',c+="</li>",c+="</ul>",c+="</div>",c+="</ng-transclude>"}};return a}angular.module("lightning").directive("socialBookmarkList",a).directive("collaborateBookmarkList",a)}(),function(){"use strict";function a(a,b,c,d,e){var f={restrict:"E",transclude:!0,scope:{},link:{post:function(f,g,h){function i(){1==f.likeVm.active?k():j()}function j(){a.postLike(l,h.target,h.topic,h.collection).then(function(a){b.$broadcast("like_added"),f.likeVm.like=a.data,f.likeVm.active=!0,f.likeVm.count=(f.likeVm.count||0)+1},function(a){c.error(a)})}function k(){null==f.likeVm.like&&(f.likeVm.like={}),a.deleteLike(l,f.likeVm.like.id).then(function(){b.$broadcast("like_removed"),f.likeVm.like=null,f.likeVm.active=null,null!=f.likeVm.count&&f.likeVm.count>0?f.likeVm.count=f.likeVm.count-1:f.likeVm.count=null},function(a){c.error(a)})}f.showCount=!0,f.likeVm={},f.result=f.result||f.$parent.result,f.likeVm.tooltip=null!=h.tooltip?h.tooltip:"Do you like this?",f.likeVm.activeTooltip=null!=h.activeTooltip?h.activeTooltip:"You have liked this",f.likeVm.singularTooltip=null!=h.singularTooltip?h.singularTooltip:" person has liked this.",f.likeVm.pluralTooltip=null!=h.pluralTooltip?h.pluralTooltip:" people have liked this.";var l=d.getPlatform(h.platform);if(null==f.likeVm.rendered){if(g.bind("click",i),f.likeVm.rendered=!0,null==f.likeVm.like&&(f.likeVm.like={}),null!=f.result)null!=f.result.facts&&null!=f.result.facts.likes&&f.result.facts.likes.length>0?(h.hasOwnProperty("topic")||h.hasOwnProperty("collection")||1!=f.result.facts.likes[0].liked_by_user||(f.likeVm.active=!0,f.likeVm.like.id=f.result.facts.likes[0].id,f.likeVm.count=f.result.facts.likes[0].count),h.hasOwnProperty("collection")&&f.result.facts.likes[0].collections[h.collection]&&1==f.result.facts.likes[0].collections[h.collection].liked_by_user&&(f.likeVm.active=!0,f.likeVm.like.id=f.result.facts.likes[0].collections[h.collection].id,f.likeVm.count=f.result.facts.likes[0].collections[h.collection].count),h.hasOwnProperty("topic")&&f.result.facts.likes[0].topics[h.topic]&&1==f.result.facts.likes[0].topics[h.topic].liked_by_user&&(f.likeVm.active=!0,f.likeVm.like.id=f.result.facts.likes[0].topics[h.topic].id,f.likeVm.count=f.result.facts.likes[0].topics[h.topic].count)):null!=f.result.facts&&null==f.result.facts.likes&&e.warn("COLLABORATE:LIKE",'The like is within a result but no fact was found, please add the following workflow processor to your platform - "twigkit.social.processor.AddLikeFactsProcessor"');else{f.showCount=!1;var m={};null!=h.target&&(m.target=h.target),null!=h.topic&&(m.topic=h.topic),null!=h.collection&&(m.collection=h.collection),a.getLikes(m).then(function(a){var b=a.data;b.length>0?(f.likeVm.like.id=a.data[0].id,f.likeVm.active=!0,f.likeVm.count=1):(f.likeVm.active=!1,f.likeVm.count=0)},function(){f.likeVm.active=!1,f.likeVm.count=0})}g.on("$destroy",function(){g.unbind("click",i)})}}},template:function(a,b){var c='<div no-tracking><ng-transclude><a href="javascript:void(0);" ';return"false"!=b.enableTooltip&&(c+='tooltip="{{!likeVm.active ? likeVm.tooltip : likeVm.activeTooltip}}" styling="tooltip-top-right"'),c+="><i ng-class=\"{'icon-thumbs-up':!likeVm.active, 'icon-thumbs-up-alt':likeVm.active}\"></i></a><span ng-show=\"showCount && likeVm.count != 0 && likeVm.count != null\"","false"!=b.enableTooltip&&(c+='tooltip="{{likeVm.count == 1 ? likeVm.count + likeVm.singularTooltip : likeVm.count + likeVm.pluralTooltip}}" styling="tooltip-top-right"'),c+=">{{likeVm.count}}</span></ng-transclude></div>"}};return f}angular.module("lightning").directive("collaborateLike",a).directive("socialLike",a),a.$inject=["$twigkit","$rootScope","$log","PlatformService","$lightningLog"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{user:"=",dateFormat:"@"},controller:["$scope","$twigkit","$attrs","$log","PlatformService","$location","$rootScope",function(a,b,c,d,e,f,g){function h(){b.getSavedQueries(a.user).then(function(b){a.queries=b.data},function(a){d.error(a)})}a.queries=[],a.emptyText=c.emptyText||"You don't have any saved queries yet",a.allowSaving="false"!=c.allowSaving,a.platform=e.getPlatform(c.platform),a.dateFormat=a.dateFormat||"dd/MM/yyyy h:mma",a.saveName="",h(),a.saveQuery=function(c){if(a.showError=!1,!c.trim())return a.showError=!0,void(a.errorMessage="Please enter a name so this query can be saved.");var e={name:c,topic:0,query:f.absUrl(),"overwrite-existing":!1};b.saveQuery(e).then(function(b){"NAME_ALREADY_EXISTS"==b.data.status?(a.showError=!0,a.errorMessage="A saved query with that name already exists, please use a different name."):g.$broadcast("savedQueryAdded",e)},function(b){a.showError=!0,a.errorMessage="Unable to save query, please try again.",d.error(b)})},a.deleteQuery=function(a){b.deleteSavedQuery(a).then(function(){g.$broadcast("savedQueryDeleted")},function(a){d.error(a)})},a.closeError=function(b){b.preventDefault(),a.showError=!1},a.$on("savedQueryAdded",function(){h()}),a.$on("savedQueryDeleted",function(){h()})}],template:function(a,b){var c='<div class="tk-stl-saved-searches">';return b.title&&(c+='<p class="title">'+b.title+"</p>"),c+='<form ng-if="::allowSaving">',c+='<div class="pl1em pr1em pt1em" ng-if="showError"><div class="tk-stl-alertbox tk-stl-alertbox-negative">{{errorMessage}} <a href="#" class="close" ng-click="closeError($event)"></a></div></div>',c+='<div class="tk-stl-labelled-input tk-stl-label-right tk-stl-input-1">',c+='<input type="text" placeholder="Search name" ng-model="saveName">',c+='<div class="label"> <button type="submit" class="tk-stl-button" ng-click="saveQuery(saveName)">Save</button> </div>',c+="</div>",c+="</form>",c+="<ul>",c+='<li ng-repeat="query in queries">',c+='<div class="content">',c+='<p><a ng-href="{{ ::query.query_url }}">{{ ::query.name }}</a></p>',c+='<span class="metadata">{{ ::query.created | date: dateFormat}}</span>',c+='<span class="delete" ng-click="deleteQuery(query.id)">&times;</span>',c+="</div>",c+="</li>",c+='<li class="empty-message" ng-show="queries.length == 0">',c+='<div class="content"><p class="empty">{{::emptyText}}</p></div>',c+="</li>",c+="</ul>",c+="</div>"}};return a}angular.module("lightning").directive("socialSavedQueryList",a).directive("collaborateSavedQueryList",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{buttonLabel:"@"},controller:["$scope","$twigkit","$rootScope","$log","$attrs",function(a,b,c,d,e){function f(){a.topic={title:null==e.name?"":e.name,"private":"global"!=e.namespace,user:e.user}}a.buttonLabel=null!=a.buttonLabel?a.buttonLabel:"Save",f(),a.submitTopic=function(){b.postTopic(a.topic).then(function(){a.form.$setPristine(),f(),c.$broadcast("topic_added")},function(a){d.error(a)})}}],template:function(a,b){var c=b.placeholder||"Type a name for the new topic",d=b.descriptionPlaceholder||"Description",e='<form name="form" role="form" ng-submit="form.$valid && submitTopic()" novalidate="" class="tk-stl-comment-form">';return"false"!=b.showDescription&&b.hasOwnProperty("showDescription")?(e+='<div class="tk-stl-group">',e+='<input type="text" name="title" ng-model="topic.title" required="" placeholder="'+c+'" class="tk-stl-input-1"/>',e+='<div><span ng-show="form.title.$dirty && form.title.$error.required">Please enter a topic name</span></div>',e+='<input type="text" name="description" ng-model="topic.description" placeholder="'+d+'"class="tk-stl-input-1"/>',e+='<button type="submit" class="tk-stl-button group-button tk-stl-input-1" ng-disabled="!form.$valid">{{buttonLabel}}</button>',e+="</div>"):(e+='<div class="tk-stl-labelled-input tk-stl-label-right"><input type="text" name="title" ng-model="topic.title" required="" placeholder="'+c+'"/>',e+='<div class="label grey"><button type="submit" class="tk-stl-button" ng-disabled="!form.$valid">{{buttonLabel}}</button></div></div>',e+='<div><span ng-show="form.title.$dirty && form.title.$error.required">Please enter a topic name</span></div>'),e+="</form>"}};return a}angular.module("lightning").directive("collaborateTopicForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{},controller:["$scope","$twigkit","$attrs","$log","$rootScope",function(a,b,c,d,e){function f(){var e={};e.results=null!=c.show?c.show:10,b.getTopics(e).then(function(b){a.topics=b.data},function(a){d.error(a)})}a.topics=[],a.emptyText=void 0!=c.emptyText?c.emptyText:"You don't have any topics yet",a.deleteLabel=null==c.deleteLabel?"&times;":c.deleteLabel,f(),a.deleteTopic=function(a){b.deleteTopic(a.id).then(function(){e.$broadcast("topic_removed")},function(a){console.log("Error"),console.log(a)})},a.$on("topic_added",function(){f()}),a.$on("topic_removed",function(){f()})}],template:function(a,b){var c='<div class="tk-stl-bookmarks-list">';return b.title&&(c+='<p class="title">'+b.title+"</p>"),c+="<ul>",c+="<ng-transclude>",c+='<li ng-repeat="topic in topics track by topic.id">',c+='<div class="content">',c+="<p><a>{{ ::topic.title }}</a></p>",c+='<p ng-show="topic.description"><span class="metadata">{{ ::topic.description }}</span></p>',c+='<span class="metadata">{{ ::topic.created | date:"dd/MM/yyyy h:mma"}}</span>',c+='<span class="delete" ng-click="deleteTopic(topic)" ng-bind-html="deleteLabel"></span>',c+="</div>",c+="</li>",c+="</ng-transclude>",c+='<li class="empty-message" ng-show="topics.length == 0 && emptyText.length > 0">',c+='<div class="content"><p class="empty">{{::emptyText}}</p></div>',c+="</li>",c+="</ul>",c+="</div>"}};return a}angular.module("lightning").directive("collaborateTopicList",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",trueValue:"@",falseValue:"@",value:"@"},link:function(a,b,c,d){a.trueValue=null==a.trueValue||a.trueValue,a.falseValue=null!=a.falseValue&&a.falseValue,a.model=d.getModel(),null!=a.value&&(a.model[a.field]=1==a.value)},template:function(a,b){var c='<div class="tk-stl-controls">';return c+='<label class="tk-stl-checkbox">',c+=null!=b.trueValue&&null!=b.falseValue?'<input id="{{field}}" name="{{field}}" placeholder="{{label}}" ng-model="model[field]" type="checkbox" ng-true-value="{{trueValue}}" ng-false-value="{{falseValue}}">{{label}}</label>':'<input id="{{field}}" name="{{field}}" placeholder="{{label}}" ng-model="model[field]" type="checkbox" ng-checked="value == \'true\'">{{label}}</label>',c+="</div>"}};return a}angular.module("lightning").directive("contentBoolean",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{legend:"@",action:"@",content:"=?"},controller:["$scope","$attrs","$twigkit","$http","PlatformService","$httpParamSerializerJQLike","$timeout","$filter","$rootScope",function(a,b,c,d,e,f,g,h,i){function j(){var b=angular.copy(a.content);if(null!=b&&null!=b.result&&null!=b.result.fields&&(b=b.result),null==b||null==b.fields||angular.isString(b.fields)){if(null!=b&&angular.isObject(b))for(var c in b)a.model[c]=b[c]}else angular.forEach(b.fields,function(b,c){a.model[c]=h("actual")(b)})}function k(){return a.model}function l(){return a.form}a.model={},a.$watchCollection("content",function(){j()});var m=this;m.getModel=k,m.getForm=l,a.submit=function(){"update"!=a.action&&(a.action="store"),a.error=null;var h=null;if(null!=b.platform){var j=e.getPlatform(b.platform);null!=j&&null!=j.conf&&(h=c.getContextPath("/")+"twigkit/api/core/services/platform/"+a.action+"/"+j.conf+"/form")}null!=h&&(a.formClass="submitting",d({url:h,dataType:"json",method:"POST",data:f(a.model),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0}).then(function(){a.success=!0,i.$broadcast("contentFormPostSuccess",a.model),g(function(){a.success=!1},5e3)},function(b){i.$broadcast("contentFormPostError",b),a.error=b})["finally"](function(){a.formClass=!1}))}}],template:function(){return'<form name="form" class="tk-stl-form" novalidate ng-submit="form.$valid && submit()" ng-class="formClass"><fieldset><legend ng-show="legend != null">{{legend}}</legend><search:alert styling="alertbox-positive" ng-if="success">Form posted successfully.</search:alert><search:alert styling="alertbox-negative" ng-if="error != null">Error! {{error.status}} - {{error.statusText}}.</search:alert><ng-transclude></ng-transclude></fieldset></form>'}};return a}angular.module("lightning").directive("contentForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",required:"@",value:"@",placeholder:"@"},link:function(a,b,c,d){a.required=null!=a.required&&a.required,a.model=d.getModel(),a.form=d.getForm(),null!=a.value&&(a.model[a.field]=a.value)},template:function(a,b){var c="true"==b.hidden?"hidden":"text";return'<div class="tk-stl-control-group"><label>{{label}} <strong ng-show="required == \'true\'">*</strong></label><input id="{{field}}" name="{{field}}"  type="'+c+'" placeholder="{{placeholder == null ? label : placeholder}}" ng-model="model[field]" ng-required="{{required}}"><span ng-show="(form[field].$touched || form.$submitted) && form[field].$error.required">This field is required.</span></div>'}};return a}angular.module("lightning").directive("contentInput",a).directive("contentTextbox",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",value:"@"},link:function(a,b,c,d){a.model=d.getModel()},template:function(){return'<div class="tk-stl-controls"><label class="tk-stl-radio"><input id="{{field}}" name="{{field}}" placeholder="{{label}}" ng-model="model[field]" type="radio" value="{{value}}">{{label}}</label></div>'}};return a}angular.module("lightning").directive("contentRadio",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",transclude:!0,scope:{},link:function(a,b,c,d){a.model=d.getModel(),a.form=d.getForm()},template:function(){return'<div class="tk-stl-controls"><button type="submit" class="tk-stl-button pure-button-primary"><ng-transclude>Submit</ng-transclude></button></div>'}};return a}angular.module("lightning").directive("contentSubmit",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^contentForm",scope:{label:"@",field:"@",required:"@",value:"@",placeholder:"@"},link:function(a,b,c,d){a.required=null!=a.required&&a.required,a.model=d.getModel(),a.form=d.getForm(),null!=a.value&&(a.model[a.field]=a.value)},template:function(){return'<div class="tk-stl-control-group"><label>{{label}} <strong ng-show="required == \'true\'">*</strong></label><textarea id="{{field}}"  name="{{field}}" placeholder="{{placeholder == null ? label : placeholder}}" ng-model="model[field]" ng-required="{{required}}"></textarea><span ng-show="(form[field].$touched || form.$submitted) && form[field].$error.required">This field is required.</span></div>'}};return a}angular.module("lightning").directive("contentTextarea",a)}(),function(){"use strict";function a(a){return{restrict:"A",replace:!0,link:function(b,c,d){b.$watch(d.ngCompile,function(d){c.html(d),a(c.contents())(b)})}}}angular.module("lightning").directive("ngCompile",a),a.$inject=["$compile"]}(),function(){"use strict";function a(){var a={restrict:"A",controller:"@",name:"controller"};return a}angular.module("lightning").directive("controller",a)}(),function(){"use strict";function a(a){var b={restrict:"A",link:function(b,c,d){var e="ng-hide",f="ng-hide-animate",g=d.hideWhen;b.$eval(g)&&c.addClass("ng-hide"),b.$watch(g,function(b,d){b!==d&&a[b?"addClass":"removeClass"](c,e,{tempClasses:f})})}};return b}angular.module("lightning").directive("hideWhen",a),a.$inject=["$animate"]}(),function(){"use strict";function a(){return{restrict:"EAC",link:function(a,b,c,d,e){if(!e)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag(b));var f=!1;if(e(function(a){a.length&&(f=!0)}),f){var g=a.$new();e(g,function(a){b.empty(),b.append(a),b.on("$destroy",function(){g.$destroy()})})}}}}angular.module("lightning").directive("ngInject",a)}(),function(){"use strict";function a(a){var b={restrict:"A",link:function(b,c,d){var e="ng-hide",f="ng-hide-animate",g=d.showWhen;b.$eval(g)||c.addClass("ng-hide"),b.$watch(g,function(b,d){b!==d&&a[b?"removeClass":"addClass"](c,e,{tempClasses:f})})}};return b}angular.module("lightning").directive("showWhen",a),a.$inject=["$animate"]}(),function(){"use strict";function a(a){return{restrict:"E",link:function(b,c){function d(){e++,c[0].innerHTML="$digests: "+e}var e=0;a.$watch(d)}}}angular.module("lightning").directive("devTrackDigests",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{response:"@?",defaultText:"@?"},controllerAs:"$ctrl",bindToController:!0,controller:["ResponseService","$scope","$filter","$element","$lightningUrl","$attrs","$timeout",function(a,b,c,d,e,f,g){function h(){p.defaultText=t,(p.response||u)&&(i(),b.$on(p.response+"_updated",function(){r=!1,i()}))}function i(){if(u&&u.getFacet){var b=u.getFacet();s=_.get(b,"field"),p.filters=_.get(b,"filters")}else{var c=a.getResponse(p.response);p.filters=_.get(c,"facets."+f.facet+".filters")}p.filters&&!r&&(r=!0,g(function(){var a,b;if(b=f.filterSuffix?e.getFiltersFromUrl(s+f.filterSuffix):e.getFiltersFromUrl(s),b&&(a=e.stringToFilter(b)),a){for(var c=d.find("li"),g=0;g<c.length;g++)if(c[g].textContent===_.get(a,"val.dsp")){c[g].classList.add("checked"),p.defaultText=_.get(a,"val.dsp");break}}else o()},0))}function j(){p.open=!p.open}function k(a){p.open=!1,p.defaultText=c("display")(p.filters[a]);var b=d.find("li");b.removeClass("checked"),angular.element(b[a+1]).addClass("checked"),m(p.filters[a]),p.search=""}function l(){p.open=!1}function m(a){if(a.field){var b=angular.copy(a),c=angular.copy(s);"true"===f.exclude&&(b.exclude=!0),f.filterSuffix&&(b.field+=f.filterSuffix,c+=f.filterSuffix),e.removeFiltersFromUrl(c),e.addFilterObjectToUrl(b,q)}}function n(){f.filterSuffix?e.removeFiltersFromUrl(s+f.filterSuffix):e.removeFiltersFromUrl(s),o(),l()}function o(){var a=d.find("li");a.removeClass("checked"),angular.element(a[0]).addClass("checked"),p.defaultText=t}var p=this,q="true"===f.submitOnSelect,r=!1,s=f.facetField||f.facet,t=f.defaultText||"Select",u=d.controller("searchFacet");p.$onInit=h,p.toggleOpen=j,p.selectFilter=k,p.close=l,p.removeFilter=n,p.open=!1}],template:function(a,b){var c="true"===b.searchWithin,d='<div class="tk-stl-facet-dropdown" ng-class="{open: $ctrl.open}" click-outside="$ctrl.close()">\n    <a class="tk-stl-select-toggle" ng-click="$ctrl.toggleOpen()">{{ $ctrl.defaultText }} <span ng-class="$ctrl.open ? \'icon-up-open-1\' : \'icon-down-open-1\'"></span></a>\n    <div class="container" ng-keyup="$ctrl.keyboardControls($event)">\n';return d+=c?'        <input type="text" ng-model="$ctrl.search" placeholder="Search">\n        <ul>\n            <li ng-click="$ctrl.removeFilter()">{{ ::$ctrl.defaultText }}</li>\n            <li data-id="{{ $index }}" ng-repeat="filter in $ctrl.filters | filter:$ctrl.search track by $index" ng-click="$ctrl.selectFilter($index)">{{ filter | display }}</li>\n        </ul>\n':'    <ul>\n            <li ng-click="$ctrl.removeFilter()">{{ ::$ctrl.defaultText }}</li>\n            <li data-id="{{ $index }}" ng-repeat="filter in $ctrl.filters track by $index" ng-click="$ctrl.selectFilter($index)">{{ ::filter | display }}</li>\n        </ul>\n',d+="    </div>\n</div>"}};return a}angular.module("lightning").directive("facetDropdown",a)}(),function(){"use strict";function a(){var a={restrict:"E",template:function(a,b){return'<span id="constant-'+b.name+'" data-value="'+b.value+'" style="display:none;"></span>'}};return a}angular.module("lightning").directive("helperConstant",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{"var":"@",value:"="},controller:["$scope",function(a){a.$watch("value",function(b){a.$parent[a["var"]]=b})}]};return a}angular.module("lightning").directive("helperSet",a)}(),function(){"use strict";function a(){var a={restrict:"E",link:function(a,b,c){window.document.title=c.title}};return a}angular.module("lightning").directive("helperTitle",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){var h=[],i={restrict:"E",scope:{},replace:!0,transclude:{footer:"?instantFooter"},require:["^?searchBox","^?searchTypeahead"],link:{post:function(i,j,k,l,m){if(j.on("$destroy",function(){i.$destroy()}),null!=l[0]||null!=l[1]){var n=k.hasOwnProperty("title")?0:-1,o=n,p=!1;e(function(){var a=angular.element(j.parent().parent().children()[0]),b={DOWN:40,UP:38,ENTER:13};a.bind("keydown",function(a){var c,d=p?j.children().length-1:j.children().length;if(a.which===b.DOWN)a.preventDefault(),angular.forEach(j.children(),function(a){angular.element(a).removeClass("selected")}),o==n||o+1>d-1?o=n+1:o++,c=angular.element(j.children()[o]),c.addClass("selected");else if(a.which===b.UP)a.preventDefault(),angular.forEach(j.children(),function(a){angular.element(a).removeClass("selected")}),o==n||o==n+1?o=d-1:o--,c=angular.element(j.children()[o]),c.addClass("selected");else if(a.which===b.ENTER&&o>n){a.preventDefault();var e=angular.element(j.children()[o]).find("a")[0];null!=angular.element(e)[0]&&null!=angular.element(e)[0].href&&(window.location=angular.element(e)[0].href)}})},0),i.$on("search_fired",function(){i.searchFired=!0}),i.$on("instant_search_changed",function(q,r){if(i.lastSearch==r||""==r.trim())i.$emit("instant_results_loaded",0);else{i.searchFired=!1,i.lastSearch=r,a.remove(h,function(){h=[]});var s=null==k.platform?"platform":k.platform;i.platform=c.getPlatform(s);var t=f.getQueryAsHttpParams(k.query);if(null==t)t={rpp:5};else{var u=g.getParams(!1,t);if(t=u.searchParams,null!=l[0]){var v=l[0].isSearchWithinEnabled();v||(t.f=[])}else t.f=[];t.p=1,null==t.rpp&&(t.rpp=5)}if(null!=i.platform){var w=r;switch(k.wildcard){case"left":w="*"+w;break;case"both":w="*"+w+"*";break;case"none":break;default:w+="*"}b.search(w,i.platform,t).then(function(b){return a.remove(h,function(){h=[]}),i.searchFired?void i.$emit("instant_results_loaded",0):(i.response=b.data,0==b.data.results.length?void i.$emit("instant_results_loaded",b.data.results.length):(o=n,void e(function(){angular.forEach(b.data.results,function(b){var c=i.$new(!0);c.result=b.result;var d=a.render(m,j,c);h.push({elem:d,scope:c})});var c=i.$new();c.instantQuery=i.lastSearch,m(c,function(a){if(null!=a){var b=angular.element('<li class="instant-results-footer"></li>');b.append(a),j.append(b),h.push({elem:b}),p=!0}else p=!1},null,"footer"),i.limit=b.data.length,i.$emit("instant_results_loaded",b.data.results.length)},0)))})}else i.$emit("instant_results_loaded",0),d.debug("InstantResultList","No platform was found, please add the platform attribute or check you are creating the platform.")}})}}},template:function(a,b){var c='<ul style="top:0;width: 100%;">';return b.hasOwnProperty("title")&&(c+='<li class="instant-results-title"><strong>'+b.title+"</strong></li>"),c+='<li ng-repeat="result in results | limitTo:limit"></li></ul>'}};return i}angular.module("lightning").directive("instantResultList",a),a.$inject=["$util","$twigkit","PlatformService","$lightningLog","$timeout","QueryService","ResponseService"]}(),function(){"use strict";function a(){var a={scope:{on:"=?"},link:function(a,b,c){a.$watch("on",function(a){a?(b.removeClass("ng-hide"),b.addClass(c.animation)):(b.addClass("ng-hide"),b.removeClass(c.animation))})}};return a}angular.module("lightning").directive("layoutAnimate",a)}(),function(){"use strict";function a(){var a={link:function(a,b,c){function d(){f();var a="";c.layoutBlock?a=c.layoutBlock:(a+=c.tiny||c.xs?c.tiny||c.xs:"1",c.small&&(a+=" sm-"+c.small),c.medium&&(a+=" md-"+c.medium),c.large&&(a+=" lg-"+c.large),c.sm&&(a+=" sm-"+c.sm),c.md&&(a+=" md-"+c.md),c.lg&&(a+=" lg-"+c.lg),c.xl&&(a+=" xl-"+c.xl),c.xsOffset&&(a+=" offset-xs-"+c.xsOffset),c.smOffset&&(a+=" offset-sm-"+c.smOffset),c.mdOffset&&(a+=" offset-md-"+c.mdOffset),c.lgOffset&&(a+=" offset-lg-"+c.lgOffset),c.xlOffset&&(a+=" offset-xl-"+c.xlOffset)),a=a.trim();for(var d="",g=a.split(" "),h=0;h<g.length;h++)d+="tk-rgrid-u-"+g[h]+" ";d=d.trim(),e(d),b.addClass(d)}function e(a){g=a}function f(){g.length>0&&b.removeClass(g)}var g="";c.hasOwnProperty("dynamic")?(c.$observe("xs",d),c.$observe("tiny",d),c.$observe("sm",d),c.$observe("small",d),c.$observe("md",d),c.$observe("medium",d),c.$observe("lg",d),c.$observe("large",d),c.$observe("xl",d),c.$observe("xsOffset",d),c.$observe("smOffset",d),c.$observe("mdOffset",d),c.$observe("lgOffset",d),c.$observe("xlOffset",d)):d()}};return a}angular.module("lightning").directive("layoutBlock",a)}(),function(){"use strict";function a(){var a={restrict:"E",link:function(a,b){b.addClass("tk-rgrid-box")}};return a}angular.module("lightning").directive("layoutBox",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:!1,template:'<div class="tk-stl-centercontent"><div class="tk-stl-centercontent-inner" ng-transclude></div></div>'};return a}angular.module("lightning").directive("layoutCenterContent",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return'<div class="tk-bl-content" ng-transclude></div>'}};return a}angular.module("lightning").directive("layoutContent",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return'<ul class="clearfix tk-stl-sortoptions" ng-transclude></ul>'}};return a}angular.module("lightning").directive("layoutControls",a)}(),function(){"use strict";function a(){var a={link:function(a,b,c){c.hasOwnProperty("fixed")?b.addClass("tk-rgrid-u"):b.addClass("tk-rgrid-g")}};return a}angular.module("lightning").directive("layoutGrid",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{file:"@"},transclude:!0,link:function(a,b,c){var d=[];for(var e in c)if(c.hasOwnProperty(e)&&e.charAt(0).match(/[a-z]/i)&&"ng"!=e.substring(0,2)&&"file"!=e){try{a[e]=a.$eval(c[e]),(void 0==a[e]||"number"==typeof a[e]&&isNaN(a[e]))&&(a[e]=c[e])}catch(f){a[e]=c[e]}d.push(e)}},template:function(){return'<div ng-include="file" ng-inject></div>'}};return a}angular.module("lightning").directive("layoutInclude",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,template:function(a,b){b.imageLink=null==b.imageLink||""==b.imageLink.trim()?"/":b.imageLink,b.alt=null==b.alt?"Logo":b.alt;var c='<div class="tk-header-logo">';return null!=b.image&&(c+='<a href="'+b.imageLink+'">',c+='<img src="'+b.image+'"',c+='style="',null!=b.height&&(c+="height:"+b.height+";"),null!=b.width&&(c+="width:"+b.width),c+='"',c+='alt="'+b.alt+'" />',c+="</a>"),c+="</div>"}};return a}angular.module("lightning").directive("layoutLogo",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return'<aside class="tk-bl-sidebar" ng-transclude></aside>'}};return a}angular.module("lightning").directive("layoutSidebar",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){b.addClass("tk-stl-sidebar-offcanvas-"+c.drawer)}};return a}angular.module("lightning").directive("drawer",a)}(),function(){"use strict";function a(){var a={restrict:"A",scope:{dynamicStyling:"@"},link:function(a,b){function c(a){d.length>0&&b.removeClass(d),d="";for(var c=a.trim().split(" "),e=0;e<c.length;e++)""!=c[e].trim()&&(d+=" tk-stl-"+c[e].trim());b.addClass(d.trim())}var d="";a.$watch("dynamicStyling",function(a){c(a)})}};return a}angular.module("lightning").directive("dynamicStyling",a);
}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingBottom;"0"==d?b.addClass("pb0em"):"0.25"==d||"025"==d?b.addClass("pb025em"):"0.5"==d||"05"==d?b.addClass("pb05em"):"1"==d?b.addClass("pb1em"):"2"==d&&b.addClass("pb2em")}};return a}angular.module("lightning").directive("paddingBottom",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingLeft;"0"==d?b.addClass("pl0em"):"0.25"==d||"025"==d?b.addClass("pl025em"):"0.5"==d||"05"==d?b.addClass("pl05em"):"1"==d?b.addClass("pl1em"):"2"==d&&b.addClass("pl2em")}};return a}angular.module("lightning").directive("paddingLeft",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingRight;"0"==d?b.addClass("pr0em"):"0.25"==d||"025"==d?b.addClass("pr025em"):"0.5"==d||"05"==d?b.addClass("pr05em"):"1"==d?b.addClass("pr1em"):"2"==d&&b.addClass("pr2em")}};return a}angular.module("lightning").directive("paddingRight",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){var d=c.paddingTop;"0"==d?b.addClass("pt0em"):"0.25"==d||"025"==d?b.addClass("pt025em"):"0.5"==d||"05"==d?b.addClass("pt05em"):"1"==d?b.addClass("pt1em"):"2"==d&&b.addClass("pt2em")}};return a}angular.module("lightning").directive("paddingTop",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){if(c.style.length>0&&c.style.indexOf(":")===-1){console.warn('Style directive is deprecated, use "styling" instead for Internet Explorer support.',b);for(var d=c.style.trim().split(" "),e=0;e<d.length;e++)""!=d[e].trim()&&b.addClass("tk-stl-"+d[e].trim())}}};return a}angular.module("lightning").directive("style",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){for(var d=c.styling.trim().split(" "),e=0;e<d.length;e++)""!=d[e].trim()&&b.addClass("tk-stl-"+d[e].trim())}};return a}angular.module("lightning").directive("styling",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){b.addClass("tk-stl-tooltip").attr("aria-label",c.tooltip),c.$observe("tooltip",function(a){b.addClass("tk-stl-tooltip").attr("aria-label",a)})}};return a}angular.module("lightning").directive("tooltip",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope","$timeout","$attrs","$lightningLog",function(a,b,c,d){a.show=!1,d.debug("LifecycleDelay","Starting delay of "+c.delay+"ms"),b(function(){d.debug("LifecycleDelay","Finished delay"),a.show=!0},c.delay)}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleDelay",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope","$timeout","$attrs","$lightningLog",function(a,b,c,d){a.show=!0,d.debug("LifecycleDisplay","Displaying elements for "+c.time+"ms."),b(function(){d.debug("LifecycleDisplay","Finished displaying elements."),a.show=!1},c.time)}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleDisplay",a)}(),function(){"use strict";function a(a,b){var c={restrict:"E",scope:{},transclude:!0,link:function(c,d,e){e.global=null!=e.global&&""!=e.global.trim()?e.global:"true","true"==e.global?(b.debug("LifecycleEvent",'Broadcasting event "'+e.event+'" globally.'),a.$broadcast(e.event)):(b.debug("LifecycleEvent",'Broadcasting event "'+e.event+'".'),c.$broadcast(e.event))},template:function(){return"<ng-transclude></ng-transclude>"}};return c}angular.module("lightning").directive("lifecycleEvent",a),a.$inject=["$rootScope","$lightningLog"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{event:"@"},transclude:!0,controller:["$scope","$attrs","$lightningLog",function(a,b,c){a.show="true"==b.hide,c.debug("LifecycleOn",'Listening for event "'+a.event+'".'),a.$on(a.event,function(){c.debug("LifecycleOn",'Event "'+a.event+'" heard.'),a.show="true"!=b.hide})}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleOn",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{object:"=?"},transclude:!0,controller:["$scope","$attrs","$lightningLog",function(a,b,c){a.show=!1,a.$watch("object",function(d){d?(c.debug("LifecycleRequired",b.object+" has a value, rendering children."),a.show=!0):a.show=!1})}],template:function(){return'<ng-transclude ng-if="show"></ng-transclude>'}};return a}angular.module("lightning").directive("lifecycleRequired",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{fetch:"@"},transclude:!0,controller:["$scope","$attrs","QueryService","$twigkit",function(a,b,c,d){function e(){var e=c.getQueryAsHttpParams(b.query)||{},f=d.getContextPath("/");a.url=f+"twigkit/services/media/export/csv/"+b.conf,a.url+="?delimiter="+(null==b.delimiter?",":b.delimiter),e.max=null==a.fetch?20:a.fetch,e.rpp=null==b.batchSize?10:b.batchSize,null!=b.fields&&(e.fi=b.fields),a.url+="&"+c.convertHttpParamsToUrl(e)}e(),a.$on("query_"+b.query+"_updated",function(){e()}),a.$watch("fetch",function(){e()})}],template:function(){return'<a ng-href="{{url}}" target="_blank"><ng-transclude>Export</ng-transclude></a>'}};return a}angular.module("lightning").directive("mediaCsv",a)}(),function(){"use strict";function a(){var a={restrict:"A",link:function(a,b,c){b.bind("error",function(){c.src!=c.defaultSrc&&c.$set("src",c.defaultSrc)})}};return a}angular.module("lightning").directive("defaultSrc",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{fetch:"@"},transclude:!0,replace:!0,controller:["$scope","$attrs","QueryService","$twigkit",function(a,b,c,d){function e(){var e=c.getQueryAsHttpParams(b.query),f=d.getContextPath("/");a.url=f+"twigkit/services/media/export/excel/"+b.conf,e.max=null==a.fetch?20:a.fetch,null!=b.fields&&(e.fi=b.fields),null!=b.header&&(e.header=b.header),a.url+="?"+c.convertHttpParamsToUrl(e)}e(),a.$on("query_"+b.query+"_updated",function(){e()}),a.$watch("fetch",function(){e()})}],template:function(){return'<a ng-href="{{url}}" target="_blank"><ng-transclude>Export</ng-transclude></a>'}};return a}angular.module("lightning").directive("mediaExcel",a)}(),function(){"use strict";function a(a,b,c,d,e,f){var g={restrict:"E",scope:{result:"=?",fieldName:"@",fieldPrefix:"@",fieldSuffix:"@",lazyLoad:"@",fallbackImageUrl:"@",src:"@",url:"@",cacheOriginal:"@",imageServiceUrl:"@"},replace:!1,link:function(f,g,h){function i(b){if(null!=b){f.result=b;var c=f.result.fields[f.fieldName];null!=c?f.newSrc=a("actualValue")(c.val):f.fallbackImageUrl&&(f.newSrc=f.fallbackImageUrl),null!=f.fieldPrefix&&(f.newSrc=f.fieldPrefix+f.newSrc),null!=f.fieldSuffix&&(f.newSrc=f.newSrc+f.fieldSuffix),f.newSrc=j(f.newSrc)}else f.src=null,f.newSrc=null}function j(a){var b=new RegExp("^(?:[a-z]+:)?//","i"),c=b.test(a);if(c||(a=null!=a&&0===a.indexOf("/")?location.origin+a:location.href+"/"+a),f.cacheOriginal="false"!=f.cacheOriginal,null==f.imageServiceUrl){var d=e.getContextPath("/");a=d+"twigkit/services/images/resize/?cacheOriginal="+f.cacheOriginal+"&url="+window.encodeURIComponent(a),h.width>0&&(a+="&width="+h.width),h.height>0&&(a+="&height="+h.height),a+="&useHeaders="+m}return a}function k(a,b){var c=g[0].getBoundingClientRect();c.top>=0&&c.bottom<=a&&c.left>=0&&c.right<=b&&(l.attr("src",f.newSrc),l.css("opacity",1),n())}var l=angular.element(g.find("img")[0]),m="true"==h.useHeaders;if("true"==f.lazyLoad){var n;l.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity 1s ease-in",transition:"opacity 1s ease-in"}),null!=h.height&&l.attr("height",h.height),null!=h.width&&l.attr("width",h.width),n=b.bindListener(k),g.on("$destroy",function(){n()}),f.$watch("src",function(a){a&&k(c[0].documentElement.clientHeight,c[0].documentElement.clientWidth)})}null!=f.url&&(g.addClass("clickable"),g.bind("click",function(){d.location.href=f.url})),null!=f.fallbackImageUrl?l.attr("onerror","this.src = '"+f.fallbackImageUrl+"'"):l.attr("onerror","this.style.cssText = 'display:none !important'"),null==f.src||""==f.src.trim()?null!=f.result?f.$watch("result",function(a){i(a)}):null!=f.$parent.result?f.$watch("$parent.result",function(a){i(a)}):null!=f.fallbackImageUrl&&(f.newSrc=j(f.fallbackImageUrl)):f.newSrc=j(f.src)},template:function(a,b){var c=f.hasStyle("square-crop",b.styling),d=f.hasStyle("circle-crop",b.styling),e="";return c&&(e+='<div class="tk-rgrid-img-squarecrop">',e+='<div class="tk-rgrid-img-squarecrop-inner">'),d&&(e+='<div class="tk-rgrid-img-circlecrop">',e+='<div class="tk-rgrid-img-circlecrop-inner">'),e+="true"!=b.lazyLoad?'<img ng-src="{{newSrc}}"/>':"<img/>",(c||d)&&(e+="</div></div>"),e}};return g}angular.module("lightning").directive("mediaImage",a),a.$inject=["$filter","scrollAndResizeListener","$document","$window","$twigkit","$util"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{platform:"@",query:"@",facet:"@",expandFacet:"@"},controllerAs:"PivotTable",bindToController:!0,controller:["$attrs","QueryService","PlatformService","ResponseService","$lightningUrl","$twigkit","$element","$scope","$http","$window",function(a,b,c,d,e,f,g,h,i,j){function k(){l()}function l(c){var d,f;if(c){d=angular.copy(b.getQuery(a.expandQuery)),f=r+j.encodeURIComponent(a.expandFacet);var g=e.createFilter(a.field,c.label,c.label),h=e.stringToFilter(g);d.filters.push(h)}else d=angular.copy(b.getQuery(a.query)),f=r+j.encodeURIComponent(a.facet);var k=b.convertQueryToUrl(d);i.get(f+"?"+k).then(function(a){c?(c.expanded=a.data,c.toggled=!0,c.loading=!1,n(),p(c)):q.data=a.data})}function m(a){a.expanded?a.toggled=!a.toggled:l(a)}function n(){s=angular.element(g).find("section"),s.on("scroll",function(a){var b=angular.element(a.target).attr("data-index"),c=g[0].querySelector('.pivot-table-headers .pivot-expand-container[data-index="'+b+'"]');c&&(c.scrollTop=a.target.scrollTop)}),t=angular.element(g).find("header-expand"),t.on("scroll",function(a){var b=angular.element(a.target).attr("data-index"),c=g[0].querySelector('.pivot-horizontal-scroller .pivot-expand-container[data-index="'+b+'"]');c&&(c.scrollTop=a.target.scrollTop)})}function o(){u=g[0].querySelector(".scroll-wrapper .pivot-horizontal-scroller"),v=g[0].querySelector(".sticky-header .pivot-horizontal-scroller"),v&&u&&(angular.element(u).on("scroll",function(a){v.scrollLeft=a.target.scrollLeft}),angular.element(v).on("scroll",function(a){u.scrollLeft=a.target.scrollLeft}))}function p(a){for(var b=g[0].querySelector(".pivot-related .pivot-cell"),c=window.getComputedStyle(b),d=_.trimEnd(c.minWidth,"px")||65,e=17,f=_.get(a,"header.length")*d+e,h=g[0].querySelectorAll(".pivot-horizontal-scroller .pivot-expand-container"),i=0;i<h.length;i++)h[i].style["min-width"]=f+"px"}var q=this;q.platform=c.getPlatform(a.platform);var r=f.getContextPath()+"twigkit/api/core/services/platform/table/"+q.platform.conf+"/";q.fetchData=l,q.expandRow=m;var s,t,u,v;k(),o(),h.$on("$destroy",function(){s&&"function"==typeof s.off&&s.off("scroll"),t&&"function"==typeof t.off&&t.off("scroll"),v&&"function"==typeof v.off&&v.off("scroll"),u&&"function"==typeof u.off&&u.off("scroll")}),h.$on("query_"+a.query+"_updated",k)}],template:function(a,b){var c='<div class="tk-stl-pivot-table">';return c+='<div class="sticky-header"><div class="filter-row"><div class="pivot-cell header"></div><div class="pivot-cell"><p><strong>Total</strong></p></div></div><div class="pivot-horizontal-scroller">',c+='<div class="filter pivot-table-header"><div class="filter-row"><div class="pivot-related"><div class="pivot-cell" ng-repeat="header in PivotTable.data.header track by $index">',c+='<p title="{{ header }}"><strong>{{ header }}</strong></p>',c+="</div></div></div></div>",c+="</div></div>",c+='<div class="scroll-wrapper">',c+='<div class="pivot-table-headers tk-stl-pull-left"><div class="vertical-scroll"><div class="filter" ng-repeat="row in PivotTable.data.rows track by $index" ng-click="PivotTable.expandRow(row)" ng-class="{loading: row.loading, expanded: row.toggled}"><div class="filter-row"><div class="pivot-cell header"><p title="{{ row.label }}"><strong>{{ row.label }}',"false"!=b.expand&&(c+='<span class="icon-plus expand-icon"></span>',c+='<span class="icon-minus collapse-icon"></span>',c+='<span class="tk-stl-circle-loader"></span>'),c+='</strong></p></div><div class="pivot-cell"><p>{{ row.total | number }}</p></div></div><header-expand class="pivot-expand-container" ng-show="row.toggled" data-index="{{ $index }}"><div class="filter-row" ng-repeat="expandedRow in row.expanded.rows track by $index"><div class="pivot-cell header"><p title="{{ expandedRow.label }}"><strong>{{ expandedRow.label }}</strong></p></div><div class="pivot-cell"><p>{{ expandedRow.total | number }}</p></div></div></header-expand></div></div></div>',c+='<div class="pivot-horizontal-scroller">',c+='<div class="vertical-scroll">',c+='<div class="filter" ng-repeat="row in PivotTable.data.rows track by $index"><div class="filter-row"><div class="pivot-related"><div class="pivot-cell" ng-repeat="count in row.data track by $index"><p>{{ count | number }}</p></div></div></div>',c+='<section class="pivot-expand-container" ng-show="row.toggled" data-index="{{ $index }}"><div class="filter" ng-repeat="expandedRow in row.expanded.rows track by $index"><div class="filter-row"><div class="pivot-cell" ng-repeat="count in expandedRow.data track by $index"><p>{{ count | number }}</p></div></div></div></section>',c+="</div>",c+="</div>",c+="</div>",c+="</div>",c+="</div>"}};return a}angular.module("lightning").directive("pivotTable",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,require:"^^searchQuery",link:{pre:function(a,b,c,d){c.name&&c.value&&d.addCustomParameter(c.name,c.value)}}};return a}angular.module("lightning").directive("queryCustom",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,require:"^^searchQuery",link:{pre:function(b,c,d,e){var f="",g="true"==d.exclude;d.value&&d.field?(f+=a.createFilter(d.field,d.value,d.value,d.optional,g,d.match,d.type),f=a.stringToFilter(f),"true"==d.hidden&&(f.hidden=!0),"remove"!=d.action?e.addFilter(f):d.field&&"*"!=d.value&&e.removeFilter(f)):d.from||d.to||d.display?(f+=d.display?a.createRangeFilterDisplay(d.field,d.from,d.to,d.display,d.optional):a.createRangeFilter(d.field,d.from,d.to,d.from,d.to,d.optional),f=a.stringToFilter(f),"true"==d.hidden&&(f.hidden=!0),"remove"!=d.action?e.addFilter(f):e.removeFilter(f)):d.field&&e.removeAllFilters(d.field)}}};return b}angular.module("lightning").directive("queryFilter",a),a.$inject=["$lightningUrl"]}(),function(){"use strict";function a(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value}function b(b,c,d,e,f){var g={restrict:"E",transclude:!0,require:["^^?searchBox","^^?searchTypeahead"],link:{pre:function(g,h,i,j){if(j&&j.length>0){var k=j[0]||j[1]||!1,l=f.getContextPath("/"),m=null==i.serviceUrl?l+"twigkit/services/query-suggestion-service/":i.serviceUrl,n=null==i.completionService?"":i.completionService,o=m+n,p=null==i.show||isNaN(i.show)?-1:i.show;g.suggestions=[],g.$on("instant_search_changed",function(a,c){var e,f=!1,h={};k&&"function"==typeof k.isSearchWithinEnabled&&(f=k.isSearchWithinEnabled(),e=k.getQuery()),f&&null!=e&&(h=e),h.q=c,g.lastSearch==c||""==c.trim()||(g.lastSearch=c,b({method:"GET",url:o,params:h}).then(function(a){var b=0;g.suggestionGroups=[],angular.forEach(a.data,function(a){if(a.values.length>0&&(p==-1||p>b)){var c=[],d={title:a.title};angular.forEach(a.values,function(a){(p==-1||p>b)&&(c.push(a),b++)}),d.values=c,g.suggestionGroups.push(d)}}),b>0&&(g.showSuggestions=!0),g.$emit("instant_results_loaded",b)},function(a){d.debug("QuerySuggestions","Query Suggestion service returned an error."),d.debug("QuerySuggestions",a)}))})}g.goToSuggestion=function(b){null!=i.action&&c.path(i.action),g.showSuggestions=!1;var d=c.path()+a(b.parameters);c.url(d),e.$broadcast("paramChange","q"),e.$broadcast("reloadSearch")}}},template:function(){var a='<ul style="top:0;" class="tk-stl-input-1" ng-show="showSuggestions">';return a+='<div ng-repeat="suggestionGroup in suggestionGroups">',a+='<li class="query-suggestion-title"><strong>{{suggestionGroup.title}}</strong></li>',a+='<li ng-repeat="suggestion in suggestionGroup.values">',a+='<a href="javascript:void(0);" ng-click="goToSuggestion(suggestion)" ng-bind-html="suggestion.highlighting"></a>',a+="</li>",a+="</div>",a+="</ul>"}};return g}angular.module("lightning").directive("querySuggestions",b),b.$inject=["$http","$location","$lightningLog","$rootScope","$twigkit"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,controller:["$scope",function(a){a.show=!0,a.close=function(){a.show=!1}}],template:function(a,b){var c=b.styling||"";return'<div class="tk-stl-alertbox" ng-show="show" styling="'+c+'"><div ng-transclude></div><a href="javascript:void(0);" class="close" ng-click="close()">&times;</a></div>'}};return a}angular.module("lightning").directive("searchAlert",a)}(),function(){"use strict";function a(a){return{restrict:"E",scope:{response:"&",placeholder:"@",buttonLabel:"@",delay:"@",searchWithinDefaultValue:"@"},transclude:{savedQuerySlot:"?collaborateSavedQueryList",bookmarkListSlot:"?collaborateBookmarkList"},require:"^?searchAdvanced",controller:["$scope","$lightningUrl","$attrs","$location","$timeout","PlatformService","QueryService","$filter","$element","$rootScope",function(a,b,c,d,e,f,g,h,i,j){var k,l,m=isNaN(c.minLength)?2:parseInt(c.minLength),n="search_box_query_updated";null!=c.query&&(l=g.getQuery(c.query)),a.delay=c.delay,a.model={query:b.getUrlParameter("q",""),loading:!1},a.swModel={searchWithin:"true"==a.searchWithinDefaultValue},null!=l&&null!=l.val&&(a.model.query=h("display")(l.val)),a.platform=f.getPlatform(c.platform),a.action=c.action,a.showInstantResults=!1,a.showSavedQueries=!1,a.showBookmarks=!1,a.search=function(f){a.$broadcast("search_fired"),a.closePopups(),k&&e.cancel(k),a.swModel.searchWithin||b.resetAllParameters(!1),l=o(),null!=l&&b.setUrlParameters(l,!1);var g=i.controller("searchAdvanced");if(g){for(var h=g.getFilters(),j=0;j<h.length;j++)b.addFilterObjectToUrl(h[j],!1);for(var m=g.getAdvancedTextInstances(),n=0;n<m.length;n++)if(m[n].field){var p;switch(m[n].modifier){case"all":p=m[n].val.split(" ");for(var q=0;q<p.length;q++)b.addFilterToUrl(m[n].field,p[q],p[q],!1);break;case"none":p=m[n].val.split(" ");for(var r=0;r<p.length;r++)b.addFilterToUrl(m[n].field,p[r],p[r],!1,null,!0);break;case"any":p=m[n].val.split(" ");for(var s=0;s<p.length;s++)b.addFilterToUrl(m[n].field,p[s],p[s],!1,"value");break;default:b.addFilterToUrl(m[n].field,m[n].val,m[n].val,!1)}}}b.setUrlParameter("mq",null,!1),b.setUrlParameter("q",f,!0),null!=c.action&&d.path(c.action)},a.searchWrapper=function(b){!a.hasChildren&&null==c.action&&null!=b&&b.length>=m&&a.search(b)},a.setSearchQuery=function(b){a.model.query=b,a.hasChildren&&null!=b&&b.length>=m?k=e(function(){b==a.model.query&&(a.showInstantResults=!1,a.model.query=b,a.model.loading=!0,a.$broadcast("instant_search_changed",b))},300):b.length<m&&(a.showInstantResults=!1,a.model.query=b,a.model.loading=!1),j.$emit(n,a.model.query)},"true"==c.buttonOnly&&j.$on(n,function(b,c){a.model.query=c}),a.closeInstantResults=function(){a.showInstantResults=!1},a.toggleSavedSearches=function(){a.showSavedQueries=!a.showSavedQueries,a.showSavedQueries&&(a.showBookmarks=!1)},a.toggleBookmarks=function(){a.showBookmarks=!a.showBookmarks,a.showBookmarks&&(a.showSavedQueries=!1)},a.$on("instant_results_loaded",function(b,c){a.model.loading=!1,c>0&&(a.showInstantResults=!0)}),a.$on("$locationChangeSuccess",function(){a.showInstantResults=!1,a.model.query=b.getUrlParameter("q",""),null!=c.query&&(l=g.getQuery(c.query)),null!=l&&null!=l.val&&(a.model.query=h("display")(l.val))}),"true"==c.social&&a.$on("savedQueryAdded",function(){a.showSavedQueries=!1}),a.closePopups=function(){a.showBookmarks=!1,a.showSavedQueries=!1,a.showInstantResults=!1};var o=function(){return null!=c.query?g.getQueryAsHttpParams(c.query,!0):null};this.isSearchWithinEnabled=function(){return!!a.swModel&&(a.swModel.searchWithin||!1)},this.getQuery=o}],link:function(b,c,d,e,f){if(b.hasChildren=a.hasChildren(f),d.placeholder=d.placeholder||"Search",d.buttonLabel=d.buttonLabel||"Search",b.instant=!1,null==d.action&&1!=b.hasChildren||(b.instant=!0),"true"==d.social){var g=document.getElementsByTagName("body")[0];c.on("click",function(a){a.stopPropagation()}),angular.element(g).on("click",b.closePopups)}c.on("keydown",function(a){13==a.which&&(a.preventDefault(),b.search(b.model.query))}),b.$on("$destroy",function(){c.off("keydown"),"true"==d.social&&(c.off("click"),angular.element(g).off("click",b.closePopups))})},template:function(a,b){var c="";if("true"==b.buttonOnly)return"true"==b.searchWithinCheckbox&&(c+='<label class="tk-stl-checkbox search-within"><input type="checkbox" ng-model="swModel.searchWithin" />',null!=b.searchWithinLabel&&(c+=b.searchWithinLabel),c+="</label>"),c+='<button type="submit" class="tk-stl-button tk-stl-button" ng-click="search(model.query)">{{ ::buttonLabel }}</button>';b.delay||(b.delay=0);var d="true"==b.social?"tk-stl-social-search":"",e=b.hasOwnProperty("size")?"tk-stl-"+b.size:"";return c+='<form><div class="tk-stl-search-input tk-stl-labelled-input tk-stl-label-right tk-stl-input-1 '+d+'">',c+='<input class="'+e+'" type="search" placeholder="{{::placeholder }}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-model="model.query" ng-if="::(action != null || hasChildren)" ng-change="setSearchQuery(model.query)"/>',c+='<input class="'+e+'" type="search" placeholder="{{::placeholder }}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-change="delay > 0 && searchWrapper(model.query)" ng-model="model.query" ng-if="::(action == null && !hasChildren)" ng-model-options="{debounce: '+b.delay+'}"/>',"true"==b.social&&(c+='<i class="icon-heart '+e+'" ng-click="toggleSavedSearches()"></i>',c+='<i class="icon-bookmark '+e+'" ng-click="toggleBookmarks()"></i>',c+='<ng-transclude ng-transclude-slot="savedQuerySlot" ng-class="{show: showSavedQueries}">',c+='<collaborate:saved-query-list platform="'+b.platform+'" title="My Saved Searches"></collaborate:saved-query-list>',c+="</ng-transclude>",c+='<ng-transclude ng-transclude-slot="bookmarkListSlot" ng-class="{show: showBookmarks}">',c+='<collaborate:bookmark-list platform="'+b.platform+'" title="My Bookmarks" topic="0"></collaborate:bookmark-list>',c+="</ng-transclude>"),c+='<div class="label">',c+='<div class="tk-stl-circle-loader-wrapper" ng-class="{\'ng-hide\':model.loading != true }"><div class="tk-stl-circle-loader tk-stl-search-loader"></div></div>',c+='<button type="submit" class="tk-stl-button tk-stl-button '+e+'" ng-click="search(model.query)">{{ ::buttonLabel }}</button></div>',c+='<div class="tk-stl-sortoptions-group tk-stl-instant-results" ng-class="{\'show\':showInstantResults }" ng-transclude click-outside="closeInstantResults()"></div>',c+="</div>","true"==b.searchWithinCheckbox&&(c+='<label class="tk-stl-checkbox search-within"><input type="checkbox" ng-model="swModel.searchWithin" />',null!=b.searchWithinLabel&&(c+=b.searchWithinLabel),c+="</label>"),c+="</form>"}}}angular.module("lightning").directive("searchBox",a),a.$inject=["$util"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{response:"=?",showFieldName:"@",action:"@",optionalLabel:"@",excludeLabel:"@",exclude:"@"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs","QueryService","$filter","$location","$lightningLog",function(a,b,c,d,e,f,g){function h(a,d){if(b.breadcrumbs=[],b.fields=[],"false"!=c.showQuery){var f={field:null,val:{act:e("actualValue")(d),dsp:e("displayValue")(d)},hide:!1};null!=b.maxCharacters&&b.maxCharacters!=-1?f.val.ngDsp=e("maxCharacters")(f.val.dsp,b.maxCharacters):f.val.ngDsp=f.val.dsp,null!=f.val.act&&"*:*"!=f.val.act&&""!=f.val.act&&(b.fields.push(null),b.breadcrumbs.push(f))}a.length>0&&angular.forEach(a,function(a){if(1!=a.hidden){if(a.val.act&&"range"==a.val.act.type&&c.dateFormat){var d=isNaN(a.val.act.from)?e("dateFormat")(a.val.act.from,c.dateFormat):a.val.act.from;d+=" - ",d+=isNaN(a.val.act.to)?e("dateFormat")(a.val.act.to,c.dateFormat):a.val.act.to,a.val.dsp=d.replace(/&amp;/g,"&")}else{var f=e("display")(a.val);!a.val.dsp&&c.dateFormat&&isNaN(f)&&(f=e("dateFormat")(f,c.dateFormat)),"string"==typeof f&&(f=f.replace(/&amp;/g,"&")),a.val={act:e("actual")(a.val),dsp:f}}if(a.optionalLabel="value"==a.optional||"field"==a.optional&&void 0!=b.optionalLabel?b.optionalLabel:"",a.excludeLabel=1==a.exclude?void 0!=b.excludeLabel?b.excludeLabel:"not ":"",i.length>0)for(var g=0;g<i.length;g++){var h=i[g];a.field==h.field&&(null==h.value?a.hide=!0:h.value==e("actual")(a.val)&&(a.hide=!0))}if(1!=a.hide&&(b.fields.indexOf(a.field)==-1&&b.fields.push(a.field),a.hide=!1),null!=b.maxCharacters&&b.maxCharacters!=-1?a.val.ngDsp=e("maxCharacters")(a.val.dsp,b.maxCharacters):a.val.ngDsp=a.val.dsp,b.breadcrumbs.length>0){var j=e("filter")(b.breadcrumbs,{field:a.field});j.length>0?(j=e("deepFilter")(j,"val.dsp",a.val.dsp)[0],null!=j?(j.multiple=!0,a.hide=!0,b.breadcrumbs.push(a)):b.breadcrumbs.push(a)):b.breadcrumbs.push(a)}else b.breadcrumbs.push(a)}}),b.showClearAll=e("filter")(b.breadcrumbs,{hide:!1}).length>1}b.breadcrumbs=[],b.maxCharacters=isNaN(c.maxCharacters)?-1:parseInt(c.maxCharacters);var i=[];if(null!=b.exclude){var j=b.exclude.split(",");angular.forEach(j,function(a){var b=a.split("=");i.push({field:b[0],value:null!=b[1]?b[1]:null})})}if(null!=c.response)b.$watch("response",function(a){null!=a&&null!=b.response.query&&h(b.response.query.filters,b.response.query.val)},!0);else if(null!=c.query){var k=d.getQuery(c.query);null!=k&&h(k.filters,k.val),b.$on("query_"+c.query+"_updated",function(){k=d.getQuery(c.query),h(k.filters,k.val)})}else g.debug("SearchBreadcrumbs","No response or query has been added to the breadcrumbs tag.");b.removeGroup=function(a){var c=e("filter")(b.breadcrumbs,{field:a},!0),d=b.fields.indexOf(a);d!=-1&&b.fields.splice(d,1);var f=c.length;angular.forEach(c,function(a,c){c==f-1?b.removeBreadcrumb(a,!0):b.removeBreadcrumb(a,!1)})},b.removeBreadcrumb=function(c,d){if(1!=c.hide&&b.breadcrumbs.splice(b.breadcrumbs.indexOf(c),1),1==c.multiple){var g=e("filter")(b.breadcrumbs,{field:c.field});g.length>0&&(g=e("deepFilter")(g,"val.dsp",c.val.dsp),angular.forEach(g,function(a){a.hide=!1,b.removeBreadcrumb(a,!1)}))}if(d=null==d||d,d&&a.setUrlParameter("p",1),null==c.field&&(a.setUrlParameter("mq",null,!1),a.setUrlParameter("q",null,!1)),d&&void 0!=b.action&&f.path(b.action),d){a.setUrlParameter("f",null);var h=[];angular.forEach(b.breadcrumbs,function(b){if(null==b.field)a.setUrlParameter("q",b.val.dsp);else{var c;c=a.createFilterFromObject(b),h.push(c)}}),0==h.length&&(h=null),a.setUrlParameter("f",h,!0)}},b.clearAll=function(){for(var a=angular.copy(b.breadcrumbs),c=0;c<a.length;c++)c==a.length-1?b.removeBreadcrumb(a[c],!0):b.removeBreadcrumb(a[c],!1)}}],template:function(a,b){var c=null;return"true"==b.groupByField?(c='<ol class="breadcrumb-list tk-stl-breadcrumb-capsules-categorygroup" ng-cloak ng-show="breadcrumbs.length > 0">',c+='<li class="breadcrumb-group" ng-repeat="field in fields track by $index" ng-cloak>',c+='<ol class="breadcrumb-list">',c+='<li class="breadcrumb remove-group" ng-if="field != null && showFieldName != \'false\'">',c+='<a href="javascript:void(0)" ng-click="removeGroup(field)">{{field | translate}}</a>',c+="</li>",c+='<li ng-repeat="breadcrumb in breadcrumbs | filter:{ field: field }:true | filter:{hide:false} track by $index" class="breadcrumb" ng-class="{\'last\':$last}" ng-cloak>',c+='<span class="l"></span>',c+='<a href="javascript:void(0)" ng-click="removeBreadcrumb(breadcrumb)">',c+="{{breadcrumb.excludeLabel}}",c+="{{breadcrumb.val.ngDsp}}",c+="{{breadcrumb.optionalLabel}}",c+="</a>",c+='<span class="r"></span>',c+="</li>",c+="</ol>",c+="</li>",c+='<li class="breadcrumb-group" >',c+='<ol class="breadcrumb-list">',c+='<li class="breadcrumb clearall last" ng-show="showClearAll" ng-cloak><a href="javascript:void(0);" ng-click="clearAll()">Clear all</a></li>',c+="</ol>",c+="</li>",c+="</ol>"):(c='<ol class="breadcrumb-list tk-stl-breadcrumb-capsules" ng-cloak ng-show="breadcrumbs.length > 0">',c+='<li ng-repeat="breadcrumb in breadcrumbs | filter:{hide:false} track by $index" class="breadcrumb" ng-class="breadcrumb.field" ng-cloak>',c+='<span class="l"></span>',c+='<a href="javascript:void(0)" ng-click="removeBreadcrumb(breadcrumb)">',c+="{{breadcrumb.excludeLabel}}",c+="{{breadcrumb.val.ngDsp}}",c+="{{breadcrumb.optionalLabel}}",c+="</a>",c+='<span class="r"></span>',c+="</li>",c+='<li class="breadcrumb clearall last" ng-show="showClearAll" ng-cloak><a href="javascript:void(0);" ng-click="clearAll()">Clear all</a></li>',c+="</ol>")}};return a}angular.module("lightning").directive("searchBreadcrumbs",a)}(),function(){"use strict";function a(a,b){var c=a[0],d={transclude:c.transclude,priority:c.priority,terminal:c.terminal,restrict:"EA",link:function(a,d,e){var f;if(null!=e.test)f=e.test;else if(null!=e.response){var g=b.getResponse(e.response);f=null!=g}else f=!1;var h;h=1==f||0==f?f:a.$eval(f),e.ngIf=function(){return h},c.link.apply(c,arguments)}};return d}angular.module("lightning").directive("searchConditional",a),a.$inject=["ngIfDirective","ResponseService"]}(),function(){"use strict";function a(a,b,c,d,e){var f={restrict:"E",require:"?^^searchFacetList",transclude:!0,scope:{facetName:"@",facet:"=?",title:"@",show:"@",showMore:"@",maxCharacters:"@",measure:"@",collapsible:"@",collapsedByDefault:"@",whenField:"@"},controller:["$scope","$lightningUrl","$attrs","$localStorage",function(a,b,c,d){function e(){return{show:null==a.show?10:a.show,showMore:null==a.showMore?10:a.showMore,searchEnabled:"true"==c.searchEnabled,maxCharacters:void 0!=a.maxCharacters?a.maxCharacters:-1,select:null==c.select?"click":c.select,measure:c.measure,showMoreLabel:null==c.showMoreLabel?"Show more":c.showMoreLabel,showLessLabel:null==c.showLessLabel?"Show less":c.showLessLabel,action:c.action,countNumber:c.countNumber,dateFormat:c.dateFormat,switches:null!=c.styling&&c.styling.indexOf("switches")!=-1,platform:null==c.platform?a.platform:c.platform,query:null==c.query?a.query:c.query,facetField:c.facetField,showEmpty:c.showEmpty,exclude:"true"==c.exclude,showCount:c.showCount}}function f(){return a.facet}function g(b){a.showFacet=b}function h(){if(!a.collapsibleFacet)return!1;if(c.facetName){var b=_.get(d,"collapsedFacets."+c.facetName);if(null!=b)return b}return"true"==a.collapsedByDefault}var i=this;i.getFilterListOptions=e,i.getFacet=f,i.showFacet=g,a.collapsibleFacet="true"==a.collapsible,a.hide=h(),a.toggleFacet=function(){a.collapsibleFacet&&(a.hide=!a.hide,_.set(d,"collapsedFacets."+c.facetName,a.hide))}}],link:{pre:function(f,g,h,i,j){function k(){if(void 0!=f.facetName&&f.facetName.indexOf("=")>-1){var a=f.facetName.split("=");f.facetName=a[0],f.title=a[1]}null!=f.response&&null!=f.response.facets&&(f.facet=f.response.facets[f.facetName]||f.facet),void 0==f.title&&void 0!=f.facet&&(f.title=f.facet.display),void 0!=f.facet&&(f.facetName=f.facet.id,f.facetCssName=c("formatAsCssName")(f.facetName)),void 0==f.title&&void 0!=f.facet&&(f.title=f.facet.display),void 0==f.facet?(void 0!=f.facetName?b.debug("SearchFacet","Facet "+h.facetName+" could not be found and has not been rendered."):b.debug("SearchFacet","No facet found on facet directive."),f.hideRender=!0):null!=f.facet&&null!=f.facet.filters&&0==f.facet.filters.length?(b.debug("SearchFacet","Facet "+h.facetName+" has no filters and has not been rendered."),f.hideRender=!0):f.hideRender=!1,_.has(f,"facet.filters[0]")===!1?f.emptyFacet=!0:f.emptyFacet=!1,
f.facetName!=f.title&&e.put(f.facetName,f.title)}g.on("$destroy",function(){f.$destroy()}),f.hasChildren=d.hasChildren(j),null!=i&&null==f.maxCharacters&&(f.maxCharacters=i.getMaxCharacters()),null!=i&&(f.platform=i.getPlatform(),f.query=i.getQuery()),f.facetName&&f.$watch("facetName",function(a,b){a&&b&&k()}),h.response?(f.response=a.getResponse(h.response,"facets"),f.$on(h.response+"_updated",function(a,b){f.response=b,k()}),null!=f.response&&k()):null!=i?(h.response=i.getResponseName(),f.response=a.getResponse(h.response,"facets"),f.$on(h.response+"_updated",function(a,b){f.response=b,k()}),null!=f.response&&k()):f.$watch("facet",function(){k()})}},template:function(){var a='<li class="facet facet-{{::facetCssName}} ng-hide" ng-show="showFacet != false && emptyFacet == false">';return a+='<h3 class="facet-title" ng-click="toggleFacet()" ng-class="{clickable: collapsibleFacet, \'facet-empty-title\': title == null || title == \'\'}">{{ ::title | translate }}<a href="javascript:void(0);" ng-show="::collapsibleFacet" class="right ng-hide">{{hide ? "+" : "-"}}</a></h3>',a+='<ng-transclude ng-hide="hide" class="ng-hide">',a+='<search:filter-list facet="$parent.facet || $parent.$parent.facet" ng-if="hideRender != true" ></search:filter-list>',a+="</ng-transclude>",a+="</li>"}};return f}angular.module("lightning").directive("searchFacet",a),a.$inject=["ResponseService","$lightningLog","$filter","$util","TranslationService"]}(),function(){"use strict";function a(a,b){var c={restrict:"E",require:"?^^searchFacetList",transclude:!0,scope:{facetName:"@",platform:"@",countNumber:"@",maxCharacters:"@",select:"@"},controller:["$scope","$lightningUrl","$http","$filter","PlatformService","$location","ResponseService","$lightningLog","QueryService","$twigkit","$timeout","$attrs",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return a=a.split("/"),a.splice(0,1),a="/"+a.join("/")}var n=e.getPlatform(a.platform),o=!1;a.countNumber=null==a.countNumber?"formatted":a.countNumber,a.maxCharacters=null==a.maxCharacters?-1:a.maxCharacters,a.selectedFilters=[],a.select="checkbox"==a.select||"multiselect"==a.select?"multiselect":"click",a.expandingRootFilter=null,a.expand=function(b){if("multiselect"!=a.select){var e=i.getQuery(l.query);if(e&&null!=e.filters){var f=d("filter")(angular.copy(e.filters),{field:a.facetName},!0);1==f.length?a.selectedFilter=f[0].val.act:a.selectedFilter=null}}a.loading=!0;var g=j.getContextPath("/"),k=(null!=n&&n.host?n.host:g)+"twigkit/api/core/services/facet/"+n.conf+"/children/"+a.facetName,m=i.getQuery(l.query);if(m&&m.filters&&"multiselect"==a.select)if(angular.isArray(m.filters))for(var o=m.filters.length-1;o>=0;o--)m.filters[o].field==a.facetName&&m.filters.splice(o,1);else m.filters.field==a.facetName&&(m.filters=null);var p=i.convertQueryToHttpParams(m);null!=b?p.path=d("actualValue")(b.val):p.path="0/",c({method:"GET",url:k,params:p}).then(function(c){null==b?1==c.data.length&&"true"==l.expandRoot&&1==c.data[0]["has-more-rel"]?(a.expandingRootFilter=c.data,a.expand(a.expandingRootFilter[0])):a.filters=c.data:null!=a.expandingRootFilter?(b.rel=c.data,b.expand=!0,a.expandingRootFilter=[b],a.filters=angular.copy(a.expandingRootFilter),a.expandingRootFilter=null):(b.rel=c.data,b.expand=!0),a.loading=!1},function(){a.loading=!1,h.debug("FacetHierarchical","Unable to get filters from the platform.")})},a.expandFilter=function(b){1==b.expand?b.expand=!1:b.rel.length>0?b.expand=!0:a.expand(b)},a.addOrRemoveSelectedFilter=function(b){if(a.selectedFilters.indexOf(b)==-1){if(b.tkSelected=!0,a.selectedFilters.length>0&&"multiselect"==a.select){var c,e,f=d("actual")(b);for(f=m(f),c=a.selectedFilters.length-1;c>-1;c--){e=d("actual")(a.selectedFilters[c]),e=m(e),0==e.indexOf(f)&&(a.selectedFilters[c].tkSelected=!1,a.selectedFilters.splice(c,1));var g=f.split("/");g.splice(g.length-1,1);for(var h=g.length-1;h>-1;h--){var i=g.join("/");if(e==i){a.selectedFilters[c].tkSelected=!1,a.selectedFilters.splice(c,1);break}g.splice(h,1)}}}a.selectedFilters.push(b)}else{var j=a.selectedFilters.indexOf(b);b.tkSelected=!1,a.selectedFilters.splice(j,1)}},a.selected=function(c,e){if(1!=c.fireOnce||0==e){if(c.fireOnce=!0,"multiselect"==a.select&&(c.optional="value"),b.urlContainsFilterFromObject(c))return c.tkSelected=!0,a.addOrRemoveSelectedFilter(c),a.expand(c),!0;var f=i.getQuery(l.query),g=d("filter")(f.filters,{field:a.facetName});if(g&&g.length>0)for(var h=0;h<g.length;h++){var j=g[h],k=d("actual")(j),n=d("actual")(c);if(k=m(k),n=m(n),0==k.indexOf(n))return a.expand(c),!1}return!1}},a.displayApplyButton=function(){a.showApplyButton=!0},a.setFilter=function(c){var e=null==a.action;o=!0,b.removeFiltersFromUrl(a.facetName,!1),null!=c.act&&"range"==c.act.type?b.addRangeFilterToUrl(a.facetName,c.act.from,c.act.to,c.act.from,c.act.to,e):b.addFilterToUrl(a.facetName,d("actualValue")(c),d("displayValue")(c),e),null!=a.action&&f.path(a.action)},a.applyFilters=function(){var c=angular.copy(a.selectedFilters);if(a.selectedFilters=[],0==c.length)return void b.removeFiltersFromUrl(a.facetName,!0);b.removeFiltersFromUrl(a.facetName);var e=!1;angular.forEach(c,function(f,g){g==c.length-1&&null==a.action&&(e=!0),null!=f.val.act&&"range"==f.val.act.type?b.addRangeFilterToUrl(f.field,f.val.act.from,f.val.act.to,f.val.act.from,f.val.act.to,e,"value",null,f.val.act.fromExcluded,f.val.act.toExcluded):b.addFilterToUrl(f.field,d("actualValue")(f.val),d("displayValue")(f.val),e,"value")}),null!=a.action&&f.path(a.action)}}],link:function(c,d,e,f){function g(){a.cancel(j),null!=i&&i(),k&&k()}function h(a){return null!=a&&"SEARCH:FACET-LIST"==a.nodeName||("SEARCH:FACET"==a.nodeName&&null==a.parentElement||null!=a.parentElement&&h(a.parentElement))}var i,j,k;1==h(angular.element(d)[0])&&(k=c.$on("facet_list_ready",function(){j=a(function(){1==h(angular.element(d)[0])&&c.expand()},0)})),0==h(angular.element(d)[0])&&null!=angular.element(d)[0].parentElement&&null==f&&(i=c.$on(e.query+"_query_updated",function(){a(function(){c.filters=null,c.expand()},0)}),b.getQuery(e.query)&&c.expand()),c.$on("$destroy",function(){g()}),d.on("$destroy",function(){g()})},template:function(){var a='<script type="text/ng-template"  id="facet-hierarchical.html">';return a+='<span class="clickable" ng-show="data[\'has-more-rel\'] == true" ng-click="expandFilter(data)" ng-class="data.expand ? \'icon-down-dir\' : \'icon-right-dir\'"></span>',a+='<a class="label" title="{{ ::data.val | displayValue}}" ng-if="select != \'multiselect\'" ng-click="setFilter(data.val)"  ng-class="{\'selected\' : selectedFilter == (data.val | actualValue)}">{{ ::data.val | displayValue }}</a>',a+='<input type="checkbox" class="tk-stl-styled-checkbox" title="{{ ::data.val | displayValue }}" ng-model="data.tkSelected" ng-init="selected(data)"  ng-if="::select == \'multiselect\'" ng-click="addOrRemoveSelectedFilter(data); displayApplyButton()">',a+='<label class="label" title="{{ ::data.val | displayValue}}" ng-if="::select == \'multiselect\'" ng-click="addOrRemoveSelectedFilter(data); displayApplyButton()">{{ ::data.val | displayValue | maxCharacters: maxCharacters }}</label>',a+='<span class="metadata">',a+="<span class=\"count\">{{::(countNumber == 'plain' ? data.count : countNumber == 'rounded' ? (data.count | roundedNumber) : (data.count | number))}}</span>",a+="</span>",a+='<ol class="filter-list hierarchical" ng-if="data.rel.length > 0" ng-show="data.expand">',a+="<li ng-repeat=\"data in data.rel track by $index\" ng-include=\"'facet-hierarchical.html'\"  ng-class=\"{'no-children':data['has-more-rel'] == false,'has-children':data['has-more-rel'] == true}\"></li>",a+="</ol>",a+="</script>",a+='<ol class="filter-list hierarchical" ng-cloak>',a+='<li class="filter" ng-repeat="filter in filters" ng-init="filter.expand = filter.expand != null" ng-class="{\'has-children\':filter[\'has-more-rel\'] == true}">',a+='<span class="clickable" ng-if="filter[\'has-more-rel\'] == true" ng-click="expandFilter(filter)" ng-class="filter.expand ? \'icon-down-dir\' : \'icon-right-dir\'"></span>',a+='<a class="label" title="{{ ::filter.val | displayValue | date: dateFormat}}" ng-click="setFilter(filter.val)" ng-class="{\'selected\' : selectedFilter == (filter.val | actualValue)}" ng-if="select != \'multiselect\'">{{ ::filter.val | displayValue}}</a>',a+='<input id="id{{ filter.field }}{{ $index }}" type="checkbox" class="tk-stl-styled-checkbox" title="{{ ::filter.val | displayValue }}" ng-model="filter.tkSelected" ng-init="selected(filter)" ng-if="::select == \'multiselect\'" ng-click="addOrRemoveSelectedFilter(filter); displayApplyButton()">',a+='<label for="id{{ filter.field }}{{ $index }}" class="label" title="{{ ::filter.val | displayValue}}" ng-if="::select == \'multiselect\'">{{ ::filter.val | displayValue | maxCharacters: maxCharacters }}</label>',a+='<span class="metadata">',a+="<span class=\"count\">{{::(countNumber == 'plain' ? filter.count : countNumber == 'rounded' ? (filter.count | roundedNumber) : (filter.count | number))}}</span>",a+="</span>",a+='<ol class="filter-list hierarchical" ng-if="filter[\'has-more-rel\'] == true" ng-show="filter.expand">',a+="<li ng-repeat=\"data in filter.rel  track by $index\" ng-include=\"'facet-hierarchical.html'\" ng-class=\"{'no-children':data['has-more-rel'] == false,'has-children':data['has-more-rel'] == true}\"></li>",a+="</ol>",a+="</li>",a+='<li ng-cloak ng-show="filters.length == 0 && !loading">',a+='<a href="javascript:void(0);">No results found</a>',a+="</li>",a+="</ol>",a+='<input ng-if="select == \'multiselect\' && showApplyButton" type="button" value="Apply Filters" class="tk-stl-button tk-stl-button-small" ng-click="applyFilters()">'}};return c}angular.module("lightning").directive("facetHierarchical",a),a.$inject=["$timeout","QueryService"]}(),function(){"use strict";function a(a,b,c,d,e){var f={restrict:"E",transclude:!0,scope:{},controller:["$attrs",function(a){function b(){return a.response}function c(){return a.maxCharacters}function d(){return a.platform}function e(){return a.query}var f=this;f.getResponseName=b,f.getMaxCharacters=c,f.getPlatform=d,f.getQuery=e}],link:{pre:function(f,g,h,i,j){function k(){var a=null,b=[],d=[],i=[];if(void 0!=h.facetNames){var j=angular.copy(l);angular.element(g.children()[0]).empty(),a=h.facetNames.split(",");var k=angular.copy(f.response);f.facets=[];for(var m,n=!1,o=0;o<a.length;o++)if(m=a[o],m=m.split("="),0==m[0].indexOf("-"))delete k.facets[m[0].substring(1)];else if("*"!=m[0]||n){if("*"!=m[0]){var p={name:m[0]};null!=m[1]&&(p.title=m[1],e.put(m[0],m[1])),n?i.push(p):b.push(p),delete k.facets[m[0]]}}else n=!0;if(n)for(var q in k.facets)d.push({name:k.facets[q].id||q,title:k.facets[q].display});f.facets=b.concat(d),f.facets=f.facets.concat(i);for(var r=0;r<f.facets.length;r++){m=f.facets[r];for(var s=null,t=0;t<j.length;t++){var u=j[t];if(null==s&&(u.hasAttribute("facet-name")&&u.getAttribute("facet-name")==m.name||u.hasAttribute("when-field")&&u.getAttribute("when-field").split(",").indexOf(m.name)>-1)){var v=angular.element(angular.copy(u)).find("ng-transclude").children();s=angular.element(u).empty(),u.hasAttribute("title")&&(m.title=u.getAttribute("title"));for(var w=0;w<v.length;w++){var x=v[w];x=angular.element(x).empty(),s.append(x)}}}if(null==s)for(var y=0;y<j.length;y++){var z=j[y];null!=s||z.hasAttribute("facet-name")||z.hasAttribute("when-field")||(s=angular.element(z).empty())}if(null!=s){if(null!=s.attr("when-field")&&s.attr("when-field").length>0&&s.attr("when-field").split(",").indexOf(m.name)<0)continue;var A=f.$new(!0),B=angular.copy(s);B.attr("facet-name",m.name),B.attr("response")||B.attr("response",h.response),B.attr("platform")||B.attr("platform",h.platform),B.attr("query")||B.attr("query",h.query),void 0!=m.title&&B.attr("title",m.title),f.hasChildren||(B.attr("ng-repeat",null),B.attr("ng-if",null)),c(B)(A),angular.element(g.children()[0]).append(B)}}}f.$broadcast("facet_list_ready")}var l=null;f.response=a.getResponse(h.response,"facets"),f.hasChildren=b.hasChildren(j),null!=f.response&&d(function(){null==l&&(l=angular.copy(angular.element(g.children()[0]).children())),k()},0),f.$on(h.response+"_updated",function(a,b){f.response=b,d(function(){null==l&&(l=angular.copy(angular.element(g.children()[0]).children())),k()},0)})}},template:function(a,b){var c="";return null!=b.styling&&(c="facet-list-"+b.styling),'<ul class="facet-list '+c+'" ng-if="!hasChildren && response != null"><search:facet facet="facet" ng-repeat="facet in response.facets track by $index" ng-if="facets == null"></search:facet><search:facet facet-name="{{facet.name}}" ng-repeat="facet in facets" ng-if="facets != null"></search:facet></ul><ul class="ng-hide facet-list '+c+'" ng-show="hasChildren && response != null" ng-transclude></ul>'}};return f}angular.module("lightning").directive("searchFacetList",a),a.$inject=["ResponseService","$util","$compile","$timeout","TranslationService"]}(),function(){"use strict";function a(a,b){var c={label:{left:"label-left",above:"label-above",inline:"label-inline",leftalways:"label-left-always"},image:"image"},d=["label-left","label-above","label-inline","label-left-always","image","title","description"],e={restrict:"E",transclude:!0,scope:{result:"=?",dateFormat:"@",label:"@",url:"@",urlfield:"@",target:"@",defaultValue:"@"},controller:["$scope","$element","$attrs","$util","$lightningUrl","$filter","$transclude","$location","QueryService",function(a,e,f,g,h,i,j,k,l){function m(){if(a.resultCopy=angular.copy(a.result),a.params=g.params(f),a.field=a.resultCopy.fields[a.params.name],a.maxCharacters=void 0!=f.maxCharacters?f.maxCharacters:-1,a.show=null==f.show||isNaN(f.show)?-1:Number(f.show),null==a.field&&(a.field={name:f.name}),a.displayValues=[void 0],null!=a.field&&null!=a.field.val&&(angular.isArray(a.field.val)?a.displayValues=a.field.val:a.displayValues=[a.field.val]),1==a.displayValues.length&&null!=f.separator){var c;c=null==a.displayValues[0].dsp?a.displayValues[0].split(f.separator):a.displayValues[0].dsp.split(f.separator);var d="string"==typeof a.displayValues[0]?a.displayValues[0]:i("actualValue")(a.displayValues[0]);a.displayValues=[];for(var h=0;h<c.length;h++)a.displayValues.push({act:d,dsp:c[h]})}for(var j=0;j<a.displayValues.length;j++){var k=a.displayValues[j];if(void 0==k&&null==a.defaultValue)a.shouldRender=!1;else if(a.show==-1||j<a.show){a.shouldRender=!0;var l={};l.act="string"==typeof k?k:i("actualValue")(k),l.dsp="string"==typeof k?k:i("displayValue")(k),l.ngDsp=l.dsp,null!=a.defaultValue&&(null==l.dsp||angular.isString(l.dsp)&&""==l.dsp.trim())&&(l.ngDsp=a.defaultValue,l.dsp=a.defaultValue),f.dateFormat?l.ngDsp=i("dateFormat")(l.dsp,f.dateFormat):f.numberFormat?l.ngDsp=i("numberFormat")(l.dsp,f.numberFormat):null!=a.maxCharacters&&a.maxCharacters!=-1&&(l.originalValueLength=l.dsp.length,l.dsp.length>a.maxCharacters?(l.ngDsp=i("maxCharacters")(l.dsp,a.maxCharacters),l.showMoreLink=f.hasOwnProperty("showMore")&&""!=f.showMore?f.showMore:"show more"):l.ngDsp=l.dsp),a.displayValues[j]=l}}a.show!=-1&&a.displayValues.splice(a.show),a.url=o(a.url),f.url=a.url,a.params.urlfield&&a.result.fields[a.params.urlfield]&&(a.urlField=a.result.fields[a.params.urlfield],a.urlField=o(i("actualValue")(a.urlField.val))),e.html(n()),b(e.contents())(a)}function n(){function b(){var a=i("formatAsCssName")(f.name);switch(m){case c.label.left:case c.label.leftalways:l+='<div class="field tk-rgrid-g tk-stl-label-left '+a+'" ng-show="::shouldRender">';break;case c.label.inline:l+='<div class="field tk-rgrid-g tk-rgrid-u-1 tk-stl-label-inline '+a+'" ng-show="::shouldRender">';break;case c.label.above:l+='<div class="field tk-rgrid-g tk-stl-label-above '+a+'" ng-show="::shouldRender">';break;case c.image:l+='<div class="field tk-rgrid-g tk-stl-image '+a+'" ng-show="::shouldRender">';break;default:l+='<div class="field '+a+'" ng-show="::shouldRender">'}return l+=e(),l+=g(),l+="</div>"}function e(){if(""==f.label)return"";var a="",b=f.labelElement||"p";return m==c.label.left?(a+="<"+b+' class="tk-rgrid-u-1 tk-rgrid-u-md-1-3 tk-stl-label" ',a+='ng-bind="'+h()+'">',a+="</"+b+">"):m==c.label.inline?(a+="<"+b+' class="tk-stl-label" ',a+='ng-bind="'+h()+'">',a+="</"+b+">"):m==c.label.above?(a+="<"+b+' class="tk-rgrid-u-1 tk-stl-label" ',a+='ng-bind="'+h()+'">',a+="</"+b+">"):m==c.label.leftalways&&(a+="<"+b+' class="tk-rgrid-u-1-3 tk-stl-label" ',a+='ng-bind="'+h()+'">',a+="</"+b+">"),a}function g(){var a="",b=f.valueElement||"p";return m==c.label.left?(a+='<div class="tk-rgrid-u-1 tk-rgrid-u-md-2-3">',a+="<"+b+' ng-repeat="value in ::displayValues track by $index">',a+=k(),a+="</"+b+">",a+="</div>"):m==c.label.above?(a+='<div class="tk-rgrid-u-1">',a+="<"+b+' ng-repeat="value in ::displayValues track by $index">',a+=k(),a+="</"+b+">",a+="</div>"):m==c.label.leftalways?(a+='<div class="tk-rgrid-u-md-2-3">',a+="<"+b+' ng-repeat="value in ::displayValues track by $index">',a+=k(),a+="</"+b+">",a+="</div>"):m==c.image?(a+='<div ng-repeat="value in ::displayValues track by $index">',a+=k(),a+="</div>"):(a+="<"+b+' ng-repeat="value in ::displayValues track by $index">',a+=k(),a+="</"+b+">"),a}function h(){var a="";return void 0!=f.label&&f.label.length>0?a="::label":void 0!=f.label&&0===f.label.length||(a="::field.name"),a}function k(){var b="";return f.url?(b+='<a ng-href="{{::url}}" href="javascript:void(0);"',null!=f.target&&(b+='target="{{::target}}"'),b+=">"):f.query||f.action?b+='<a href="javascript:void(0);" ng-click="clickFn(value)">':a.urlfield&&null!=a.result.fields[a.urlfield]&&(b+='<a href="{{::urlField}}"',null!=f.target&&(b+='target="{{::target}}"'),b+=">"),m==c.image?b+='<img ng-src="{{::value.ngDsp}}">':(f.prefix&&(b+='<span class="prefix">'+f.prefix+"</span>"),b+=f.hasOwnProperty("showMore")?'<span class="value" ng-bind-html="value.ngDsp"></span>':'<span class="value" ng-bind-html="::value.ngDsp"></span>',f.hasOwnProperty("showMore")&&(b+='<br><a href="#" class="tk-stl-show-more" ng-click="showMore($event,value)" ng-if="::(value.showMoreLink)" ng-bind="value.showMoreLink"></a>'),f.suffix&&(b+='<span class="suffix">'+f.suffix+"</span>")),(a.urlfield&&null!=a.result.fields[a.urlfield]||f.url||f.query)&&(b+="</a>"),b+='<span ng-if="::hasChildren" class="pl025em">',j(a,function(a){if(a&&a.length>0){var c=angular.element("<span></span>");c.append(a),b+=c.html()}}),b+="</span>"}var l="",m="label-left";if(f.styling&&f.styling.length>0){for(var n="(",o=0;o<d.length;o++)n+="\\b"+d[o]+"\\b|";n=n.slice(0,-1),n+=")";var p=f.styling.match(new RegExp(n));m=p&&p[0]?p[0]:m}return l=b()}function o(a){return a?(f.urlPrefix&&(a=f.urlPrefix+a),f.urlSuffix&&(a+=f.urlSuffix),a):""}e.on("$destroy",function(){a.$destroy()}),a.hasChildren=g.hasChildren(j),null!=f.result?a.$watch("result",function(b){b&&(a.result=b,m())}):null!=a.$parent.result&&a.$watch("$parent.result",function(b){b&&(a.result=b,m())}),a.clickFn=function(b){var c=l.getQueryAsHttpParams(f.query,!0);null!=c&&(h.setUrlParameters(c),h.addFilterToUrl(a.field.name,i("actualValue")(b),b.ngDsp,!1,!1)),null!=f.action&&k.path(f.action),h.reloadSearch()},a.showMore=function(b,c){b.preventDefault(),c.originalValueLength>c.ngDsp.length?(c.ngDsp=c.dsp,c.showMoreLink=f.hasOwnProperty("showLess")&&""!=f.showLess?f.showLess:"show less"):(c.ngDsp=i("maxCharacters")(c.dsp,a.maxCharacters),c.showMoreLink=f.hasOwnProperty("showMore")&&""!=f.showMore?f.showMore:"show more")}}]};return e}angular.module("lightning").directive("searchField",a),a.$inject=["$filter","$compile"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{title:"@"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs","$filter",function(a,b,c,d){var e=a.getUrlParameter("fi");e=null!=e?e.split(","):[],b.title=null==b.title?"Fields":b.title,b.show=!1,b.selected=0,b.fields=[];var f=c.fields.split(",");angular.forEach(f,function(a){a=a.split("="),a={act:a[0],dsp:a.length>1?a[1]:a[0],selected:e.indexOf(a[0])!=-1},b.fields.push(a)}),b.selected=d("filter")(b.fields,{selected:!0}).length,b.showList=function(){b.show=!b.show},b.closeList=function(){b.show=!1},b.selectField=function(a){a.selected=!a.selected,b.selected=d("filter")(b.fields,{selected:!0}).length},b.selectAllFields=function(){b.selected==b.fields.length?(angular.forEach(b.fields,function(a){a.selected=!1}),b.selected=0):(angular.forEach(b.fields,function(a){a.selected=!0}),b.selected=b.fields.length)},b.applyFields=function(){var c="",e=d("filter")(b.fields,{selected:!0});angular.forEach(e,function(a,b){c+=a.act,b!=e.length-1&&(c+=",")}),a.setUrlParameter("fi",c,!0),b.closeList()}}],template:function(){var a="<li><div>";return a+='<a href="javascript:void(0);" class="oif-select-fields" ng-click="showList()"><span class="tk-stl-hidemedium" >{{::title}} </span><span class="caret"></span></a>',a+='<div class="tk-stl-sortoptions-group" ng-class="{\'show\': show}"><ul click-outside="closeList()" outside-if-not="oif-select-fields">',a+='<li ng-class="{active : selected == fields.length }"><a href="javascript:void(0);" class="oif-select-fields" ng-click="selectAllFields()">Select All</a></li>',a+='<li ng-repeat="field in fields" ng-class="{active : field.selected }"><a href="javascript:void(0);" class="oif-select-fields" ng-click="selectField(field)">{{::field.dsp}}</a></li>',a+='<li class="divider"></li>',a+='<li><a href="javascript:void(0);" class="oif-select-fields" ng-click="applyFields()">Apply</a></li>',a+="</ul>",a+="</div>",a+="</div></li>"}};return a}angular.module("lightning").directive("searchFields",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,require:"^^searchQuery",link:{pre:function(b,c,d,e){if(d.field&&d.value){var f=a.createFilter(d.field,d.value,d.value,d.optional,"true"==d.exclude);f=a.stringToFilter(f),"true"==d.hidden&&(f.hidden=!0),e.addFilter(f)}}}};return b}angular.module("lightning").directive("searchFilter",a),a.$inject=["$lightningUrl"]}(),function(){"use strict";function a(a,b,c,d,e,f){var g={restrict:"E",require:"?^^searchFacet",scope:{facet:"=?",show:"@",showMore:"@",showMoreLabel:"@",showLessLabel:"@",action:"@",countNumber:"@",dateFormat:"@"},controller:["$scope","$lightningUrl","$attrs","$filter","$location","$twigkit",function(a,b,d,e,f,g){a.setFilter=function(c){var d=null==a.action;if(a.singleFilter(c))b.removeFilterValueFromUrl(c.field,c.val,d);else{if(null!=a.query){var g=angular.copy(a.query);b.setUrlParameters(g,!1)}var h=c.val;null!=h.act&&"range"==h.act.type?null!=h.dsp?b.addRangeFilterDisplayToUrl(c.field,h.act.from,h.act.to,h.dsp,d,null,h.act.fromExcluded,h.act.toExcluded,!1):b.addRangeFilterToUrl(c.field,h.act.from,h.act.to,h.act.from,h.act.to,d,null,null,h.act.fromExcluded,h.act.toExcluded,!1):b.addFilterToUrl(c.field,e("actualValue")(h),e("displayValue")(h),d,null,!1)}null!=a.action&&f.path(a.action)},a.setExcludeFilter=function(c){var d=null==a.action;if(null!=a.query){var e=angular.copy(a.query);b.setUrlParameters(e,!1)}c.exclude=!0,b.removeFilterValueFromUrl(a.facet.field,c.val,!1),b.addFilterObjectToUrl(c,d),null!=a.action&&f.path(a.action)},a.toggleLimitTo=function(){a.limitTo=a.show==a.limitTo?a.showMoreMax:a.show,a.show!=a.limitTo?a.label=a.showLessLabel:a.label=a.showMoreLabel},a.getFacetsSelectedFilters=function(){return null==a.facet?[]:e("filter")(a.filters,{tkSelected:!0})},a.applyFilters=function(){var d=a.selectedFilters;if(0==d.length)return void b.removeFiltersFromUrl(a.facet.id,!0);b.removeFiltersFromUrl(a.facet.id);var g;null!=a.query&&(g=c.convertHttpParamsToQuery(angular.copy(a.query)),g=c.removeFiltersForField(g,a.facet.id));var h=!1;null!=a.query&&null!=g&&(g=c.convertQueryToHttpParams(g),b.setUrlParameters(g,!1)),angular.forEach(d,function(c,f){f==d.length-1&&null==a.action&&(h=!0),null!=c.val.act&&"range"==c.val.act.type?null!=c.val.dsp?b.addRangeFilterDisplayToUrl(c.field,c.val.act.from,c.val.act.to,c.val.dsp,h,"value",c.val.act.fromExcluded,c.val.act.toExcluded,c.exclude):b.addRangeFilterToUrl(c.field,c.val.act.from,c.val.act.to,c.val.act.from,c.val.act.to,h,"value",null,c.val.act.fromExcluded,c.val.act.toExcluded,c.exclude):b.addFilterToUrl(c.field,e("actualValue")(c),e("displayValue")(c),h,"value",c.exclude)}),null!=a.action&&f.path(a.action)},a.selected=function(d,e){if(1!=d.fireOnce||0==e){d.fireOnce=!0;var f;if("multiselect"!=a.select&&"toggle"!=a.select||(d.optional="value"),b.urlContainsFilterFromObject(d))return d.tkSelected=!0,null==_.find(a.selectedFilters,{val:d.val})&&a.selectedFilters.push(d),!0;if(null!=a.query&&null!=a.queryName&&(f=c.getQuery(a.queryName),c.queryContainsFilterForField(f,a.facet.field,d)))return d.tkSelected=!0,null==_.find(a.selectedFilters,{val:d.val})&&a.selectedFilters.push(d),!0;if(1==a.exclude){var g=angular.copy(d);if(g.exclude=!0,b.urlContainsFilterFromObject(g))return d.tkSelected=!0,d.exclude=!0,null==_.find(a.selectedFilters,{val:d.val})&&a.selectedFilters.push(d),!0;if(null!=a.query&&null!=a.queryName&&(f=c.getQuery(a.queryName),c.queryContainsFilterForField(f,a.facet.field,g)))return d.tkSelected=!0,d.exclude=!0,null==_.find(a.selectedFilters,{val:d.val})&&a.selectedFilters.push(d),!0}return!1}},a.applyFacetSelection=function(){"instant"==a.selectMode?(g.cancelAllResponses(),a.applyFilters()):a.showApplyButton=!0},a.greaterThan=function(a,b){return function(c){if(null!=c[a]&&c[a]>b)return!0}},a.searchFilters=function(){null==a.platform&&null==a.query?(a.filters=e("filter")(angular.copy(a.facet.filters),a.searchQuery),null!=d.order&&("count"==d.order.toLowerCase()?a.filters=e("orderBy")(a.filters,"count"):"alphabetical"==d.order.toLowerCase()?a.filters=e("orderByValue")(a.filters):"-count"==d.order.toLowerCase()?a.filters=e("orderBy")(a.filters,"count",!0):"-alphabetical"==d.order.toLowerCase()&&(a.filters=e("orderByValue")(a.filters,!0)))):(angular.forEach(a.filters,function(b){a.selected(b,!1)}),a.selectedFilters=a.getFacetsSelectedFilters(),a.show=a.originalShow+a.selectedFilters.length,a.showMoreMax=a.originalShowMoreMax+a.selectedFilters.length,a.label==a.showMoreLabel?a.limitTo=a.show:a.limitTo=a.showMoreMax,a.loading=!0,g.searchFacet(a.facet.id,a.platform,a.query,a.showMoreMax,a.searchQuery,"multiselect"==a.select||"toggle"==a.select,a.facetField).then(function(b){a.loading=!1,a.filters=b.data,angular.forEach(a.selectedFilters,function(b){var c=e("filter")(a.filters,{val:b.val},!0);null==c[0]&&a.filters.unshift(b)}),a.filters=e("orderBy")(a.filters,["-count","tkSelected"])},function(){console.log("Failed"),a.loading=!1}))},a.addOrRemoveSelectedFilter=function(b,c){if(1!=b.exclude||1==c)if("toggle"==a.select){1==c&&(b.exclude=!0);for(var d=!1,e=0;e<a.selectedFilters.length;e++)if(b.val==a.selectedFilters[e].val&&b.field==a.selectedFilters[e].field){d=!0;break}a.selectedFilters=[],d?b.tkSelected=!1:a.selectedFilters.push(b)}else{var f=a.selectedFilters.indexOf(_.find(a.selectedFilters,{val:b.val}));f==-1?(b.tkSelected=!0,a.selectedFilters.push(b)):1!=c?a.selectedFilters.splice(f,1):(a.selectedFilters.splice(f,1),b.tkSelected=!0,a.selectedFilters.push(b))}},a.singleFilter=function(b){if("tick"===a.select&&a.$parent.$parent.response&&a.$parent.$parent.response.query.filters)for(var c=a.$parent.$parent.response.query.filters,d=0;d<c.length;d++)if(b.field===c[d].field&&b.val===c[d].val)return!0;return!1}}],link:{post:function(g,h,i,j){function k(){g.selectedFilters=[],g.show=null==g.show?null==n.show?10:n.show:g.show,g.showMore=null==g.showMore?null==n.showMore?10:n.showMore:g.showMore,g.showingMore=!1,g.searchQuery="",g.searchEnabled="true"==i.searchEnabled||1==n.searchEnabled,g.maxCharacters=void 0==i.maxCharacters?null==n.maxCharacters?-1:n.maxCharacters:-1,g.select=i.select||n.select||"click",g.measure=null==i.measure?n.measure:i.measure,g.showMoreLabel=null==g.showMoreLabel?null==n.showMoreLabel?"Show more":n.showMoreLabel:g.showMoreLabel,g.showLessLabel=null==g.showLessLabel?null==n.showLessLabel?"Show less":n.showLessLabel:g.showLessLabel,g.countNumber=null==g.countNumber?null==n.countNumber?"formatted":n.countNumber:g.countNumber,g.dateFormat=null==g.dateFormat?n.dateFormat:g.dateFormat,g.action=null==g.action?n.action:g.action,g.label=g.showMoreLabel,g.showApplyButton=!1,g.showingMore=!1,g.searchQuery="",g.shallow=null!=g.facet&&null!=g.facet.params&&null!=g.facet.params.shallow&&1==g.facet.params.shallow[0],g.hierarchical=null!=g.facet&&null!=g.facet.params&&null!=g.facet.params.type&&1!=g.facet.params.type.indexOf("hierarchical"),g.switches=null!=i.styling&&i.styling.indexOf("switches")!=-1||n.switches,g.platform=n.platform,g.query=c.getQueryAsHttpParams(n.query),g.queryName=n.query,g.facetField=n.facetField,g.enableMetadata="false"!=i.enableMetadata&&"false"!=i.showCount&&"false"!=n.showCount,g.loading=!1,g.showEmpty="true"==i.showEmpty||"true"==n.showEmpty,g.exclude="true"==i.exclude||1==n.exclude;var d=parseFloat(g.show)+(parseFloat(g.showMore)||0);if(g.showMoreMax=d,"multiselect-instant"==g.select&&(g.select="multiselect",g.selectMode="instant"),g.originalShow=parseInt(g.show),g.originalShowMoreMax=parseInt(g.showMoreMax),g.limitTo=g.show,g.filters=[],void 0==g.facet)a.debug("SearchFilterList","No facet found on filter list directive."),g.hideRender=!0;else if(1==g.searchEnabled&&null!=g.platform){if(g.filters=angular.copy(g.facet.filters),"multiselect"==g.select||"toggle"==g.select){var f=e.getFiltersFromUrl(g.facet.id);f.length>0&&g.searchFilters()}}else void 0!=g.facet&&void 0!=g.facet.filters&&(g.filters=angular.copy(g.facet.filters),null!=i.order&&("count"==i.order.toLowerCase()?g.filters=b("orderBy")(g.filters,"count"):"alphabetical"==i.order.toLowerCase()?g.filters=b("orderByValue")(g.filters):"-count"==i.order.toLowerCase()?g.filters=b("orderBy")(g.filters,"count",!0):"-alphabetical"==i.order.toLowerCase()&&(g.filters=b("orderByValue")(g.filters,!0))))}function l(){var a="";return a+='<span class="clickable ng-hide" ng-show="data.rel.length > 0 && shallow != true" ng-click="expand == null ? filter.expand = !filter.expand : expand = !expand" ng-class="{\'icon-down-dir\': expand == null ? filter.expand : expand, \'icon-right-dir\': expand == null ? !filter.expand : !expand}"></span>',a+='<label class="label" title="closed" ng-if="::(select == \'multiselect\' && switches != true)">',a+='<input type="checkbox" class="checkbox" title="{{ ::data | displayValue }}" ng-model="data.tkSelected" ng-init="selected(data)" ng-change="addOrRemoveSelectedFilter(data); applyFacetSelection()"> {{ ::data | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}',a+="</label>",a+="<span ng-if=\"::(select == 'multiselect' && switches)\">",a+='<input class="tk-stl-checkbox-switch" type="checkbox" title="{{ ::data | displayValue | dateFormat: dateFormat}}" ng-model="data.tkSelected" ng-change="addOrRemoveSelectedFilter(data); applyFacetSelection()" ng-init="selected(data)">',a+='<label class="tk-stl-tiny" ng-click="addOrRemoveSelectedFilter(data); applyFacetSelection()" title="{{ ::data | displayValue | dateFormat: dateFormat}}"></label>',a+='<span class="label">{{ ::data | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}</span>',a+="</span>",a+='<a ng-if="::(select != \'multiselect\')" class="label" href="javascript:void(0);" title="{{ ::data | displayValue | dateFormat: dateFormat}}" ng-click="setFilter(data)">{{ ::data | displayValue | maxCharacters: maxCharacters | dateFormat: dateFormat}}</a>',a+='<span class="metadata" ng-if="enableMetadata">',a+="<span ng-if=\"::(measure == null || measure == 'count')\" class=\"count\">{{::(countNumber == 'plain' ? data.count : countNumber == 'rounded' ? (data.count | roundedNumber) : (data.count | number))}}</span>",a+="<span ng-if=\"::(measure != null && measure != 'count' && data.facts[measure][0] != null)\" class=\"count\">{{::(countNumber == 'plain' ? data.facts[measure][0] : countNumber == 'rounded' ? (data.facts[measure][0]  | roundedNumber) : (data.facts[measure][0]  | number))}}</span>",a+="</span>",a+='<ol class="filter-list hierarchical" ng-if="data.rel.length > 0" ng-class="::{\'shallow-hierarchical\':shallow == true}">',
a+='<li ng-repeat="data in data.rel track by $index" ng-include="\'hierarchical.html\'" ng-init="expand = shallow == true" class="ng-hide" ng-show="$parent.$parent.$parent.expand == null ? filter.expand : $parent.$parent.$parent.expand" ng-class="{\'no-children\':data.rel.length == 0}"></li>',a+="</ol>"}function m(){var a="toggle";if("toggle"==g.select){var b=g.facet&&g.facet.field?g.facet.field:"toggle";a=b+Math.floor(5*Math.random()).toString()}var c="<ol class=\"filter-list\" ng-class=\"::{'hierarchical' : hierarchical == true, 'shallow-hierarchical':shallow == true}\">";return c+='<li ng-show="::searchEnabled" class="tk-facet-search-container ng-hide">',c+="<input type=\"text\" placeholder=\"Search...\" ng-model=\"searchQuery\" ng-change=\"searchFilters()\" ng-model-options=\"{'updateOn': 'default blur', 'debounce': {'default': 250,'blur': 0}}\">",c+='<div class="tk-stl-circle-loader tk-stl-search-within" ng-class="{\'ng-hide\':loading != true }"></div>',c+="</li>",c+=g.showEmpty?'<li class="filter" ng-repeat="filter in filtered = (filters) | limitTo: limitTo" ng-init="filter.expand = shallow == true" ng-class="{selected: singleFilter(filter), \'has-children\': filter.rel.length > 0 }">':'<li class="filter" ng-repeat="filter in filtered = (filters | filter:greaterThan(\'count\',0) ) | limitTo: limitTo" ng-init="filter.expand = shallow == true" ng-class="{selected: singleFilter(filter), \'has-children\': filter.rel.length > 0 }">',g.exclude&&"multiselect"!==g.select&&"toggle"!==g.select&&(c+='<i class="exclude-filter icon-cancel-circled" ng-click="setExcludeFilter(filter)"></i>'),g.exclude&&"multiselect"==g.select&&(c+='<input id="exclude{{ filter.field }}{{ $index }}" type="checkbox" class="exclude-checkbox" ng-model="filter.exclude">',c+='<label for="exclude{{ filter.field }}{{ $index }}" ng-click="addOrRemoveSelectedFilter(filter, true); applyFacetSelection()"><i class="exclude-filter icon-cancel-circled"></i></label>'),g.exclude&&"toggle"==g.select&&(c+='<input id="exclude{{ filter.field }}{{ $index }}" type="checkbox" class="exclude-checkbox" ng-model="filter.exclude">',c+='<label for="exclude{{ filter.field }}{{ $index }}" ng-click="addOrRemoveSelectedFilter(filter, true); applyFilters()"><i class="exclude-filter icon-cancel-circled"></i></label>'),c+='<span class="clickable" ng-if="filter.rel.length > 0  && shallow != true" ng-click="filter.expand = !filter.expand" ng-class="filter.expand ? \'icon-down-dir\' : \'icon-right-dir\'"></span>',"multiselect"!=g.select||g.switches||(c+='<input id="id{{ filter.field }}{{ $index }}" type="checkbox" class="tk-stl-styled-checkbox" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-model="filter.tkSelected" ng-init="selected(filter)" ng-change="addOrRemoveSelectedFilter(filter); applyFacetSelection()">',c+='<label for="id{{ filter.field }}{{ $index }}" class="label" title="{{ ::filter | displayValue | dateFormat: dateFormat}}">{{ ::filter | displayValue | dateFormat: dateFormat| maxCharacters: maxCharacters }}</label>'),"multiselect"==g.select&&g.switches&&(c+="<span>",c+='<input class="tk-stl-checkbox-switch" type="checkbox" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-model="filter.tkSelected" ng-init="selected(filter)" ng-change="addOrRemoveSelectedFilter(filter)">',c+='<label class="tk-stl-tiny" ng-click="addOrRemoveSelectedFilter(data); applyFacetSelection()"></label>',c+='<span class="label">{{ ::filter | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}</span>',c+="</span>"),"toggle"==g.select&&(c+='<input id="id{{ filter.field }}{{ $index }}" type="radio" name="'+a+'" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-init="selected(filter)" class="tk-filter-radio" ng-checked="filter.tkSelected">',c+='<label ng-click="addOrRemoveSelectedFilter(filter); applyFilters()" for="id{{ filter.field }}{{ $index }}" class="label" title="{{ ::filter | displayValue | dateFormat: dateFormat}}">{{ ::filter | displayValue | dateFormat: dateFormat| maxCharacters: maxCharacters }}</label>'),"multiselect"!=g.select&&"toggle"!=g.select&&(c+='<a class="label" href="javascript:void(0);" title="{{ ::filter | displayValue | dateFormat: dateFormat}}" ng-click="setFilter(filter)"><span class="tk-stl-selected-icon" ng-if="singleFilter(filter)"></span> {{ ::filter | displayValue | dateFormat: dateFormat | maxCharacters: maxCharacters}}</a>'),g.enableMetadata&&(c+='<span class="metadata">',c+="<span ng-if=\"::(measure == null || measure == 'count')\" class=\"count\">{{::(countNumber == 'plain' ? filter.count : countNumber == 'rounded' ? (filter.count | roundedNumber) : (filter.count | number))}}</span>",c+="<span ng-if=\"::(measure != null && measure != 'count' && filter.facts[measure][0] != null)\" class=\"count\">{{::(countNumber == 'plain' ? filter.facts[measure][0] : countNumber == 'rounded' ? (filter.facts[measure][0]  | roundedNumber) : (filter.facts[measure][0]  | number))}}</span>",c+="</span>"),c+='<ol class="filter-list hierarchical" ng-if="filter.rel.length > 0" ng-class="::{\'shallow-hierarchical\':shallow == true}">',c+='<li ng-repeat="data in filter.rel  track by $index" ng-include="\'hierarchical.html\'" ng-init="expand = shallow == true" class="ng-hide" ng-show="filter.expand" ng-class="{\'no-children\':data.rel.length == 0}"></li>',c+="</ol>",c+="</li>",c+='<li ng-cloak ng-show="filtered.length == 0" class="ng-hide">',c+='<a href="javascript:void(0);">No results found</a>',c+="</li>",c+='<li ng-cloak class="tk-stl-show-more ng-hide" ng-show="showMore != null && showMore != 0 && showMore != \'false\' && filtered.length > 0 && filtered.length > show">',c+='<a ng-click="toggleLimitTo()" ng-bind="label" href="javascript:void(0);"></a>',c+="</li>",c+="</ol>","multiselect"!=g.select&&"toggle"!=g.select||(c+='<input ng-show="showApplyButton" type="button" value="Apply Filters" class="tk-stl-button tk-stl-button-small ng-hide" ng-click="applyFilters()">'),c}h.on("$destroy",function(){g.$destroy()});var n={};null!=j&&null==i.facet&&null==g.response&&(g.facet=j.getFacet()),g.$watch("facet",function(){if(null!=j&&(n=j.getFilterListOptions()),null==d.get("hierarchical.html")){var a=l();d.put("hierarchical.html",a)}k(),h.html(m()),f(h.contents())(g)})}}};return g}angular.module("lightning").directive("searchFilterList",a),a.$inject=["$lightningLog","$filter","QueryService","$templateCache","$lightningUrl","$compile"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{"var":"@",id:"@"},transclude:!0,controller:["$scope","$twigkit","$attrs","$lightningUrl","$location","$rootScope","ResponseService","PlatformService","$timeout","QueryService","$filter",function(a,b,c,d,e,f,g,h,i,j,k){function l(){a.reloadingSearch=!0;var h;if(null!=a.id)h={query:null,searchParams:{f:d.createFilter("id",a.id,a.id),rpp:1}};else{var i=j.getQueryAsHttpParams(c.query);h=g.getParams(m,i),h.searchParams.rpp=1}b.search(h.query,a.platform,h.searchParams,!1).then(function(b){var c=k("result")(b.data);f.$$childTail[a["var"]]=c,g.setResponse(a["var"],c),a.reloadingSearch=!1},function(){c.errorPage&&e.url(c.errorPage),a.reloadingSearch=!1}).then(function(){m=!0})}var m=!1;a.reloadingSearch=!1,a.platform=h.getPlatform(c.platform);var n=a.$on(c.platform+"_updated",function(b,c){a.platform=c});l();var o=a.$on("reloadSearch",function(){i(function(){l()},0)});a.$on("$destroy",function(){n(),o()})}]};return a}angular.module("lightning").directive("searchLoad",a)}(),function(){"use strict";function a(a,b,c){var d={restrict:"E",scope:{},replace:!0,transclude:!0,link:function(d,e,f,g,h){function i(){var g=c.getResponse(f.response);if(d.show=!1,null!=g&&null!=g.messages){var i,l,m=isNaN(parseInt(f.first,10))?0:parseInt(f.first,10)-1,n=isNaN(parseInt(f.last,10))||parseInt(f.last,10)>g.messages.length?g.messages.length:parseInt(f.last,10);for(m;m<n;m++)(null!=f.type&&g.messages[m].type==f.type||null==f.type)&&(d.show=!0,l=d.$new(!0),l.message=g.messages[m],j?i=a.render(h,e,l):(i=angular.element('<p ng-bind-html="message.value"></p>'),b(i)(l),e.append(i)),k.push({elem:i,scope:l}))}}var j=a.hasChildren(h),k=[];null!=f.title&&e.append(angular.element('<h4 class="message-list-title">'+f.title+"</h4>")),i(),d.$on(f.response+"_updated",function(){a.remove(k,function(){k=[]}),i()})},template:function(){return'<div class="tk-stl-interruptor" ng-show="show"></div>'}};return d}angular.module("lightning").directive("searchMessageList",a),a.$inject=["$util","$compile","ResponseService"]}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{},replace:!0,transclude:!0,link:function(b,c,d){function e(){var c=a.getResponse(d.response);c?b.show=!(c.results&&c.results.length>0):b.show=!1}b.show=!1,b.$on(d.response+"_updated",function(){e()}),e()},template:function(){return'<div ng-show="show" class="tk-stl-zero-results" ng-transclude><h2>Sorry, there are no results that match your search criteria.</h2><p>If you\'ve checked your spelling, try using more general keywords.</p></div>'}};return b}angular.module("lightning").directive("searchNoResults",a),a.$inject=["ResponseService"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{},link:function(a,b,c){function d(){var a=angular.element(document.querySelector(c.target));a.hasClass(c.activeClass)?a.removeClass(c.activeClass):a.addClass(c.activeClass)}a.$on("$viewContentLoaded",function(){a.showToggle=null!=document.querySelector(c.target)}),a.showToggle=null!=document.querySelector(c.target),c.activeClass=c.activeClass||"active",b.bind("click",d),b.on("$destroy",function(){b.unbind("click",d)})},template:function(){return'<div class="tk-stl-offcanvas-toggle" ng-show="showToggle"><a href="javascript:void(0)" class="tk-stl-navbar-toggle tk-stl-drawer-left-toggle"><span class="tk-stl-icon-bar"></span><span class="tk-stl-icon-bar"></span><span class="tk-stl-icon-bar tk-stl-icon-bar-last"></span></a></div>'}};return a}angular.module("lightning").directive("searchOffcanvasToggle",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs","ResponseService","ScrollToService",function(a,b,c,d,e){function f(){if(b.firstPage=1,b.pages=[],0==g.hits.act[1])b.pagesToShow=0,b.currentPage=g.page,b.lastPage=g.page,b.showNext=!1;else{b.pagesToShow=g.hits.act[1]/g.query.rpp,b.currentPage=g.page,g.hits.act[1]%g.query.rpp>0&&(b.pagesToShow+=1),b.pagesToShow=Math.floor(b.pagesToShow),b.pagesToShow>b.maximumNumberOfPages&&b.currentPage>b.maximumNumberOfPages/2+1&&(b.firstPage=b.currentPage-b.maximumNumberOfPages/2,b.firstPage<3&&(b.firstPage=3),b.currentPage>b.pagesToShow-(b.maximumNumberOfPages%2==0?b.maximumNumberOfPages/2:b.maximumNumberOfPages/2+1)&&(b.firstPage=b.pagesToShow-(b.maximumNumberOfPages%2==0?b.maximumNumberOfPages/2:b.maximumNumberOfPages/2+1)));var a;for(a=0;a<b.maximumNumberOfPages;a++){var c=a+Math.ceil(b.firstPage);if(!((b.pageLimit<=0||c<=b.pageLimit)&&c<=b.pagesToShow))break;b.pages.push(c)}"true"==b.showLast&&(b.lastPage=g.hits.act[1]/g.query.rpp,g.hits.act[1]%g.query.rpp>0&&(b.lastPage+=1),b.pageLimit>0&&b.pageLimit<=b.lastPage&&(b.lastPage=b.pageLimit),b.lastPage=Math.floor(b.lastPage)),b.showNext=!1,b.currentPage<b.pagesToShow&&(b.pageLimit<=0||b.currentPage<b.pageLimit)&&(b.showNext=!0)}}b.maximumNumberOfPages=null==c.maxPages?10:c.maxPages,b.pageLimit=null==c.pageLimit?0:c.pageLimit,b.firstLabel=null==c.firstLabel?1:c.firstLabel,b.previousLabel=null==c.previousLabel?"previous":c.previousLabel,b.nextLabel=null==c.nextLabel?"next":c.nextLabel,b.showLast=c.showLast,b.changePage=function(b){"false"!=c.scrollTo&&e.scrollToElement(c.scrollTo),a.setUrlParameter("p",b,!0)};var g=d.getResponse(c.response);null!=g&&f(),b.$on(c.response+"_updated",function(){g=d.getResponse(c.response),f()})}],template:function(){var a='<div class="tk-stl-pagination-wrapper" ng-cloak>';return a+='<ol class="tk-stl-pagination-arrows">',a+='<li class="page previous" ng-if="currentPage > 1" ng-click="changePage(currentPage - 1)"><a href="javascript:void(0)">{{::previousLabel}}</a></li>',a+='<li class="page first-page" ng-if="firstPage > 2" ng-click="changePage(1)"><a href="javascript:void(0)">{{::firstLabel}}</a></li>',a+='<li class="page ellipsis" ng-if="firstPage > 2">...</li>',a+='<li class="page" ng-repeat="page in pages" ng-class="{active : page == currentPage }" ng-click="changePage(page)"><a href="javascript:void(0)" ng-if="page != currentPage">{{::page}}</a><span ng-if="page == currentPage">{{::page}}</span></li>',a+='<li class="page ellipsis" ng-if="lastPage > currentPage">...</li>',a+='<li class="page last"  ng-if="lastPage > currentPage" ng-click="changePage(lastPage)"><a href="javascript:void(0)">{{lastPage}}</a></li>',a+='<li class="page next" ng-if="showNext == true" ng-click="changePage(currentPage + 1)"><a href="javascript:void(0)">{{::nextLabel}}</a></li>',a+="</ol>",a+="</div>"}};return a}angular.module("lightning").directive("searchPagination",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{conf:"@"},controller:["$scope","$attrs","$rootScope",function(b,c,d){var e={"var":"platform"};c["var"]&&(e["var"]=c["var"]),c.host&&(e.host=c.host),e.conf=b.conf,d.$$childTail[e["var"]]=e,a.setPlatform(e["var"],e)}]};return b}angular.module("lightning").directive("searchPlatform",["PlatformService",a])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){q.filters=[],q.removeFilters=[],q.removeAllFiltersArray=[],q.customParameters=[],p=g.$on("reloadSearch",function(){d(function(){o()},0)}),d(function(){o()},0)}function j(){p()}function k(a){q.filters.push(a)}function l(a){q.removeFilters.push(a)}function m(a){q.removeAllFiltersArray.push(a)}function n(a,b){q.customParameters.push(a+"["+b+"]")}function o(){var d,g=["var","parameters","from","query","q","modifiedQuery","mq","type","t","rrp","resultsPerPage","max","maxResults","p","page","fa","facets","fi","fields","s","sorts","v","view","f","filters","custom","co","collection"],i=q.parameters||"*",j={};if(d=q.from?angular.copy(c.getQueryAsHttpParams(q.from))||{}:angular.copy(a.search()),"string"==typeof d.f&&""!=d.f.trim()?d.f=[d.f]:"string"==typeof d.f&&(d.f=[]),"*"===i)j=d;else{var k=i.split(",");if(k.indexOf("*")!=-1){var l=k.indexOf("*");j=d,k.splice(l,1)}for(var m=0;m<k.length;m++){if(0==k[m].indexOf("-")){var n=k[m].substring(1);j.hasOwnProperty(n)&&delete j[n]}d.hasOwnProperty(k[m])&&(j[k[m]]=d[k[m]])}}if((h.query||h.q)&&null==j.q?j.q=h.query||h.q:null==j.q&&(j.q=""),q.modifiedQuery&&null==j.mq&&(j.mq=q.modifiedQuery),h.type&&null==j.t&&(j.t=h.type),h.resultsPerPage&&null==j.rpp&&(j.rpp=h.resultsPerPage),h.maxResults&&null==j.max&&(j.max=h.maxResults),h.page&&null==j.p&&(j.p=h.page),h.facets&&null==j.fa&&(j.fa=h.facets),h.fields&&null==j.fi&&(j.fi=h.fields),h.sorts&&null==j.s){j.s=h.sorts;for(var o=j.s.split(","),p=0;p<o.length;p++){var r=o[p];"+"!=r[0]&&"-"!=r[0]&&(r="+"+r),o[p]=r}j.s=o.join(",")}if(h.view&&null==j.v&&(j.v=h.view),h.filters&&(j.f=h.filters.split("&")),h.custom&&null==j.c&&(j.c=h.custom.split("&")),h.collection&&null==j.co&&(j.co=h.collection),q.filters.length>0){if(!angular.isArray(j.f))if(void 0!=j.f&&j.f.length>0){var s=j.f;j.f=[],j.f.push(s)}else j.f=[];angular.forEach(q.filters,function(a){j.f.push(a)})}if(q.customParameters.length>0){if(!angular.isArray(j.c))if(void 0!=j.c&&j.c.length>0){var t=j.c;j.c=[],j.c.push(t)}else j.c=[];angular.forEach(q.customParameters,function(a){j.c.push(a)})}for(var u in h)h.hasOwnProperty(u)&&!angular.isObject(h[u])&&null!=h[u]&&u.charAt(0).match(/[a-z]/i)&&"ng"!=u.substring(0,2)&&g.indexOf(u)==-1&&(angular.isArray(j[u])?j[u].push(h[u]):j[u]=h[u]);if(null!=j.f&&j.f.length>0){for(var v=j.f.length-1;v>=0;v--){var w=j.f[v];""==w&&j.f.splice(v,1)}angular.forEach(j.f,function(a,b){angular.isObject(a)||(j.f[b]=e.stringToFilter(a))})}q.removeFilters.length>0&&angular.forEach(q.removeFilters,function(a){var b=e.createFilterFromObject(a);if(null!=j.f&&j.f.indexOf(b)!=-1)j.f.splice(j.f.indexOf(b),1);else{var c=f("filter")(j.f,a,!0);angular.forEach(c,function(a){j.f.splice(j.f.indexOf(a),1)})}});var x=[];q.removeAllFiltersArray.length>0&&angular.forEach(q.removeAllFiltersArray,function(a){angular.isArray(j.f)?angular.forEach(j.f,function(b){b.field==a&&x.push(b)}):void 0!=j.f&&j.f.field==a&&x.push(j.f)}),x.length>0&&angular.forEach(x,function(a){if(j.f==a)j.f=[];else{var b=f("filter")(j.f,a,!0);angular.forEach(b,function(a){j.f.splice(j.f.indexOf(a),1)})}}),c.setQuery(q["var"],j),b.$$childTail[q["var"]]=c.getQuery(q["var"])}var p,q=this;q.addFilter=k,q.removeFilter=l,q.removeAllFilters=m,q.addCustomParameter=n,q.$onInit=i,q.$onDestroy=j}angular.module("lightning").component("searchQuery",{bindings:{"var":"@",parameters:"@",from:"@",modifiedQuery:"@"},controller:a,controllerAs:"SearchQuery"}),a.$inject=["$location","$rootScope","QueryService","$timeout","$lightningUrl","$filter","$scope","$attrs"]}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{"var":"@",query:"@"},transclude:!0,controller:["$scope","$twigkit","$attrs","$lightningUrl","$location","$rootScope","ResponseService","PlatformService","$timeout","QueryService","$q",function(a,b,c,d,e,f,g,h,i,j,k){function l(){a.reloadingSearch=!0;var c=j.getQueryAsHttpParams(a.query);if(c){var d=g.getParams(r,c);p=(new Date).getTime(),q=k.defer(),b.search(d.query,a.platform,d.searchParams,!1,q).then(m,n)["finally"](o).then(function(){r=!0})}}function m(b){var c=(new Date).getTime()-p;a.previousResponseTime=c,a.times.push(c);var d=a.times.reduce(function(a,b){return a+b},0);a.averageResponseTime=(d/a.times.length).toFixed(0),f.$$childTail[a["var"]]=b.data,g.setResponse(a["var"],b.data)}function n(b){c.errorPage&&e.url(c.errorPage),f.$emit(a["var"]+"_response_error",b)}function o(){a.reloadingSearch=!1,q=null}a.times=[];var p,q,r=!1;a.reloadingSearch=!1,a.platform=h.getPlatform(c.platform);var s=a.$on(c.platform+"_updated",function(b,c){a.platform=c});b.onCancelAllResponses(function(){q&&q.resolve()},a),i(l,0);var t=null==c.on?"reloadSearch":c.on,u=a.$on(t,function(){i(function(){l()},0)});a.$on("$destroy",function(){s(),u()})}],link:function(b,c,d,e,f){b.hasChildren=a.hasChildren(f)},template:function(){return'<div ng-show="reloadingSearch && hasChildren" class="tk-stl-response-loader"><div class="tk-stl-response-loader-content" ng-transclude></div></div>'}};return b}angular.module("lightning").directive("searchResponse",a),a.$inject=["$util"]}(),function(){"use strict";function a(a,b){var c={restrict:"E",scope:{},transclude:!0,replace:!0,link:function(c,d,e){function f(){c.totalResults=c.response.hits.act[1],0==c.totalResults?(c.firstResult=0,c.lastResult=0):(c.firstResult=(c.response.page-1)*c.response.query.rpp+1,c.response.page*c.response.query.rpp>c.totalResults?c.lastResult=c.totalResults:c.lastResult=c.response.page*c.response.query.rpp),g()}function g(){c.unformattedLastResult=c.lastResult,null!=c.format?(c.firstResult=a("numberFormat")(c.firstResult,c.format),c.lastResult=a("numberFormat")(c.lastResult,c.format),c.totalResultsDisplay=a("numberFormat")(c.totalResults,c.format)):c.totalResultsDisplay=c.totalResults}c.show=!1,c.showingLabel=null==e.showingLabel?"Showing":e.showingLabel,c.showingAllLabel=null==e.showingAllLabel?"Showing all":e.showingAllLabel,c.ofLabel=null==e.ofLabel?"of":e.ofLabel,c.toLabel=null==e.toLabel?"-":e.toLabel,c.format=null==e.numberFormat?"#,##0.###":e.numberFormat,null!=e.response&&(c.response=b.getResponse(e.response,"page,hits,query"),c.$on(e.response+"_updated",function(){c.response=b.getResponse(e.response,"page,hits,query"),null!=c.response&&f()}),null!=c.response&&f()),c.$on("update_last_result",function(a,b){null!=b&&(c.lastResult=c.unformattedLastResult+b.newResults,c.totalResults=b.newTotal,g())})},template:function(){var a="<div>";return a+='<p ng-if="response != null && totalResults > response.query.rpp" class="response-statistics">{{::showingLabel}} {{firstResult}} {{::toLabel}} {{lastResult}} {{::ofLabel}} {{totalResultsDisplay}}</p>',a+='<p ng-if="response != null && totalResults < response.query.rpp" class="response-statistics">{{::showingAllLabel}} {{totalResultsDisplay}}</p>',a+="</div>"}};return c}angular.module("lightning").directive("searchResponseStatistics",a),a.$inject=["$filter","ResponseService"]}(),function(){"use strict";function a(a,b){var c={restrict:"E",transclude:!0,replace:!0,scope:{result:"=?"},require:{SearchResultList:"?^^searchResultList",TrackClicks:"?^^trackClicks"},link:function(c,d,e,f,g){function h(a,c){var d=c.result?c.result:c,e=a.hasOwnProperty("when")?a.when:null,g=a.hasOwnProperty("equals")?a.equals:null;if(f.SearchResultList&&f.SearchResultList.getResultLoaded(d.id))return!1;if(!e)return!0;if(e&&!g&&d&&d.fields&&d.fields[e])return!0;var h=b("actualValue")(d.fields[e]);if(e&&g&&d&&d.fields&&d.fields[e]&&null!=h){if(h==g)return!0;if("boolean"==typeof h){var i=null;switch(g.toLowerCase().trim()){case"true":i=!0;break;case"false":i=!1}return h===i}return!1}return!1}d.on("$destroy",function(){c.$destroy()}),c.result=void 0==c.result?c.$parent.result:c.result;var i=c.$watch("result",function(j){if(j){if(f.TrackClicks){var k=f.TrackClicks.getFields();if(k){k=k.split(",");for(var l=0;l<k.length;l++){var m=k[l];if(_.has(c.result,"fields."+m)){var n=b("formatAsCssName")(m),o=JSON.stringify(c.result.fields[m].val);d.attr("track-field-"+n,o)}}}}h(e,j)?(f.SearchResultList&&f.SearchResultList.setResultLoaded(j.id),g(c,function(a){d.append(a)})):a(function(){c.$destroy(),d.remove()},0),i()}})},template:function(){return'<li class="result" result-id="{{result.id}}"></li>'}};return c}angular.module("lightning").directive("searchResult",["$timeout","$filter",a])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j={restrict:"E",scope:{results:"=?",infiniteScroll:"@"},replace:!0,transclude:!0,controller:["$scope",function(a){function b(b){b&&(a.resultLoaded[b]=!0)}function c(b){return a.resultLoaded[b]}var d=this;d.setResultLoaded=b,d.getResultLoaded=c}],link:function(j,k,l,m,n){function o(){x=angular.element('<div class="tk-stl-circle-loader tk-stl-xs"></div>'),k.after(x)}function p(){null!=x&&x.remove()}function q(){if(l.infiniteScroll&&"false"!=j.infiniteScroll&&null!=l.query)if("parent"!=j.infiniteScroll)z.bind("scroll",t),j.$on("$destroy",function(){z.unbind("scroll",t)});else{var a=k[0]||k,b=angular.element(a.parentElement);b.bind("scroll",t),j.$on("$destroy",function(){b.unbind("scroll",t)})}}function r(a){var b=a[0]||a;return isNaN(window.pageYOffset)?b.document.documentElement.scrollTop:b.ownerDocument.defaultView.pageYOffset}function s(a){if(a.getBoundingClientRect)return a.getBoundingClientRect().top+r(a)}function t(){var a=k[0]||k;if(!j.loading&&!j.disabled){var b,c,d;if("parent"==j.infiniteScroll){var e=angular.element(a.parentElement);e=e[0]||e;var f,g=e.offsetHeight;void 0!==s(e)&&(f=s(e)),d=s(a)-f+a.offsetHeight,c=d-g,b=c-400<=0}else{var h=z[0].innerHeight;d=a.offsetTop+a.offsetHeight;var i=h+(z[0].scrollY||z[0].pageYOffset);c=d-i,b=c-400<=0}b&&(j.loading=!0,o(),u())}}function u(){j.platform=d.getPlatform(l.platform);var b=i.getQueryAsHttpParams(l.query),f=c.getParams(C,b);return void 0!=f.searchParams.p&&f.searchParams.p>B?(f.searchParams.p=f.searchParams.p+1,B=f.searchParams.p):(B+=1,f.searchParams.p=B),f.searchParams.p>j.lastPage?void j.$evalAsync(function(){p(),j.loading=!1,j.disabled=!0}):void e.search(f.query,j.platform,f.searchParams).then(function(b){C=!0;for(var c=0;c<b.data.results.length;c++){if(A){var d=j.$new(!0);d.result=b.data.results[c].result,d.index=j.response.results.length,a.render(n,k,d)}j.response.results.push(b.data.results[c])}j.lastPage=b.data.hits.act[1]/b.data.query.rpp,b.data.hits.act[1]%b.data.query.rpp>0&&(j.lastPage+=1),j.lastPage=Math.floor(j.lastPage),j.lastPage<=f.searchParams.p&&(j.disabled=!0),g.$broadcast("update_last_result",{newResults:b.data.results.length,newTotal:b.data.hits.act[1]}),p(),j.loading=!1,h(function(){w()},0)},function(){C=!0,p(),j.loading=!1})}function v(){j.resultLoaded=[];var c;B=1,j.disabled=!1,0!=j.response.hits.act[1]?(j.lastPage=j.response.hits.act[1]/j.response.query.rpp,j.response.hits.act[1]%j.response.query.rpp>0&&(j.lastPage+=1),j.lastPage=Math.floor(j.lastPage),j.lastPage<=1&&(j.disabled=!0)):j.disabled=!0,q();var d=k.children(),e=[];for(c=0;c<d.length;c++){var f=d[c];f.hasAttribute("result-list-el")===!1&&e.push(f)}if(angular.element(e).remove(),A)for(c=0;c<j.response.results.length;c++){var g=j.$new(!0);g.result=j.response.results[c].result,g.index=c,a.render(n,k,g)}else if(!y){y=!0;var i='<search:result ng-repeat="r in response.results" result="r.result">',l={};for(c=0;c<j.response.results.length;c++){var m=j.response.results[c].result;for(var o in m.fields)l[o]=!0}for(var p in l)i+='<search:field name="'+p+'" styling="label-left"></search:field>';i+="</search:result>";var r=angular.element(i);b(r)(j),k.append(r)}h(function(){w()},0),j.loading=!1}function w(){if(l.infiniteScroll&&"false"!=j.infiniteScroll&&null!=l.query&&"parent"!=j.infiniteScroll){var a=document.body.scrollHeight>window.outerHeight,b=document.body.currentStyle||window.getComputedStyle(document.body,""),c="visible"==b.overflow||"visible"==b.overflowY||a&&("hidden"==b.overflow||"auto"==b.overflow||"auto"==b.overflowY);c||u()}}"true"==l.infiniteScrolling&&(j.infiniteScroll="window");var x,y=!1,z=angular.element(f),A=a.hasChildren(n);j.loadMore="true"==l.loadMore,j.loadMoreResults=function(){o(),j.loading=!0,u()},null!=l.response?(j.response=c.getResponse(l.response,"results,hits,query"),j.$on(l.response+"_updated",function(a,b){j.response=b,null!=j.response&&v()}),null!=j.response&&v()):null!=l.results&&(j.response={hits:{act:["Long",0]},results:j.results||[]},j.response.results.length>0&&v(),null!=j.response&&j.$watch("results",function(){j.response.results=j.results||[],j.response.results.length>0&&v()}));var B=1,C=!1},template:function(){return'<ol class="result-list" ng-class="::{\'infinite-result-list\' : (infiniteScroll != null && infiniteScroll != \'false\') || loadMore}"><p result-list-el class="infinite-results-loading" ng-show="loadMore && !loading && !disabled"><a href="javascript:void(0);" ng-click="loadMoreResults()">More</a></p><p result-list-el class="infinite-results-loading end" ng-show="disabled"></p></ol>'}};return j}angular.module("lightning").directive("searchResultList",a),a.$inject=["$util","$compile","ResponseService","PlatformService","$twigkit","$window","$rootScope","$timeout","QueryService"]}(),function(){"use strict";function a(){var a={restrict:"E",scope:{response:"=?",title:"@"},transclude:!0,replace:!0,controller:["$lightningUrl","$scope",function(a,b){b.title=null==b.title?"Per page":b.title,b.selected=a.getUrlParameter("rpp",10),b.show=!1,b.changeRpp=function(c){a.setUrlParameter("p",1),a.setUrlParameter("rpp",c,!0),b.selected=c,b.closeList()},b.showList=function(){b.show="show"!=b.show&&"show"},b.closeList=function(){b.show=!1},b.$watch("response",function(a){null!=a&&(null!=b.response.query?b.selected=b.response.query.rpp:b.selected=null)})}],template:function(a,b){b.options=null==b.options?"10,25,50,100":b.options;var c=b.options.split(","),d="<li><div>";return d+='<a href="javascript:void(0);" class="rppoptions-show" ng-click="showList()"><span class="tk-stl-hidemedium" ng-if="response != null">{{ ::title }} </span><em>{{ selected }}</em> <span class="caret"></span></a>',d+='<div class="tk-stl-sortoptions-group {{ show }}" ng-if="response != null"><ul click-outside="closeList()" outside-if-not="rppoptions-show">',angular.forEach(c,function(a){d+="<li ng-class=\"{active : rpp == '"+a+'\'}"><a href="javascript:void(0);" ng-click="changeRpp('+a+')" >'+a+"</a></li>"}),d+="</ul>",d+="</div>",d+="</div></li>"}};return a}angular.module("lightning").directive("searchResultsPerPage",a)}(),function(){"use strict";function a(){var a={restrict:"E",require:"^^searchTypeahead",link:function(a,b,c,d){if(d){var e={keyword:c.keyword};e.field=c.facet||c.keyword||!1,e.type=c.hasOwnProperty("date")?"date":"text",e.placeholder=c.description||"",c.hasOwnProperty("facetField")&&""!=c.facetField&&(e.facetField=c.facetField),c.hasOwnProperty("date")&&(e.dateRange=c.hasOwnProperty("date")&&c.date.length>0?c.date:"on"),c.hasOwnProperty("dateFormat")&&c.dateFormat.length>0&&(e.dateFormat=c.dateFormat),c.hasOwnProperty("dateDisplayFormat")&&c.dateDisplayFormat.length>0&&(e.dateDisplayFormat=c.dateDisplayFormat),e.keyword&&e.field&&d.addKeyword(e)}}};return a}angular.module("lightning").directive("searchKeyword",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},transclude:!0,replace:!0,controller:["$lightningUrl","$scope","$attrs","$filter","ResponseService",function(a,b,c,d,e){function f(){var e=a.getUrlParameter("s","");""==e&&null!=b.response&&null!=b.response.query&&null!=b.response.query.sorts&&b.response.query.sorts.length>0&&(e=("asc"==b.response.query.sorts[0].order?"+":"-")+b.response.query.sorts[0].field),b.selectedSort=e.length>1?e.slice(1,e.length):"*","*"==b.selectedSort||0==d("filter")(b.fields,{actual:b.selectedSort}).length?(b.selectedSort="*",b.selectedOrder="desc"==c.defaultOrder?"-":"+",b.selectedSortDisplay=b.defaultLabel):(b.selectedSort=e.length>1?e.slice(1,e.length):"*",b.selectedOrder=e.length>1?e.slice(0,1):"+",b.selectedSortDisplay=d("filter")(b.fields,{actual:b.selectedSort})[0].display)}b.defaultLabel=null==c.defaultLabel?"relevance":c.defaultLabel,b.show=!1;var g=c.fields.length>0?c.fields.split(","):[];if(b.fields=[],b.fields.push({actual:"*",display:b.defaultLabel}),angular.forEach(g,function(a){var c=a.split("=");b.fields.push({actual:c[0],display:c[1]})}),b.response=e.getResponse(c.response),null==b.response)var h=b.$on(c.response+"_updated",function(a,c){c&&(b.response=c,f(),h())});else f();b.$on("paramChange",function(a,d){"s"==d&&(b.response=e.getResponse(c.response),f())}),b.changeSort=function(e){return"toggle"!=c.mode&&b.selectedSort==e?(a.setUrlParameter("p",1),a.setUrlParameter("s",null,!0),b.selectedOrder="+",void(b.selectedSort="*")):("*"!=e&&b.selectedSort==e?b.selectedOrder="+"==b.selectedOrder?"-":"+":"*"==e&&(b.selectedOrder="+"),a.setUrlParameter("p",1),a.setUrlParameter("s",b.selectedOrder+""+e,!0),b.selectedSort=e,void(b.selectedSortDisplay=d("filter")(b.fields,{actual:b.selectedSort})[0].display))},b.changeOrder=function(c){a.setUrlParameter("p",1),a.setUrlParameter("s",c+""+b.selectedSort,!0),b.selectedOrder=c},b.showList=function(){b.show="show"!=b.show&&"show"},b.closeList=function(){b.show=!1}}],template:function(a,b){var c,d=null==b.title?"Sort by ":b.title,e=b.fields.length>0?b.fields.split(","):[];return"toggle"!=b.mode?(c="<li><div>",c+='<a href="javascript:void(0);" class="sortoptions-show" ng-click="showList()">',c+='<span class="tk-stl-hidemedium" ng-if="response != null">'+d+'</span><em>{{ selectedSortDisplay }}</em> <span class="caret"></span>',c+="</a>",c+='<div class="tk-stl-sortoptions-group {{ show }}" ng-if="response != null"><ul click-outside="closeList()" outside-if-not="sortoptions-show">',c+="<li ng-class=\"{active: selectedSort == '*'}\">",c+='<a href="javascript:void(0);" ng-click="changeSort(\'*\')">{{defaultLabel}}</a>',c+="</li>",angular.forEach(e,function(a){var b=a.split("="),d={actual:b[0],display:b[1]||b[0]};c+="<li ng-class=\"{active: selectedSort == '"+d.actual+"'}\">",c+='<a href="javascript:void(0);" ng-click="changeSort(\''+d.actual+"')\">"+d.display+"</a>",c+="</li>"}),c+='<li class="divider" ng-hide="selectedSort == \'*\'"></li>',c+='<li ng-class="{active: selectedOrder == \'+\'}" ng-hide="selectedSort == \'*\'"><a href="javascript:void(0);" ng-click="changeOrder(\'+\')">Ascending</a></li>',c+='<li ng-class="{active: selectedOrder == \'-\'}" ng-hide="selectedSort == \'*\'"><a href="javascript:void(0);" ng-click="changeOrder(\'-\')">Descending</a></li>',c+="</ul>",c+="</div>",c+="</div></li>"):(c='<div class="sortoptions-pills">',c+="<ul>",c+='<li class="label">'+d+"</li>",
c+="<li ng-class=\"{active: selectedSort == '*'}\">",c+='<a href="javascript:void(0);" ng-click="changeSort(\'*\')">{{defaultLabel}}<span></span></a>',c+="</li>",angular.forEach(e,function(a){var b=a.split("="),d={actual:b[0],display:b[1]||b[0]};c+="<li ng-class=\"{active: selectedSort == '"+d.actual+"', descending:selectedSort == '"+d.actual+"' && selectedOrder == '-'}\">",c+='<a href="javascript:void(0);" ng-click="changeSort(\''+d.actual+"')\">"+d.display+"<span></span></a>",c+="</li>"}),c+="</ul>",c+="</div>"),c}};return a}angular.module("lightning").directive("searchSort",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(g,k,m){function n(){if(x!=m.tabs){x=m.tabs;var a=m.tabs.length>0?m.tabs.split(","):[];g.tabs=[],angular.forEach(a,function(a){var b=a.split("="),c=b[0];c.indexOf("|")!=-1&&(c=c.split("|")),g.tabs.push({actual:c,display:b.length>1?b[1].trim():b[0].trim()})})}}function o(){g.tabs=[];var a=g.response.facets[m.fieldName];if(null!=a)for(var b=0;b<a.filters.length;b++){var c=a.filters[b];g.tabs.push({actual:d("actual")(c.val),display:d("display")(c.val)})}}function p(){if(g.platform=c.getPlatform(m.platform),g.activeTab="all",null!=m.fieldName&&""!=m.fieldName){var h,j=!0;null!=m.query&&(g.query=i.getQueryAsHttpParams(m.query));var k;if(null!=g.query&&(k=f.getParams(!0,g.query),null!=k.searchParams.f))if(angular.isArray(k.searchParams.f))for(var l=k.searchParams.f.length;l>0;l--)b.stringToFilter(k.searchParams.f[l-1]).field==m.fieldName&&(j=!1,k.searchParams.f.splice(l-1,1));else b.stringToFilter(k.searchParams.f).field==m.fieldName&&(j=!1,k.searchParams.f=null);null!=g.response&&null!=g.response.facets&&(h=s(g.response.facets)),j?(q(),null!=g.response?null!=g.response.hits.dsp?g.allCount=d("display")(g.response.hits.dsp):g.allCount=d("numberFormat")(g.response.hits.act[1],A):g.allCount="",t(h),v()):(q(),null!=g.platform&&null!=k?(k.searchParams.rpp=0,k.searchParams.fa=m.fieldName,e.search(k.query,g.platform,k.searchParams).then(function(a){var b=a.data;null!=b.hits.dsp?g.allCount=d("display")(b.hits.dsp):g.allCount=d("numberFormat")(b.hits.act[1],A),h=s(b.facets),t(h),v()})):null!=h&&(t(h),v()))}else if(a.path().length>1){var n=a.path();n=n.substring(1),g.activeTab=n}else g.activeTab=""}function q(){var a=r();void 0!==a&&(g.activeTab=r())}function r(){null!=m.query&&(g.query=i.getQuery(m.query));var c,e,f=0;return angular.forEach(g.tabs,function(h){if("urlTabs"==l){var i=a.path();if(i.lastIndexOf(h.actual)!=-1&&i.lastIndexOf(h.actual)==i.length-h.actual.length&&(f++,e=h.actual,f>1))return void(e=null)}else if(angular.isArray(h.actual)&&null!=g.response&&null!=g.response.query&&null!=g.response.query.filters&&g.response.query.filters.length>0)c=d("filter")(g.response.query.filters,{field:m.fieldName},!0),angular.forEach(h.actual,function(a){if(null!=c){var g=d("deepFilter")(c,"val.act",a)[0];null!=g&&(f++,e=h.actual)}else if((b.urlContainsFilter(m.fieldName,a,h.display,"value")||b.urlContainsFilter(m.fieldName,a,a,"value")||b.urlContainsFilter(m.fieldName,a,h.display)||b.urlContainsFilter(m.fieldName,a,a))&&(f++,e=h.actual,f>1))return void(e=null)});else if(g.query&&g.query.filters){if(c=d("filter")(g.query.filters,{field:m.fieldName},!0),null!=c){var j=d("deepFilter")(c,"val.act",h.actual)[0];null!=j&&(f++,e=h.actual)}}else if(null!=g.response&&null!=g.response.query&&null!=g.response.query.filters&&g.response.query.filters.length>0){if(c=d("filter")(g.response.query.filters,{field:m.fieldName},!0),null!=c){var k=d("deepFilter")(c,"val.act",h.actual)[0];null!=k&&(f++,e=h.actual)}}else if(angular.isArray(h.actual))angular.forEach(h.actual,function(a,c){if((b.urlContainsFilter(m.fieldName,a,h.display,"value")||b.urlContainsFilter(m.fieldName,a,a,"value")||b.urlContainsFilter(m.fieldName,a,h.display)||b.urlContainsFilter(m.fieldName,a,a))&&(f++,e=h.actual,c==h.actual.length-1&&f!=h.actual.length))return void(e=null)});else if((b.urlContainsFilter(m.fieldName,h.actual,h.display,"value")||b.urlContainsFilter(m.fieldName,h.actual,h.actual,"value")||b.urlContainsFilter(m.fieldName,h.actual,h.display)||b.urlContainsFilter(m.fieldName,h.actual,h.actual))&&(f++,e=h.actual,f>1))return void(e=null)}),e}function s(a){var b=[];angular.forEach(a,function(a){b.push(a)});var c=d("filter")(b,{field:m.fieldName},!0)[0];return null==c&&j.warn("Search:Tabs",'Facet "'+m.fieldName+'" was not found. Counts have not been added and some tabs have been disabled. Please check field-name attribute has the correct facet.'),c}function t(a){null!=a?angular.forEach(g.tabs,function(b,c){angular.isArray(b.actual)?(g.tabs[c].count=0,angular.forEach(b.actual,function(b,d){u(a.filters,b,c,!0,d)})):u(a.filters,b.actual,c,!1),null!=b.count&&0!=b.count?g.tabs[c].disabled=!1:g.tabs[c].disabled=!0}):angular.forEach(g.tabs,function(a,b){g.tabs[b].disabled=!0})}function u(a,b,c,e){var f;f=d("filter")(a,{val:b},!0)[0],null==f?(f=d("deepFilter")(a,"val.act",b)[0],e?null!=f?g.tabs[c].count+=f.count:g.tabs[c].count+=0:null!=f?g.tabs[c].count=f.count:g.tabs[c].count=0):e?g.tabs[c].count+=f.count:g.tabs[c].count=f.count}function v(){angular.forEach(g.tabs,function(a){a.count=d("numberFormat")(a.count,A)})}function w(a){if("all"==a&&h.$broadcast("tab_changed","all"),null!=g.tabs)for(var b=0;b<g.tabs.length;b++)if(angular.equals(a,g.tabs[b].actual)){h.$broadcast("tab_changed",g.tabs[b].display);break}}var x,y,z=["plain","formatted","rounded","none"],A=z.indexOf(m.countNumber)!=-1?m.countNumber:"formatted";g.response=f.getResponse(m.response),null!=g.response&&(null==m.tabs&&null!=m.fieldName&&""!=m.fieldName?o():n(),p()),null!=m.query&&g.$on("query_"+m.query+"_updated",function(){var a=r();"all"==a||null==a?y=!0:(null==m.tabs&&null!=m.fieldName&&""!=m.fieldName?null!=g.response&&o():(y=!1,n()),p())}),g.$on(m.response+"_updated",function(a,b){return 0==y?void(y=!0):(g.response=b,void(null!=g.response&&(null==m.tabs&&null!=m.fieldName&&""!=m.fieldName?o():n(),p())))}),m.$observe("tabs",function(){null==x&&null!=m.response?n():x!=m.tabs&&(n(),p())}),g.changeUrl=function(c){("all"==c||null!=g.platform&&null!=c.count&&0!=c.count||null==g.platform)&&(null!=m.fieldName&&""!=m.fieldName?"all"==c?"urlTabs"==l?null==m.action?a.path("/"):a.path(m.action+"/"):(b.removeFiltersFromUrl(m.fieldName,!0),g.activeTab="all"):"urlTabs"==l?null==m.action?a.path(c.actual):a.path(m.action+c.actual):(b.removeFiltersFromUrl(m.fieldName,!1),angular.isArray(c.actual)?angular.forEach(c.actual,function(a,d){b.addFilterToUrl(m.fieldName,a,c.display,d==c.actual.length-1,"value")}):b.addFilterToUrl(m.fieldName,c.actual,c.display,!0),g.activeTab=c.actual):(a.path("/"+c.actual),null==m.query&&a.url(a.path())))},g.$watch("activeTab",w)}var l,m={restrict:"E",scope:{},transclude:!0,replace:!0,compile:function(){return l=this.name,k},template:function(a,b){var c,d=g.hasStyle("navbar",b.styling),e=g.hasStyle("tabs",b.styling);return c=d||e?'<ol class="tabs ">':'<ol class="tabs tk-stl-tabs">',null!=b.allLabel&&""!=b.allLabel&&(d?(c+='<li ng-class="{active: activeTab == tab.actual}" class="tk-stl-navbar-item">',c+='<a href="javascript:void(0);" ng-click="changeUrl(\'all\')">',c+='<span class="label">'+b.allLabel+'<span class="metadata"  ng-show="allCount"  ng-bind="allCount"></span></span>',c+="</a>",c+="</li>"):(c+='<li ng-class="{active: activeTab == \'all\'}" class="tab">',c+='<span class="label" ng-cloak>',c+="<a href=\"javascript:void(0);\" ng-click=\"activeTab != 'all' && changeUrl('all')\">"+b.allLabel+'<span class="metadata" ng-show="allCount" ng-bind="allCount"></span></a>',c+="</span>",c+="</li>")),d?(c+='<li ng-repeat="tab in tabs track by tab.display" ng-class="{active: activeTab == tab.actual}" class="tk-stl-navbar-item">',c+='<a href="javascript:void(0);" ng-click="changeUrl(tab)">',c+='<span class="label">{{::tab.display}} <span class="metadata" ng-bind="tab.count" ng-show="tab.count"></span></span>',c+="</a>",c+="</li>"):(c+='<li ng-repeat="tab in tabs track by tab.display" ng-class="{active: activeTab == tab.actual, disabled: tab.disabled}" class="tab">',c+='<span class="label" ng-cloak>',c+='<a href="javascript:void(0);" ng-click="activeTab != tab.actual && changeUrl(tab)">{{::tab.display}} <span class="metadata" ng-show="tab.count" ng-bind="tab.count"></span></a>',c+="</span>",c+="</li>"),c+="</ol>"}};return m}angular.module("lightning").directive("searchTabs",a),angular.module("lightning").directive("urlTabs",a),a.$inject=["$location","$lightningUrl","PlatformService","$filter","$twigkit","ResponseService","$util","$rootScope","QueryService","$lightningLog"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{},transclude:!0,controller:["$scope","$lightningUrl","$element","$attrs","$filter","$timeout","$twigkit","QueryService","$location","PlatformService",function(a,b,c,d,e,f,g,h,i,j){function k(){q()}function l(b){b&&(a.model.keywords[b.keyword]=b,o())}var m=c.find("input")[0],n=!!(d.hasOwnProperty("platform")&&d.platform.length>0)&&j.getPlatform(d.platform);a.model={keywords:[],filters:[],query:{q:""},selectedKeyword:null,suggestions:[],showSuggestions:!1,showInstantResults:!1,showDatepicker:!1,highlightedListItem:null};var o=_.debounce(k,5),p=this;p.addKeyword=l;var q=function(){var c=b.getAllUrlParameters(),d=[];if(c.f)if("string"==typeof c.f)d.push(b.stringToFilter(c.f));else for(var e=0;e<c.f.length;e++)d.push(b.stringToFilter(c.f[e]));a.model.filters=d,a.model.query.q=c.q||""},r=function(){a.model.selectedKeyword&&a.model.query.q.indexOf(a.model.selectedKeyword.keyword+":")==-1&&(a.model.selectedKeyword=null)},s=function(a){return a&&"string"==typeof a?a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"):a},t=function(){if(!m)return console.warn("search input element not defined"),a.model.q.length;var b=0;if(document.selection){m.focus();var c=document.selection.createRange();c.moveStart("character",-m.value.length),b=c.text.length}else(m.selectionStart||"0"==m.selectionStart)&&(b=m.selectionStart);return b},u=function(){var b=t(),c=a.model.query.q.substr(0,b).match(/(?:^|\s)(\w+\s?)$/);return!!(c&&c.length>0)&&c[1]},v=function(a){var b=u(),c=a.keyword.replace(b,'<em class="keyword">$&</em>');return a.placeholder&&(c+=': <span class="placeholder">'+a.placeholder+"</span>"),c},w=function(a){var b;return a.keyword&&(b={dsp:v(a),act:a}),b},x=function(){var b=[],c=u();if(c.length>0){var d=new RegExp("^("+s(c)+")","i");for(var e in a.model.keywords)a.model.keywords.hasOwnProperty(e)&&a.model.keywords[e].keyword.search(d)>-1&&b.push(a.model.keywords[e])}return b},y=function(){if(a.model.selectedKeyword&&a.model.selectedKeyword.keyword){var b=new RegExp(a.model.selectedKeyword.keyword+":(?!\\s*\\S+:)(.+?)(?=\\s\\S+:|$)","i"),c=a.model.query.q.match(b),d=c&&c.length>0?c[1]:"";a.model.selectedKeyword.val={act:d,dsp:d}}},z=function(){a.$broadcast("instant_search_changed",a.model.query.q)},A=_.debounce(z,200),B=function(){for(var b=[],c=x(),d=[],e=0;e<c.length;e++)d.push(w(c[e]));d.length>0&&b.push({name:"Keywords",suggestions:d}),a.model.suggestions=b,A()},C=function(){var b=[],c={name:"Search within "+a.model.selectedKeyword.field,suggestions:[]},d=F();n?g.searchFacet(a.model.selectedKeyword.field,n,d,10,a.model.selectedKeyword.val.act,!1,a.model.selectedKeyword.facetField||null).then(function(d){for(var e=d.data,f=0;f<e.length;f++)c.suggestions.push({act:e[f],dsp:e[f].val});b.push(c),a.model.suggestions=b,a.model.showSuggestions=!0,a.model.showInstantResults=!1,a.model.showDatepicker=!1},function(){console.log("Failed")}):(b.push(c),a.model.suggestions=b)},D=function(b){if(a.model.selectedKeyword){var c=new RegExp("("+a.model.selectedKeyword.keyword+")(?!\\s*\\S+:)(.+?)(?=\\s\\S+:|$)","gi");return b.replace(c,"").replace(/  +/g," ")}return b},E=function(){var b=u(),c=a.model.selectedKeyword.keyword,d=a.model.query.q,e=b?d.indexOf(b):0;d=d.slice(0,e)+c+":"+d.slice(e+b.length),a.model.query.q=d},F=function(){for(var b={val:D(a.model.query.q),filters:[]},c=0;c<a.model.filters.length;c++)b.filters.push(a.model.filters[c]);var d=h.convertQueryToHttpParams(b);return d};if(d.hasOwnProperty("autoSearch")&&d.autoSearch>0)var G=_.debounce(a.search,d.autoSearch);var H=function(){f(function(){m.focus()},0)};a.searchInputChanged=function(){r(),a.model.selectedKeyword?(y(),C()):(B(),a.model.showSuggestions=!0,a.model.showDatepicker=!1,d.hasOwnProperty("autoSearch")&&d.autoSearch>0&&G()),0==a.model.query.q.length&&(a.model.showInstantResults=!1)},a.selectSuggestion=function(b){b.keyword&&(b.val="",a.model.selectedKeyword=b,E(),"date"==b.type?(a.model.showDatepicker=!0,a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.highlightedListItem=null):(a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null,a.searchInputChanged())),b.keyword||b.field!=a.model.selectedKeyword.field||(a.model.selectedKeyword.val={dsp:b.val,act:b.val},a.model.filters.push(a.model.selectedKeyword),a.model.query.q=D(a.model.query.q),a.model.selectedKeyword=null,a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null),H()},a.clearFilters=function(){a.model.filters=[]},a.removeFilter=function(b){a.model.filters=a.model.filters.filter(function(a){return!angular.equals(b,a)})},a.search=function(){a.model.selectedKeyword=null;var c=F();if(d.hasOwnProperty("action")&&d.action.trim().length>0){var f=e("getUrlForQuery")(c);i.url(d.action.trim()+"?"+f)}else b.setUrlParameters(c,!0);a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null},a.onTimeSet=function(b){if(b){var c=a.model.selectedKeyword.dateDisplayFormat?a.model.selectedKeyword.dateDisplayFormat:"yyyy-MM-ddTHH:mm:ss",d=a.model.selectedKeyword.dateFormat?a.model.selectedKeyword.dateFormat:"yyyy-MM-ddTHH:mm:ss";a.model.selectedKeyword.val={dsp:e("date")(b,c),act:e("date")(b,d)},a.model.filters.push(a.model.selectedKeyword),a.model.query.q=D(a.model.query.q),a.model.selectedKeyword=null,a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null,H()}},a.showFilters=function(b){b.stopPropagation(),a.model.showSuggestions=!0},a.clearSearch=function(){a.model.query.q=""},a.close=function(){a.model.showSuggestions=!1,a.model.showInstantResults=!1,a.model.showDatepicker=!1,a.model.highlightedListItem=null};var I={DOWN:40,UP:38,ENTER:13,TAB:9,ESCAPE:27},J=function(){var b=c.find("li"),d=b.length;a.model.highlightedListItem<d&&(a.model.highlightedListItem++,b.removeClass("selected"),angular.element(b[a.model.highlightedListItem-1]).addClass("selected"))},K=function(){if(a.model.highlightedListItem<=0)a.model.highlightedListItem=0;else{a.model.highlightedListItem--;var b=c.find("li");b.removeClass("selected"),angular.element(b[a.model.highlightedListItem-1]).addClass("selected")}};c.bind("keydown",function(b){switch(b.which){case I.DOWN:b.preventDefault(),J();break;case I.UP:b.preventDefault(),K();break;case I.ENTER:case I.TAB:if(b.preventDefault(),null===a.model.highlightedListItem&&b.which===I.ENTER)a.search(),a.$apply();else{var d=c.find("li");angular.element(d[a.model.highlightedListItem-1]).triggerHandler("click")}break;case I.ESCAPE:a.close(),a.$apply()}});var L=a.$on("$locationChangeSuccess",function(){o()}),M=a.$on("instant_results_loaded",function(b,c){a.model.showInstantResults=c>0&&a.model.query.q.length>0});a.$on("$destroy",function(){L(),M()})}],template:function(a,b){var c=b.hasOwnProperty("placeholder")?b.placeholder:"Search",d=b.hasOwnProperty("label")?b.label:"Search",e="";e+='<form class="tk-stl-form tk-rgrid-g tk-stl-labelled-input tk-stl-label-right tk-stl-flex-nowrap" click-outside="close()">',e+='<div class="tk-rgrid-u-1">',e+='<div class="tk-stl-advanced-search">',e+='<div class="highlight-wrapper">',e+='<input type="text" class="input" ng-model="model.query.q" ng-change="searchInputChanged()" placeholder="'+c+'">',e+='<span class="token-count" ng-if="model.filters.length > 0" ng-click="showFilters($event)">'+"<ng-pluralize count=\"model.filters.length\" when=\"{'one': '1 Filter', 'other': '{} Filters'}\"></ng-pluralize></span>",e+='<span class="clear-search" ng-click="clearSearch()" ng-show="model.query.q.length > 0">&times;</span>';var f=b.hasOwnProperty("datepickerMinView")?"datetimepicker-config=\"{minView: '"+b.datepickerMinView+"'}\"":"";return e+="<widget:datetimepicker "+f+' data-ng-model="data.date" data-on-set-time="onTimeSet(newDate, oldDate)" class="animate-fadeInDown tk-stl-animate-fast" ng-show="model.showDatepicker"></widget:datetimepicker>',e+="</div>",e+='<div class="suggestions" ng-class="{show: model.showSuggestions}">',e+='<p class="simple-search-suggestion clickable" ng-show="model.query.q.length > 0" ng-click="search()">Search for "{{ model.query.q }}" <span class="right icon-search"></span></p>',e+='<ul ng-repeat="suggestion in model.suggestions">',e+="<legend>{{ suggestion.name }}</legend>",e+='<li ng-repeat="item in suggestion.suggestions track by $index" ng-bind-html="::item.dsp" ng-class="isSelected($index)" ng-click="selectSuggestion(item.act)"></li>',e+="</ul>",e+='<ng-transclude class="show instant-results" ng-show="model.showInstantResults"></ng-transclude>',e+='<div class="filters" ng-if="model.filters.length > 0"><ul><legend>Selected Filters <span class="clear-filters" ng-click="clearFilters()">clear filters</span></legend><li ng-repeat="filter in model.filters track by $index" ng-click="removeFilter(filter)"><div class="token"><span class="token-keyword">{{ filter.keyword || filter.field }}: </span><span class="token-value">{{ filter.val.dsp }}</span><span class="icon-cancel remove"></span></div></li></ul></div>',e+="</div>",e+="</div>",e+='</div><div class="label">',e+='<button type="button" class="tk-stl-button tk-stl-button" ng-click="search(model.query)">'+d+"</button>",e+="</div></div>"}};return a}angular.module("lightning").directive("searchTypeahead",a)}(),function(){"use strict";function a(){var a={restrict:"E",scope:{},replace:!0,controller:["$scope","$twigkit","$lightningLog","$timeout",function(a,b,c){a.contextPath=b.getContextPath("/"),a.showUser=!0,b.getUser().then(function(b){a.user=b},function(){a.showUser=!1,c.error("SecurityUserActions","Unable to get the user from the API, please check this web service is enabled.")}),a.showList=function(){a.show="show"!=a.show&&"show"},a.closeList=function(){a.show=!1}}],template:function(){var a='<ul class="clearfix tk-stl-sortoptions" ng-show="showUser">';return a+="<li ng-show=\"::user.name != 'anonymous'\">",a+='<a href="javascript:void(0);" class="sortoptions-show" ng-click="showList()">',a+='<span><span><widget:icon icon="user"></widget:icon><span class="pl025em pr025em">{{::user.name}}</span><span class="caret"></span></span>',a+="</a>",a+='<div class="tk-stl-sortoptions-group {{ show }}">',a+='<ul click-outside="closeList()" outside-if-not="sortoptions-show">',a+="<li>",a+='<a ng-href="{{::contextPath}}">Home</a>',a+="</li>",a+="<li>",a+='<a ng-href="{{::contextPath}}logout/">Log out</a>',a+="</li>",a+="</ul>",a+="</div>",a+="</li>",a+="<li ng-show=\"::user.name == 'anonymous'\">",a+='<a ng-href="{{::contextPath}}login/">Log in</a>',a+="</li>",a+="</ul>"}};return a}angular.module("lightning").directive("securityUserActions",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{target:"=",platform:"=",collection:"=?",topic:"=?"},controller:["$scope","$twigkit","$rootScope","$log",function(a,b,c,d){function e(){a.comment={text:null,target:a.target,collection:a.collection,topic:a.topic}}e(),a.submitComment=function(){b.postComment(a.platform,a.comment).then(function(){c.$broadcast("commentAdded_"+a.target),a.form.$setPristine(),e()},function(a){d.error(a)})}}],template:function(){var a='<form name="form" role="form" ng-submit="form.$valid && submitComment()" novalidate="" class="tk-stl-comment-form">';return a+='<div class="tk-stl-group"><textarea name="text" ng-model="comment.text" placeholder="Leave a new note..." required=""></textarea>',a+='<span ng-show="form.text.$dirty && form.text.$error.required">Please enter a comment</span></div>',a+='<div class="tk-stl-group"><button type="submit" class="tk-stl-button tk-stl-button-small" ng-disabled="!form.$valid">Post</button></div>',a+="</form>"}};return a}angular.module("lightning").directive("socialCommentForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,scope:{target:"=",platform:"="},controller:["$scope","$twigkit","$window","$attrs","$log",function(a,b,c,d,e){function f(){b.getComments(a.platform,a.target).then(function(b){a.comments=b.data},function(a){e.error(a)})}var g=this;a.comments=[],a.deleteLabel=null==d.deleteLabel?"Delete":d.deleteLabel,a.show=parseInt(d.show)?parseInt(d.show):2,a.limitTo=a.show,a.showMore=parseInt(d.showMore)?parseInt(d.showMore):4,a.showMoreLabel=null==d.showMoreLabel?"Show more comments":d.showMoreLabel,a.showLessLabel=null==d.showLessLabel?"Show fewer":d.showLessLabel,a.defaultDeleteMessage=d.defaultDeleteMessage||"Are you sure you want to remove this comment?",a.emptyText=null==d.emptyText?"":d.emptyText,a.showAvatars="false"==d.avatars?"tk-stl-hide-avatars":"",f(),g.getComments=f,a.deleteComment=function(d){var g=c.confirm(a.defaultDeleteMessage);g&&b.deleteComment(a.platform,d).then(function(){f()},function(a){e.error(a)})},a.showMoreComments=function(){a.limitTo+a.showMore>a.comments.length?a.limitTo=a.comments.length:a.limitTo+=a.showMore},a.showLessComments=function(){a.limitTo-a.showMore<a.show?a.limitTo=a.show:a.limitTo=a.limitTo-a.showMore},a.$on("commentAdded_"+a.target,function(){f()})}],template:function(a,b){var c='<ol class="tk-stl-comment-list" ng-class="::showAvatars">';return c+='<li ng-repeat="comment in comments | limitTo:limitTo" class="tk-stl-comment">',c+='<a class="avatar"></a>',c+='<div class="content">',c+='<a class="author">{{::comment.creator.full_name}} ',b.format=b.format||"relative",c+='<div class="metadata"><span class="date" ng-if="::comment.created">{{::comment.created | dateFormat:\''+b.format+"'}}</span></div>",c+="</a>",c+='<p class="message">{{::comment.text}}</p>',c+='<div class="actions"><a class="del" href="javascript:void(0);" ng-click="deleteComment(comment.id)">{{::deleteLabel}}</a></div>',c+="</div>",c+="</li>",c+='<li class="empty-message" ng-show="comments.length == 0">{{::emptyText}}</li>',c+='<li class="more-less-links" style="" ng-show="comments.length != 0 && comments.length > show">',c+='<a class="less-link" href="javascript:void(0);" ng-if="limitTo > show" ng-click="showLessComments()">{{::showLessLabel}} </a>',c+='<a class="more-link" href="javascript:void(0);" ng-if="limitTo < comments.length" ng-click="showMoreComments()">{{::showMoreLabel}}</a>',c+="</li>",c+="</ol>"}};return a}angular.module("lightning").directive("socialCommentList",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){var i={restrict:"E",transclude:!0,scope:{infiniteScrolling:"@"},replace:!0,require:"^^tableResultList",link:function(i,j,k,l,m){function n(){z.unbind("scroll",o),null!=w&&w.remove(),null!=x&&x.remove()}function o(){if(!i.loading&&!i.disabled){null!=x&&x.remove();var a=z[0].innerHeight,b=j[0].offsetTop+j[0].offsetHeight,c=a+(z[0].scrollY||z[0].pageYOffset),d=b-c,e=d-400<=0;if(e){i.loading=!0;var f=angular.element(j.find("tr")[0]).children().length;w=angular.element('<tfoot><tr><td colspan="'+f+'"><div class="tk-stl-circle-loader tk-stl-xs"></div></td></tr></tfoot>'),j.after(w),p()}}}function p(){i.platform=d.getPlatform(k.platform);var g=h.getQueryAsHttpParams(k.query),l=b.getParams(u,g);return void 0!=l.searchParams.p&&l.searchParams.p>v?(l.searchParams.p=l.searchParams.p+1,v=l.searchParams.p):(v+=1,l.searchParams.p=v),l.searchParams.p>i.lastPage?void i.$evalAsync(function(){w.remove(),i.loading=!1,i.disabled=!0;var a=angular.element(j.find("tr")[0]).children().length;x=angular.element('<tfoot><tr><td colspan="'+a+'" class="tk-stl-text-center"><p><strong>All results loaded</strong></p></td></tr></tfoot>'),j.after(x)}):void c.search(l.query,i.platform,l.searchParams).then(function(b){u=!0;for(var c=0;c<b.data.results.length;c++){if(t){var d=i.$new(!0);d.result=b.data.results[c].result;var g=a.render(m,j,d);y.push({elem:g,scope:d})}i.response.results.push(b.data.results[c])}i.lastPage=b.data.hits.act[1]/b.data.query.rpp,b.data.hits.act[1]%b.data.query.rpp>0&&(i.lastPage+=1),i.lastPage=Math.floor(i.lastPage),f.$broadcast("update_last_result",{newResults:b.data.results.length,newTotal:b.data.hits.act[1]}),i.loading=!1,w.remove(),e(function(){q()},0)},function(){u=!0,i.loading=!1,w.remove()})}function q(){if("true"==i.infiniteScrolling&&null!=i.query){var a=document.body.scrollHeight>window.outerHeight,b=document.body.currentStyle||window.getComputedStyle(document.body,"");a="visible"==b.overflow||"visible"==b.overflowY||a&&"auto"==b.overflow||a&&"auto"==b.overflowY,a||p()}}function r(){if(v=1,i.disabled=!1,0!=i.response.hits.act[1]&&(i.lastPage=i.response.hits.act[1]/i.response.query.rpp,i.response.hits.act[1]%i.response.query.rpp>0&&(i.lastPage+=1),i.lastPage=Math.floor(i.lastPage)),a.remove(y,function(){y=[]}),t){j.empty();var b;for(b=0;b<i.response.results.length;b++){var c=i.$new(!0);c.result=i.response.results[b].result;var d=a.render(m,j,c);y.push({elem:d,scope:c})}}}var s,t,u,v,w,x,y=[],z=angular.element(g);if(null!=l){if(s=l.getResponseName(),t=a.hasChildren(m),null!=s)i.response=b.getResponse(s),i.$on(s+"_updated",function(a,b){i.response=b,null!=i.response&&r()});else{var A=l.getResults();null!=A&&(i.response=b.createResponseFromResults(A)),i.$on("table_results_updated",function(){var a=l.getResults();null!=a?i.response=b.createResponseFromResults(a):i.response=b.createResponseFromResults([]),null!=i.response&&r()})}null!=i.response&&r()}"true"==i.infiniteScrolling&&null!=k.query&&(z.bind("scroll",o),i.$on("$destroy",function(){n()}))},template:function(){return"<tbody></tbody>"}};return i}angular.module("lightning").directive("tableBody",a),a.$inject=["$util","ResponseService","$twigkit","PlatformService","$timeout","$rootScope","$window","QueryService"]}(),function(){"use strict";function a(a,b,c){var d={restrict:"E",scope:{url:"@",target:"@",defaultValue:"@"},transclude:!0,replace:!0,link:function(d,e,f){function g(a){var b=e[0].cellIndex;if(null!=a[0].parentElement&&(a=angular.element(a[0].parentElement),null!=a)){var c=a.find("thead");if(1!=c.length)g(a);else{var f=angular.element(c[0]).children()[0],h=angular.element(angular.element(angular.element(f).children([0])));d.dataTitle=angular.element(h)[b].innerText}}}d.$watch("$parent.result",function(b){if(b){if(d.result=b,null!=f.name){if(d.displayValues=[void 0],null!=d.result.fields[f.name]&&null!=d.result.fields[f.name].val&&d.result.fields[f.name].val.length>0&&(d.displayValues=d.result.fields[f.name].val),1==d.displayValues.length&&null!=f.separator){var c;c=null==d.displayValues[0].dsp?d.displayValues[0].split(f.separator):d.displayValues[0].dsp.split(f.separator);var h=a("actualValue")(d.displayValues[0]);d.displayValues=[],angular.forEach(c,function(a){d.displayValues.push({act:h,dsp:a})})}var i=angular.copy(d.displayValues);d.displayValues=[],angular.forEach(i,function(b,c){if(void 0==b&&null==d.defaultValue);else if(f.show!=-1&&c>=f.show);else{var e={};e.act="string"==typeof b?b:a("actualValue")(b),e.dsp="string"==typeof b?b:a("displayValue")(b),e.ngDsp=e.dsp,null!=d.defaultValue&&(null==e.dsp||angular.isString(e.dsp)&&""==e.dsp.trim())&&(e.ngDsp=d.defaultValue),f.dateFormat?e.ngDsp=a("dateFormat")(e.dsp,f.dateFormat):f.numberFormat&&(e.ngDsp=a("numberFormat")(e.dsp,f.numberFormat)),d.displayValues[c]=e}})}else d.displayValues=[""];f.urlField&&d.result.fields[f.urlField]&&(d.urlField=d.result.fields[f.urlField],d.urlField=a("actualValue")(d.urlField.val)),g(e)}}),d.addFilter=function(b){c.addFilterToUrl(f.name,a("actualValue")(b),b.ngDsp,!0,!1)},d.changePage=function(){b.path(f.action)},d.changePageAndFilter=function(d){c.addFilterToUrl(f.name,a("actualValue")(d),d.ngDsp,!1,!1),b.path(f.action)}},template:function(a,b){var c='<td data-title="{{dataTitle}}">';return c+='<p ng-repeat="value in displayValues">',b.url?(c+='<a ng-href="{{::url}}" href="javascript:void(0);"',null!=b.target&&(c+='target="{{::target}}"'),c+=">"):b.query&&b.action?c+='<a href="javascript:void(0);" ng-click="changePageAndFilter(value)">':b.action?c+='<a href="javascript:void(0);" ng-click="changePage()">':b.query?c+='<a href="javascript:void(0);" ng-click="addFilter(value)">':b.urlField&&(c+='<a href="{{::urlField}}"',null!=b.target&&(c+='target="{{::target}}"'),c+=">"),null!=b.prefix&&(c+='<span class="prefix">'+b.prefix+"</span>"),c+="{{::value.ngDsp}}",null!=b.suffix&&(c+='<span class="prefix">'+b.suffix+"</span>"),c+='<span class="pl025em" ng-transclude></span>',(b.urlField||b.url||b.query)&&(c+="</a>"),c+="</p>",c+="</td>"}};return d}angular.module("lightning").directive("tableCell",a),a.$inject=["$filter","$location","$lightningUrl"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,template:function(){return"<thead><tr ng-transclude></tr></thead>"}};return a}angular.module("lightning").directive("tableHeader",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{label:"@"},transclude:!0,replace:!0,link:function(b,c,d){function e(){var c=a.getUrlParameter("s","");b.selectedSort=c.length>1?c.slice(1,c.length):null,b.selectedSort=b.selectedSort==d.name,b.selectedOrder=c.length>1?c.slice(0,1):null}null==b.label&&(b.label=d.name),e(),b.$on("paramChange",function(a,b){"s"==b&&e()}),b.sort=function(){a.setUrlParameter("p",1);var c="+"==b.selectedOrder?"-":"+";a.setUrlParameter("s",c+""+d.name,!0)}},template:function(a,b){return"true"==b.sort&&null!=b.name?"<th ng-click=\"sort()\" class=\"sortable\" ng-class=\"{'sort-asc': selectedSort && selectedOrder == '+', 'sort-desc': selectedSort && selectedOrder == '-'}\"><ng-transclude>{{label}}</ng-transclude></th>":"<th><ng-transclude>{{label}}</ng-transclude></th>"}};return b}angular.module("lightning").directive("tableHeaderCell",a),a.$inject=["$lightningUrl"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,replace:!0,scope:{results:"=?"},controller:["$scope","$attrs",function(a,b){function c(){return b.response}function d(){return a.results}var e=this;e.getResponseName=c,e.getResults=d,a.$watch("results",function(){a.$broadcast("table_results_updated")})}],template:function(){return'<div class="tbl-wrapper"><table ng-transclude></table></div>'}};return a}angular.module("lightning").directive("tableResultList",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,replace:!0,scope:{},link:function(b,c,d,e,f){c.on("$destroy",function(){b.$destroy()}),b.result=void 0==b.result?b.$parent.result:b.result,a.render(f,c,b)},template:function(){return"<tr></tr>"}};return b}angular.module("lightning").directive("tableRow",a),a.$inject=["$util"]}(),function(){"use strict";function a(a,b,c,d){var e={restrict:"E",replace:!0,scope:{},transclude:!0,link:function(e,f,g){var h=g.task||"",i=b.getContextPath(""),j=i+"twigkit/api/tasks/"+h,k=!1;0==h.length?console.warn("Task ID needs to be set for task form."):e.createTask=function(){if(!k){k=!0,e.classes="submitting";for(var b={},h=f.find("input"),i=0;i<h.length;i++)["radio","checkbox"].indexOf(h[i].type)>-1&&0==h[i].checked||(b[h[i].name]?"object"==typeof b[h[i].name]?b[h[i].name].push(h[i].value):b[h[i].name]=[b[h[i].name],h[i].value]:b[h[i].name]=h[i].value);a({method:"POST",url:j,headers:{"Content-Type":"application/json"},data:b}).then(function(){k=!1,g.hasOwnProperty("redirect")?c.location.href=g.redirect:e.classes="success",d.$emit("taskForm.success",b)},function(){k=!1,e.classes="error",d.$emit("taskForm.error",b)})}}},template:function(){return'<form name="taskForm" class="tk-task-form" ng-class="classes" ng-submit="createTask()" ng-transclude></form>';
}};return e}angular.module("lightning").directive("taskForm",["$http","$twigkit","$window","$rootScope",a])}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{},transclude:!0,controllerAs:"TaskList",bindToController:!0,controller:["$scope","$http","$timeout","$twigkit","$attrs",function(a,b,c,d,e){function f(){return b.get(j+"twigkit/api/tasks").then(function(a){i.tasks=a.data,0==i.tasks.length&&l++},function(){m++,k=3e3})}function g(a){"function"==typeof a&&(h=c(function(){a(),m<10&&(k=l>0?k*l:1e4,k=k>1e4?1e4:k,g(a))},k))}var h,i=this,j=d.getContextPath(""),k=e.interval||1e3,l=0,m=0;i.emptyText=e.hasOwnProperty("emptyText")?e.emptyText:"You have no tasks.";var n={NOT_STARTED:"Not Started",RUNNING:"Running",STOPPED:"Stopped",ERROR:"Error",COMPLETE:"Completed"};i.getStatusTranslation=function(a){return n[a]||"Unknown"},i.tasks=[],f(),"false"!=k&&g(f),a.$on("$destroy",function(){c.cancel(h)}),i.showStopAction=function(a){return"RUNNING"==a.status},i.showStartAction=function(a){var b=["COMPLETE","STOPPED","ERROR","NOT_STARTED"];return b.indexOf(a.status)>-1},i.stop=function(a){a&&a.id&&b.post(j+"twigkit/api/tasks/"+a.id+"/stop")["finally"](function(){f()})},i.start=function(a){a&&a.id&&b.post(j+"twigkit/api/tasks/"+a.id+"/restart")["finally"](function(){f()})},i["delete"]=function(a){a&&a.id&&b["delete"](j+"twigkit/api/tasks/"+a.id)["finally"](function(){f()})},i.getExpiryClass=function(a){var b=moment(a),c=moment(),d=b.diff(c);switch(!0){case d<=0:return"expired";case d<36e5:return"minute";case d<864e5:return"hour";default:return""}}}],template:function(a,b){var c=b.dateFormat||"medium",d='<ul class="tk-task-list"><li ng-repeat="task in TaskList.tasks track by $index" ng-class="task.status" ng-inject><div class="icon-wrapper"><i class="icon"></i></div><layout:grid class="tk-task-attributes"><layout:block md="3-4" xl="4-5"><h3 class="title" ng-if="task.attributes.url && task.display"><a href="{{ task.attributes.url }}">{{ task.display }} - {{ task.attributes.exportName }}</a></h3><h3 class="title" ng-if="task.display && !task.attributes.url">{{ task.display }} - {{ task.attributes.exportName }}</h3><p class="attribute"><span class="label">Status:</span> {{ TaskList.getStatusTranslation(task.status) }}</p><p class="attribute" ng-if="task.started"><span class="label">Started: </span> {{ task.started | dateFormat:"'+c+'" }}</p><p class="attribute" ng-if="task.finished"><span class="label">Finished: </span> {{ task.finished | dateFormat:"'+c+'" }}</p>';return"true"==b.showExpiry&&(d+='<p class="attribute" ng-if="task.attributes.expiry_date" ng-class="TaskList.getExpiryClass(task.attributes.expiry_date)"><span class="label">Expiry: </span> {{ task.attributes.expiry_date | dateFormat:"'+c+'" }}</p>'),d+='</layout:block><layout:block md="1-4" xl="1-5" class="actions"><a href="javascript:void(0)" ng-click="TaskList.stop(task)" ng-if="TaskList.showStopAction(task)">Stop</a><a href="javascript:void(0)" ng-click="TaskList.start(task)"  ng-if="TaskList.showStartAction(task)">Restart</a><a href="javascript:void(0)" ng-click="TaskList.delete(task)" class="delete">Delete</a></layout:block></layout:grid></li><li ng-if="TaskList.tasks.length == 0" class="empty-task-list">{{ TaskList.emptyText }}</li></ul>'}};return a}angular.module("lightning").directive("taskList",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{},controller:["$scope","$localStorage","$attrs","$log","TogglePanesService",function(a,b,c,d,e){e.onTogglePane(c.panes,function(b){a.isActive(b)||a.togglePane(b)},a),a.togglePane=function(a){var b=angular.element(document.querySelector("#"+c.panes)),e=b.children()[a];if(null==e)return void d.warn("Can't find pane number "+(a+1)+" for "+c.panes);e=angular.element(e);var f=e.controller("togglePane");return null==f?void d.warn("Can't find pane number "+(a+1)+" for "+c.panes):void f.togglePane()},a.isActive=function(a){var b=angular.element(document.querySelector("#"+c.panes)),e=b.children()[a];if(null==e)return void d.warn("Can't find pane number "+(a+1)+" for "+c.panes);e=angular.element(e);var f=e.controller("togglePane");if(null==f)return void d.warn("Can't find pane number "+(a+1)+" for "+c.panes);var g=f.getShow();return g?"active":""}}],template:function(a,b){var c=b.labels.split(","),d='<ul class="tk-toggle-panes-controls">';return angular.forEach(c,function(a,b){d+="<li>",d+='<a href="javascript:void(0);" ng-click="togglePane('+b+')" ng-class="isActive('+b+')">'+a.trim()+"</a>",d+="</li>"}),d+="</ul>"}};return a}angular.module("lightning").directive("toggleControls",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{},transclude:!0,controller:["$scope","$element","$localStorage","$attrs","$timeout",function(a,b,c,d,e){function f(){a.show=!a.show;var b=c.togglePanes||{};if(0==a.panesModel.allowMultiple)b[a.panesModel.id]={active:1==a.show?a.panesModel.key:null},c.togglePanes=b,k.hideChildren(a.panesModel.key);else{if(1==a.show)null!=b[a.panesModel.id]&&angular.isArray(b[a.panesModel.id].active)?b[a.panesModel.id].active.push(a.panesModel.key):b[a.panesModel.id]={active:[a.panesModel.key]};else if(null!=b[a.panesModel.id]&&angular.isArray(b[a.panesModel.id].active)){var d=b[a.panesModel.id].active.indexOf(a.panesModel.key);d!=-1&&b[a.panesModel.id].active.splice(d,1)}c.togglePanes=b}e(function(){a.$broadcast("highchartsng.reflow")},0)}function g(b){a.show=b}function h(){return a.show}var i=this,j=b.parent(),k=j.controller("togglePanes");a.show=!1,a.togglePane=f,i.togglePane=f,i.setToggle=g,i.getShow=h,a.setDefault=function(){a.panesModel=k.getPanesModel(angular.element(b));var e=c.togglePanes;if(e&&e[a.panesModel.id]){var f=e[a.panesModel.id];angular.isArray(f.active)?a.show=f.active.indexOf(a.panesModel.key)!=-1:f.active==a.panesModel.key?a.show=!0:a.show=!1}else"true"==d.visible&&(a.show=!0)},a.setDefault()}],link:{post:function(b,c,d){var e=c.parent();d.hasDirectParent=e.controller("togglePanes"),d.hasDirectParent||a.warn(c.html()+" is not directly in a <toggle:panes>")}},template:function(){return'<div class="tk-toggle-pane" ng-transclude ng-class="{active: show}"></div>'}};return b}angular.module("lightning").directive("togglePane",a),a.$inject=["$log"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:!0,controller:["$element","$attrs",function(a,b){function c(a){return{key:d(a),id:b.id,allowMultiple:b.allowMultiple}}function d(b){var c;return angular.forEach(a.children(),function(a,d){a.isEqualNode(b[0])&&(c=d)}),c}function e(b){angular.forEach(a.children(),function(a,c){if(b!=c){var d=angular.element(a),e=d.controller("togglePane");null!=e&&e.setToggle(!1)}})}b.allowMultiple="true"==b.allowMultiple;var f=this;f.getPanesModel=c,f.getElementNumber=d,f.hideChildren=e}],link:{pre:function(a,b,c,d,e){e(a,function(a){b.addClass("tk-toggle-panes"),b.append(a)})}}};return a}angular.module("lightning").directive("togglePanes",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){var h={restrict:"E",transclude:!0,scope:{fields:"@"},replace:!0,controller:["$scope",function(a){function b(){return a.fields}var c=this;c.getFields=b}],link:function(h,i,j){function k(a){s=j.type||"link",u=null;var b;a.srcElement?b=a.srcElement:a.target&&(b=a.target),l(b,a)}function l(a,b){null!=a&&"A"==a.nodeName?m(a,b):null!=a.parentElement&&l(a.parentElement,b)}function m(f){var i={url:f.href,label:f.innerText};if(null!=j.query){var k=a.getQueryAsHttpParams(j.query);k&&(i.query=k)}if(p(f),u){if(n(f),null!=s&&(i.type=s),null!=r&&(i.id=r),null!=t&&(i.fields=t),null!=q){var l=c.getUrlParameter("p","1");null!=i.query&&null!=i.query.p&&(l=i.query.p),i.pos=q,"1"==l?i.offset=0:null!=i.query&&null!=i.query.rpp&&(i.offset=(l-1)*i.query.rpp)}if(o(f),v=v||j.response){var m=g.getResponse(v,"facts");if(_.has(m,"facts.tracking[0]")){var x=m.facts.tracking[0];for(var y in x)i[y]=x[y]}}null!=h.platform&&(i.platform=h.platform.id);for(var z in j)j.hasOwnProperty(z)&&!angular.isObject(j[z])&&null!=j[z]&&z.charAt(0).match(/[a-z]/i)&&"ng"!=z.substring(0,2)&&w.indexOf(z)==-1&&(i[z]=j[z]);var A=d.getContextPath("/"),B=A+"twigkit/api/activity/clicks";b.post(B,i).then(function(){},function(a){e.error("TrackClicks","Error posting click data to server - "+a.status+" - "+a.statusText)})}}function n(a){if(a.classList.contains("result")&&"LI"==a.nodeName){var b=a.parentElement.children;if(s=j.type||"result",q=Array.prototype.indexOf.call(b,a)-1,r=angular.element(a).attr("result-id"),h.fields){t={};for(var c=h.fields.split(","),d=0;d<c.length;d++){var e=c[d],g=f("formatAsCssName")(e),i=angular.element(a).attr("track-field-"+g);i&&(t[e]=JSON.parse(i))}}}else null!=a.parentElement?n(a.parentElement):(q=null,r=null,t=null)}function o(a){a.classList.contains("result-list")&&"OL"==a.nodeName?v=angular.element(a).attr("response"):null!=a.parentElement?o(a.parentElement):v=null}function p(a){null!=a&&a.hasAttribute("no-tracking")?u=!1:null!=a.parentElement?p(a.parentElement):u=!0}var q,r,s,t,u,v,w=["url","label","type","query","offset","pos","fields","class","id","response"];null==h.clickRendered&&(h.clickRendered=!0,i.bind("click",function(a){k(a)})),i.on("$destroy",function(){i.unbind("click",k)})},template:function(){return"<div ng-transclude></div>"}};return h}angular.module("lightning").directive("trackClicks",a),a.$inject=["QueryService","$http","$lightningUrl","$twigkit","$lightningLog","$filter","ResponseService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){var j={restrict:"E",scope:{"var":"@",host:"@",pageTitle:"@",path:"@",query:"@"},link:function(j){function k(){var a=d.get("tk.session");void 0===a&&(a=l());var b=new Date,c=new Date(b.getFullYear(),b.getMonth(),b.getDay(),b.getHours(),b.getMinutes()+5);d.put("tk.session",a,{expires:c})}function l(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,l)}function m(){n=null,null!=j.query&&(n=i.getQueryAsHttpParams(j.query)),null==n&&(n=angular.copy(a.search()));var d=f.getContextPath("/"),k=(j.host?j.host:d)+"twigkit/api/activity/queries",l={path:null!=j.path?j.path:a.path(),pageTitle:null!=j.pageTitle?j.pageTitle:g.document.title,query:n};c.post(k,l).then(function(a){n.id=a.data.id,e.setQuery(j["var"],n),b.$$childTail[j["var"]]=n},function(){h.error("TrackQuery","Unable to get id for query.")})}var n;null==j["var"]&&(j["var"]="queryToken"),m(),j.query?j.$on("query_"+j.query+"_updated",function(){k(),m()}):j.$on("reloadSearch",function(){k(),m()})}};return j}angular.module("lightning").directive("trackQuery",a),a.$inject=["$location","$rootScope","$http","$cookies","QueryIdService","$twigkit","$window","$lightningLog","QueryService"]}(),function(){"use strict";function a(){var a={restrict:"A",scope:!1,controller:["$rootScope",function(a){this.triggerEvent=function(b){a.$broadcast(b)}}],link:function(a,b,c,d){b.bind("click",function(a){a.preventDefault(),setTimeout(function(){d.triggerEvent(c.triggerEvent)},c.triggerDelay||0)})}};return a}angular.module("lightning").directive("triggerEvent",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{percentage:"="},template:function(){return'<div class="tk-stl-progress-bar"><div class="tk-stl-progress-bar-fill" style="width: {{ percentage }}%"></div></div>'}};return a}angular.module("lightning").directive("progressBar",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{percentage:"="},template:function(a,b){for(var c=b.fillClass||"",d=b.percentageClass||"",e='<div class="tk-stl-radial-progress" data-progress="{{ percentage }}"><div class="circle"><div class="mask full"><div class="fill '+c+'"></div></div><div class="mask half"><div class="fill '+c+'"></div><div class="fill fix '+c+'"></div></div><div class="shadow"></div></div><div class="inset"><div class="percentage '+d+'"><div class="numbers"><span>-</span>',f=0;f<=100;f++)e+="<span>"+f+"%</span>";return e+="</div></div></div>"}};return a}angular.module("lightning").directive("progressRadial",a)}(),function(){"use strict";function a(){var a={};a.instances={},a.add=function(b,d,e,f){if(d=d||!1,!d)return"Error: no carousel name specified";b=b||0;var g=a.instances[d]||!1;if(g)return"Error: carousel instance already exists";var h=new c(b,e,f);return a.instances[d]=h,h},a.get=function(b){var c=a.instances[b]||!1;return c?c:"Error: carousel with name '"+b+"' does not exist"},a.remove=function(b){delete a.instances[b]},a.getRandomName=function(){for(var c=b();a.instances[c];)c=b();return c};var b=function(){var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";return new Array(16).join().split(",").map(function(){return a.charAt(Math.floor(Math.random()*a.length))}).join("")},c=function(a,b,c){c=c||{},"undefined"==typeof c.looping&&(c.looping=!0);var d=this;this.slidesCount=a,this.currentSlide=0,this.onSlideChangeCallbacks=[],this.toIndex=function(a,c){c=c||!1,this.currentSlide=a%this.slidesCount,angular.forEach(this.onSlideChangeCallbacks,function(a){"function"==typeof a&&a(d.currentSlide,c)}),setTimeout(function(){b.$apply()},0)},this.next=function(){var a=this.currentSlide+1,b=!1;return a>this.slidesCount-1&&(c.looping?(a=0,b="right"):a=this.slidesCount-1),this.toIndex(a,b),a},this.previous=function(){var a=this.currentSlide-1,b=!1;return a<0&&(c.looping?(a=this.slidesCount-1,b="left"):a=0),this.toIndex(a,b),a},this.onSlideChange=function(a){return this.onSlideChangeCallbacks.push(a),this.onSlideChangeCallbacks.indexOf(a)},this.unbindOnSlideChangeCallback=function(a){"undefined"!=typeof this.onSlideChangeCallbacks[a]&&this.onSlideChangeCallbacks.splice(a,1)}};return a}function b(a,b,c,d){function e(){return"ontouchstart"in document.documentElement}var f=25;return{restrict:"AE",replace:!0,scope:{carouselWatch:"="},link:function(g,h,i){function j(){w=angular.element(u[0].outerHTML),x=angular.element(u[u.length-1].outerHTML)}function k(){w=angular.element('<slide class="empty"></slide>'),x=angular.element('<slide class="empty"></slide>')}function l(){if(u){for(var a='<div class="pagination">',c=0;c<u.length;c++)a+='<span class="dot" ng-class="{active: currentSlide == '+c+'}" ng-click="toIndex('+c+')"></span>';a+="</div>";var d=b(a),e=d(g);h.append(e)}}var m,n=!1,o=!1,p=!1,q=!1;n="undefined"!=typeof i.autoPlay&&parseInt(i.autoPlay,10)>0&&parseInt(i.autoPlay,10),p=i.hasOwnProperty("randomStart"),q="false"!==i.loop;var r="false"!==i.controls,s=!!i.hasOwnProperty("height")&&i.height,t=i.hasOwnProperty("pagination");g.currentSlide=0;var u,v,w,x,y,z,A;y=h.find("slidecontainer");var B=function(){h.addClass("tk-stl-carousel"),h.addClass(e()?"carousel-touch":"carousel-no-touch");var b=!1,c=!1;A&&(b=a.get(A).currentSlide,c=a.get(A).onSlideChangeCallbacks,a.remove(A));var d=function(){var a=angular.element(h[0].querySelectorAll(".carousel-slide-copy"));a.length>0&&a.remove()};if(d(),u=h.find("slide"),u.length>0){A=i.carouselName||a.getRandomName(),v=a.add(u.length,A,g,{looping:q}),angular.forEach(c,function(a){v.onSlideChange(a),v.unbindOnSlideChangeCallback(0)});var f=function(){d(),u=h.find("slide"),q?j():k(),w.addClass("carousel-slide-copy"),x.addClass("carousel-slide-copy"),y.append(w),y.prepend(x),y.addClass("carousel-ignore-first-slide")};f();var o=function(a,b){var c=a+1;"left"===b?c=0:"right"===b&&(c=u.length+1),s||(y.css("height","auto"),h.css("height",u[a].offsetHeight)),D(c,!0,function(){"left"===b?D(u.length,!1):"right"===b&&D(1,!1)}),C(),f()};if(v.onSlideChange(o),b!==!1&&v.currentSlide!==b&&(o(v.currentSlide,!1),v.toIndex(b)),p&&(m=Math.floor(Math.random()*v.slidesCount),v.toIndex(m),g.currentSlide=m),n&&v.slidesCount>=2&&C(),s)h.css("height",s);else{var r=angular.element(u[m||0]),B=r.find("img");B.length>0&&B.bind("load",function(){y.css("height","auto"),h.css("height",u[m||0].offsetHeight)}),y.css("height","auto"),h.css("height",u[m||0].offsetHeight)}t&&l()}y[0]&&(z=new Hammer.Manager(y[0]),z.add(new Hammer.Pan({direction:Hammer.DIRECTION_HORIZONTAL,threshold:0})),z.on("panleft panright",function(a){a.isFinal||G(a.deltaX)}))},C=function(){!n||v.slidesCount<2||(o&&d.cancel(o),o=d(function(){v.next()},n))},D=function(a,b,c){b?y.addClass("carousel-animate"):y.removeClass("carousel-animate");var d="translate(-"+100*a+"%, 0)";y.css({"-webkit-transform":d,"-moz-transform":d,"-ms-transform":d,"-o-transform":d,transform:d}),b&&y.on("transitionend oTransitionEnd webkitTransitionEnd",function(){"function"==typeof c&&c(),y.off("transitionend oTransitionEnd webkitTransitionEnd"),D(v.currentSlide+1,!1)})},E=0,F=0,G=function(a){E=a/F,E=E>1?1:E<-1?-1:E,D(v.currentSlide+1-E,!1)},H=function(){F=y[0].offsetWidth},I=function(){Math.abs(E)>f/100?(E>0?v.previous():v.next(),E=0):(E>0||E<0)&&D(v.currentSlide+1,!0,function(){E=0})},J=e()?"touchstart":"mousedown",K=e()?"touchend":"mouseup";if(c.on(J,H),c.on(K,I),h.on("mouseover",function(){o&&d.cancel(o)}),h.on("mouseout",C),g.prev=function(){v.previous(),g.currentSlide=v.currentSlide},g.next=function(){v.next(),g.currentSlide=v.currentSlide},g.toIndex=function(a){v.toIndex(a),g.currentSlide=v.currentSlide},r&&y.length>0){var L='<div class="carousel-arrow carousel-arrow-left" ng-click="prev()"><span class="icon-angle-left"></span></div>';L+='<div class="div carousel-arrow carousel-arrow-right" ng-click="next()"><span class="icon-angle-right"></span></div>';var M=b(L),N=M(g);h.append(N)}var O=d(B,0);"undefined"!=typeof i.carouselWatch&&g.$watch("carouselWatch",function(){d(B)},!0),g.$on("$destroy",function(){d.cancel(O),h.off("mouseover mouseout"),c.off(J),c.off(K),y.off("transitionend oTransitionEnd webkitTransitionEnd"),v&&(v.onSlideChangeCallbacks=[]),a.remove(A)})}}}angular.module("lightning").factory("Carousel",a).directive("widgetCarousel",["Carousel","$compile","$document","$timeout",b])}(),function(){"use strict";function a(a,b){var c={restrict:"E",replace:!0,scope:{onSet:"&",fromModel:"=?",toModel:"=?"},link:function(c,d,e){function f(){var d=j,f=k;if(e.onSet)c.onSet({fromDate:d,toDate:f});else if(d&&f&&m){var g=b("dateFormat")(d,"yyyy-MM-ddTHH:mm:ss"),h=b("dateFormat")(f,"yyyy-MM-ddTHH:mm:ss");a.removeFiltersFromUrl(m),a.addRangeFilterToUrl(m,g,h,c.displayFrom,c.displayTo,!0)}}function g(){if(m){var d=a.getFiltersFromUrl(m);if(d.length>0)for(var e=0;e<d.length;e++){var f=a.stringToFilter(d[e]);f&&"range"==f.val.act.type&&(j=new Date(f.val.act.from),k=new Date(f.val.act.to),c.fromDate=j,c.displayFrom=b("dateFormat")(f.val.act.from,l),c.displayTo=b("dateFormat")(f.val.act.to,l))}}}function h(){c.fromDate=null,c.displayFrom=null}function i(){c.toDate=null,c.displayTo=null}var j,k,l=e.dateFormat||"medium",m=e.field;c.displayFrom=null,c.displayTo=null,c.fromTimeSet=function(a){j=a,c.displayFrom=b("dateFormat")(a,l),f(),c.showFromPicker=!1},c.toTimeSet=function(a){k=a,c.displayTo=b("dateFormat")(a,l),f(),c.showToPicker=!1},c.toggleFromPicker=function(){c.showToPicker=!1,c.showFromPicker=!c.showFromPicker},c.toggleToPicker=function(){c.showFromPicker=!1,c.showToPicker=!c.showToPicker},c.endDateBeforeRender=function(a,b){if(j){var c=moment(j).subtract(1,a).add(1,"minute");b.filter(function(a){return a.localDateValue()<=c.valueOf()}).forEach(function(a){a.selectable=!1})}},c.$watch("fromModel",function(a){if(a){var b=new Date(a);b?c.fromTimeSet(b):h()}else h()}),c.$watch("toModel",function(a){if(a){var b=new Date(a);b?c.toTimeSet(b):i()}else i()}),g(),c.$on("reloadSearch",g)},template:function(a,b){var c=b.fromPlaceholder||"From Date",d=b.toPlaceholder||"To Date",e=b.fromLabel||"From",f=b.toLabel||"To",g=b.hasOwnProperty("minView")&&b.minView?"datetimepicker-config=\"{minView: '"+b.minView+"'}\"":"",h='<div class="tk-widget-date-range"><div class="tk-from-date"><label>'+e+'</label><input type="text" ng-click="toggleFromPicker()" ng-model="displayFrom" placeholder="'+c+'" readonly="readonly"><widget:datetimepicker ng-model="fromDate" on-set-time="fromTimeSet(newDate)" ng-show="showFromPicker" '+g+'></widget:datetimepicker></div><div class="tk-to-date"><label>'+f+'</label><input type="text" ng-click="toggleToPicker()" ng-model="displayTo" placeholder="'+d+'" readonly="readonly"><widget:datetimepicker ng-model="toDate" on-set-time="toTimeSet(newDate)" ng-show="showToPicker" before-render="endDateBeforeRender($view, $dates, $leftDate, $upDate, $rightDate)" '+g+"></widget:datetimepicker></div></div>";return h}};return c}angular.module("lightning").directive("widgetDateRange",["$lightningUrl","$filter",a])}(),function(){"use strict";function a(a,b){function c(c,e,f){function g(a,b,d){if(d&&(d.stopPropagation(),d.preventDefault()),a&&b.utcDateValue>-(1/0)&&b.selectable&&v[a]){var e=v[a](b.utcDateValue),f=[];if(e.weeks)for(var g=0;g<e.weeks.length;g+=1)for(var h=e.weeks[g],i=0;i<h.dates.length;i+=1){var j=h.dates[i];f.push(j)}c.beforeRender({$view:e.currentView,$dates:e.dates||f,$leftDate:e.leftDate,$upDate:e.previousViewDate,$rightDate:e.rightDate}),c.data=e}}function h(a){for(var b=moment.utc(a).startOf("year"),c=10*parseInt(b.year()/10,10),e=moment.utc(o(a)).subtract(1,"year").startOf("year"),f=p(t.$modelValue,"YYYY"),g={currentView:"year",nextView:"year"===u.minView?"setTime":"month",previousViewDate:new d({utcDateValue:null,display:c+"-"+(c+9)}),leftDate:new d({utcDateValue:moment.utc(e).subtract(9,"year").valueOf()}),rightDate:new d({utcDateValue:moment.utc(e).add(11,"year").valueOf()}),dates:[]},h=0;h<12;h+=1){var i=moment.utc(e).add(h,"years"),j={utcDateValue:i.valueOf(),display:i.format("YYYY"),past:i.year()<c,future:i.year()>c+9,active:i.format("YYYY")===f};g.dates.push(new d(j))}return g}function i(a){for(var b=moment.utc(a).startOf("year"),c=o(a),e=p(t.$modelValue,"YYYY-MMM"),f={previousView:"year",currentView:"month",nextView:"month"===u.minView?"setTime":"day",previousViewDate:new d({utcDateValue:c.valueOf(),display:b.format("YYYY")}),leftDate:new d({utcDateValue:moment.utc(b).subtract(1,"year").valueOf()}),rightDate:new d({utcDateValue:moment.utc(b).add(1,"year").valueOf()}),dates:[]},g=0;g<12;g+=1){var h=moment.utc(b).add(g,"months"),i={utcDateValue:h.valueOf(),display:h.format("MMM"),active:h.format("YYYY-MMM")===e};f.dates.push(new d(i))}return f}function j(a){for(var b=moment.utc(a),c=moment.utc(b).startOf("month"),e=moment.utc(b).startOf("year"),f=moment.utc(b).endOf("month"),g=moment.utc(c).subtract(Math.abs(c.weekday()),"days"),h=p(t.$modelValue,"YYYY-MMM-DD"),i={previousView:"month",currentView:"day",nextView:"day"===u.minView?"setTime":"hour",previousViewDate:new d({utcDateValue:e.valueOf(),display:c.format("YYYY-MMM")}),leftDate:new d({utcDateValue:moment.utc(c).subtract(1,"months").valueOf()}),rightDate:new d({utcDateValue:moment.utc(c).add(1,"months").valueOf()}),dayNames:[],weeks:[]},j=0;j<7;j+=1)i.dayNames.push(moment.utc().weekday(j).format("dd"));for(var k=0;k<6;k+=1){for(var l={dates:[]},m=0;m<7;m+=1){var n=moment.utc(g).add(7*k+m,"days"),o={utcDateValue:n.valueOf(),display:n.format("D"),active:n.format("YYYY-MMM-DD")===h,past:n.isBefore(c),future:n.isAfter(f)};l.dates.push(new d(o))}i.weeks.push(l)}return i}function k(a){for(var b=moment.utc(a).startOf("day"),c=moment.utc(b).startOf("month"),e=p(t.$modelValue,"YYYY-MM-DD H"),f={previousView:"day",currentView:"hour",nextView:"hour"===u.minView?"setTime":"minute",previousViewDate:new d({utcDateValue:c.valueOf(),display:b.format("ll")}),leftDate:new d({utcDateValue:moment.utc(b).subtract(1,"days").valueOf()}),rightDate:new d({utcDateValue:moment.utc(b).add(1,"days").valueOf()}),dates:[]},g=0;g<24;g+=1){var h=moment.utc(b).add(g,"hours"),i={utcDateValue:h.valueOf(),display:h.format("LT"),active:h.format("YYYY-MM-DD H")===e};f.dates.push(new d(i))}return f}function l(a){for(var b=moment.utc(a).startOf("hour"),c=moment.utc(b).startOf("day"),e=p(t.$modelValue,"YYYY-MM-DD H:mm"),f={previousView:"hour",currentView:"minute",nextView:"setTime",previousViewDate:new d({utcDateValue:c.valueOf(),display:b.format("lll")}),leftDate:new d({utcDateValue:moment.utc(b).subtract(1,"hours").valueOf()}),rightDate:new d({utcDateValue:moment.utc(b).add(1,"hours").valueOf()}),dates:[]},g=60/u.minuteStep,h=0;h<g;h+=1){var i=moment.utc(b).add(h*u.minuteStep,"minute"),j={utcDateValue:i.valueOf(),display:i.format("LT"),active:i.format("YYYY-MM-DD H:mm")===e};f.dates.push(new d(j))}return f}function m(a){var b=new Date(a),d=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds());switch(u.modelType){case"Date":break;case"moment":d=moment(d);break;case"milliseconds":d=a;break;default:d=moment(d).format(u.modelType)}var e=t.$modelValue;return t.$setViewValue(d),u.dropdownSelector&&jQuery(u.dropdownSelector).dropdown("toggle"),c.onSetTime({newDate:d,oldDate:e}),v[u.startView](a)}function n(){c.changeView(u.startView,new d({utcDateValue:r(t.$viewValue)}))}function o(a){var b=10*parseInt(moment.utc(a).year()/10,10);return moment.utc(a).year(b).startOf("year")}function p(a,b){return a?q(a).format(b):""}function q(a){return moment(a,angular.isString(a)?u.parseFormat:void 0)}function r(a){var b=new Date;if(a){var c=q(a);if(!c.isValid())throw"Invalid date: "+a;b=c.toDate()}return b.getTime()-6e4*b.getTimezoneOffset()}function s(){var d={};f.datetimepickerConfig&&(d=c.$parent.$eval(f.datetimepickerConfig));var e=angular.extend({},a,d);return b.validate(e),e}var t=e.controller("ngModel"),u=s();c.screenReader=u.screenReader,c.changeView=g,t.$render=n,u.configureOn&&c.$on(u.configureOn,function(){u=s(),c.screenReader=u.screenReader,t.$render()}),u.renderOn&&c.$on(u.renderOn,t.$render);var v={year:h,month:i,day:j,hour:k,minute:l,setTime:m}}function d(){var a=new Date,b=6e4*a.getTimezoneOffset();this.utcDateValue=a.getTime(),this.selectable=!0,this.localDateValue=function(){return this.utcDateValue+b};var c=["utcDateValue","localDateValue","display","active","selectable","past","future"];for(var d in arguments[0])c.indexOf(d)>=0&&(this[d]=arguments[0][d])}var e={bindToController:!1,controller:c,controllerAs:"dateTimePickerController",replace:!0,require:"ngModel",restrict:"E",scope:{beforeRender:"&",onSetTime:"&"},template:function(){var a="";return a+='<div class="tk-stl-datetimepicker table-responsive">',a+='<table class="table table-condensed  {{ data.currentView }}-view">',a+="<thead>",a+="<tr>",a+='<th class="left"',a+='data-ng-click="changeView(data.currentView, data.leftDate, $event)"',a+='data-ng-show="data.leftDate.selectable"><i class="icon-left-dir"></i>',a+="</th>",a+='<th class="switch" colspan="5"',a+='data-ng-show="data.previousViewDate.selectable"',a+='data-ng-click="changeView(data.previousView, data.previousViewDate, $event)">{{ data.previousViewDate.display }}</th>',a+='<th class="right" data-ng-click="changeView(data.currentView, data.rightDate, $event)"',a+='data-ng-show="data.rightDate.selectable"><i class="icon-right-dir"></i>',a+="</th>",a+="</tr>",a+="<tr>",a+='<th class="dow" data-ng-repeat="day in data.dayNames">{{ day }}</th>',a+="</tr>",a+="</thead>",a+="<tbody>",a+="<tr data-ng-if=\"data.currentView !== 'day'\">",a+='<td colspan="7">',a+='<span class="{{ data.currentView }}"',a+='data-ng-repeat="dateObject in data.dates"',a+='data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}"',a+='data-ng-click="changeView(data.nextView, dateObject, $event)">{{ dateObject.display }}</span></td>',a+="</tr>",a+='<tr data-ng-if="data.currentView === \'day\'" data-ng-repeat="week in data.weeks">',a+='<td data-ng-repeat="dateObject in week.dates"',a+='data-ng-click="changeView(data.nextView, dateObject, $event)"',a+='class="day"',a+='data-ng-class="{active: dateObject.active, past: dateObject.past, future: dateObject.future, disabled: !dateObject.selectable}">{{ dateObject.display }}</td>',a+="</tr>",a+="</tbody>",a+="</table>",a+="</div>"}};return c.$inject=["$scope","$element","$attrs"],e}function b(){var a={configureOn:null,dropdownSelector:null,minuteStep:5,minView:"minute",modelType:"Date",parseFormat:"YYYY-MM-DDTHH:mm:ss.SSSZZ",renderOn:null,startView:"day"},b={bg:{previous:"",next:""},ca:{previous:"anterior",next:"segent"},da:{previous:"forrige",next:"nste"},de:{previous:"vorige",next:"weiter"},"en-au":{previous:"previous",next:"next"},"en-gb":{previous:"previous",next:"next"},en:{previous:"previous",next:"next"},"es-us":{previous:"atrs",next:"siguiente"},es:{previous:"atrs",next:"siguiente"},fi:{previous:"edellinen",next:"seuraava"},fr:{previous:"prcdent",next:"suivant"},hu:{previous:"elz",next:"kvetkez"},it:{previous:"precedente",next:"successivo"},ja:{previous:"",next:""},ml:{previous:"",next:""},nl:{previous:"vorige",next:"volgende"},pl:{previous:"poprzednia",next:"nastpna"},"pt-br":{previous:"anteriores",next:"prximos"},pt:{previous:"anterior",next:"prximo"},ro:{previous:"anterior",next:"urmtor"},ru:{previous:"",next:""},sk:{previous:"predol",next:"alia"},sv:{previous:"fregende",next:"nsta"},tr:{previous:"nceki",next:"sonraki"},uk:{previous:"",next:""},"zh-cn":{previous:"",next:""},"zh-tw":{previous:"",next:""}},c=b[moment.locale().toLowerCase()];return angular.extend({},a,{screenReader:c})}function c(a){function b(b){var c=["configureOn","dropdownSelector","minuteStep","minView","modelType","parseFormat","renderOn","startView","screenReader"];for(var d in b)if(c.indexOf(d)<0)throw"invalid option: "+d;var e=["minute","hour","day","month","year"];if(e.indexOf(b.startView)<0)throw"invalid startView value: "+b.startView;if(e.indexOf(b.minView)<0)throw"invalid minView value: "+b.minView;if(e.indexOf(b.minView)>e.indexOf(b.startView)&&(b.startView=b.minView),!angular.isNumber(b.minuteStep))throw"minuteStep must be numeric";if(b.minuteStep<=0||b.minuteStep>=60)throw"minuteStep must be greater than zero and less than 60";if(null!==b.configureOn&&!angular.isString(b.configureOn))throw"configureOn must be a string";if(null!==b.configureOn&&b.configureOn.length<1)throw"configureOn must not be an empty string";if(null!==b.renderOn&&!angular.isString(b.renderOn))throw"renderOn must be a string";if(null!==b.renderOn&&b.renderOn.length<1)throw"renderOn must not be an empty string";if(null!==b.modelType&&!angular.isString(b.modelType))throw"modelType must be a string";if(null!==b.modelType&&b.modelType.length<1)throw"modelType must not be an empty string";if("Date"!==b.modelType&&"moment"!==b.modelType&&"milliseconds"!==b.modelType&&(b.parseFormat=b.modelType),null!==b.dropdownSelector&&!angular.isString(b.dropdownSelector))throw"dropdownSelector must be a string";null===b.dropdownSelector||"undefined"!=typeof jQuery&&"function"==typeof jQuery().dropdown||(a.error("Please DO NOT specify the dropdownSelector option unless you are using jQuery AND Bootstrap.js. Please include jQuery AND Bootstrap.js, or write code to close the dropdown in the on-set-time callback. \n\nThe dropdownSelector configuration option is being removed because it will not function properly."),delete b.dropdownSelector)}return{validate:b}}angular.module("lightning").service("dateTimePickerConfig",b).service("dateTimePickerValidator",c).directive("widgetDatetimepicker",a),a.$inject=["dateTimePickerConfig","dateTimePickerValidator"],c.$inject=["$log"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,scope:{files:"=",onSubmit:"&",buttonLabel:"@"},link:function(a){function b(b){for(var d=b;d<a.columns.length;d++)c(d)}function c(b){if(b>=0)for(var c=0;c<a.columns[b].length;c++)a.columns[b][c].open=!1}function d(b){if(b>=0)for(var c=0;c<a.columns[b].length;c++)a.columns[b][c].selected=!0}function e(b){if(b>=0)for(var c=0;c<a.columns[b].length;c++)a.columns[b][c].selected=!1}function f(){for(var b=[],c=0;c<a.columns.length;c++)Array.prototype.push.apply(b,g(c));return b}function g(b){var c=[];if(b>=0)for(var d=0;d<a.columns[b].length;d++)a.columns[b][d].selected===!0&&c.push(a.columns[b][d]);return c}function h(a){return a}a.buttonLabel=a.buttonLabel?a.buttonLabel:"Submit",
a.columns=h(a.files),a.loadChildren=function(c,d){if(c.children){b(d),c.open=!0;var e=a.columns.slice(0,d+1);e.push(c.children),a.columns=e}},a.selectAll=function(a,b){var c=b.target;a>=0&&(c.checked?d(a):e(a))},a.submit=function(){var b=f();"function"==typeof a.onSubmit&&a.onSubmit({selected:b})}},template:function(){return'<div><div class="tk-stl-file-hierarchy"><div class="columns"><div class="column" ng-repeat="column in columns track by $index"><ul><li><span class="control">Select All</span> <input type="checkbox" ng-click="selectAll($index, $event)"></li><li ng-class="{\'active\': item.open}" ng-repeat="item in column track by $index" ng-click="loadChildren(item, $parent.$index)"><i ng-class="{ \'icon-folder-open\': item.open, \'icon-folder\': item.children }"></i> {{ item.label }}<input type="checkbox" ng-model="item.selected" ng-click="$event.stopPropagation()"></li></ul></div></div></div><button class="tk-stl-button" ng-click="submit()" ng-if="buttonLabel != \'\'">{{ buttonLabel }}</button></div>'}};return a}angular.module("lightning").directive("widgetFileHierarchy",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,template:function(a,b){return'<i class="icon-'+b.icon+'"></i>'}};return a}angular.module("lightning").directive("widgetIcon",a)}(),function(){"use strict";function a(a){var b={restrict:"E",transclude:!0,replace:!0,link:function(b,c){function d(a,d){var f=c[0].getBoundingClientRect();f.top>=0&&f.bottom<=a&&f.left>=0&&f.right<=d&&(b.visible=!0,c.css("opacity",1),e())}c.css({opacity:0,"-webkit-transition":"opacity 0.5s ease-in",transition:"opacity 0.5s ease-in"}),b.visible=!1;var e=a.bindListener(d);c.on("$destroy",function(){e()})},template:function(){return'<div><div ng-if="visible" ng-transclude></div></div>'}};return b}angular.module("lightning").directive("widgetInView",a),a.$inject=["scrollAndResizeListener"]}(),function(){"use strict";function a(a,b,e,f){var g={restrict:"E",transclude:!0,scope:{daysLeft:"@"},link:function(g,h,i){function j(){return null==c?b({method:"GET",url:l+"twigkit/api/license"}):f.resolve({data:{expiryDate:c}})}function k(a){if(g.daysLeft){var b=g.daysLeft;return g.daysLeft.indexOf("<")>-1?(b=g.daysLeft.replace("<",""),a<b):g.daysLeft.indexOf(">")>-1?(b=g.daysLeft.replace(">",""),a>b):a==g.daysLeft}return!0}var l=a.getContextPath("/"),m=j();m.then(function(a){var b=a.data.expiryDate;c=b;var f=i.dateFormat||"dd/MM/yyyy hh:mm:ss",h=new Date;g.licenseExpired=!1,b instanceof Date||(b=new Date(b));var j=d(h,b)||0;j<0&&(g.licenseExpired=!0),g.licenseDaysRemaining=j,g.licenseExpiryDate=e("date")(b,f),g.show=k(j)})},template:function(){return'<div class="tk-stl-license-expiration" ng-if="show" ng-inject>{{ licenseExpiryDate }}</div>'}};return g}angular.module("lightning").directive("widgetLicense",["$twigkit","$http","$filter","$q",a]);var b=864e5,c=null,d=function(a,c){return Math.round((c.getTime()-a.getTime())/b)}}(),function(){"use strict";function a(){var a={restrict:"E",scope:{title:"@"},replace:!0,controller:["$scope","$attrs","$timeout","$window",function(a,b,c,d){function e(){c(function(){a.errorClass=null},1e3)}b.hasOwnProperty("accessDenied")&&d.location.search.indexOf(b.accessDenied)>-1&&(a.error=!0,c(function(){a.errorClass="error",e()},200)),a.submit=function(b){a.loginForm.$invalid&&(b.preventDefault(),a.submitted=!0,a.errorClass="error",e())}}],template:function(a,b){b.action=b.hasOwnProperty("action")?b.action:"/j_spring_security_check",b.appendHashToAction=b.hasOwnProperty("appendHashToAction")?b.appendHashToAction:"false",b.method=b.method||"POST",b.titleElement=b.hasOwnProperty("titleElement")?b.titleElement:"h4",b.messageElement=b.hasOwnProperty("messageElement")?b.messageElement:"p",b.username=b.username||"j_username",b.password=b.password||"j_password",b.usernamePlaceholder=b.usernamePlaceholder||"Username",b.passwordPlaceholder=b.passwordPlaceholder||"Password",b.remember=b.hasOwnProperty("remember")?b.remember:"remember",b.rememberLabel=b.hasOwnProperty("rememberLabel")?b.rememberLabel:"Remember me",b.submitLabel=b.submitLabel||"Log in",b.errorMessage=b.errorMessage||"Invalid username or password",b.usernameErrorMessage=b.usernameErrorMessage||"This field is required.",b.passwordErrorMessage=b.passwordErrorMessage||"This field is required.";var c='<form name="loginForm" ng-submit="submit($event)" ';b.hasOwnProperty("formClass")&&(c+='class="'+b.formClass+'" '),c+='ng-class="errorClass" action="',"false"!=b.appendHashToAction&&(b.action=b.action+document.location.hash),c+=b.action+'" method="'+b.method+'" styling="login-form" novalidate><div styling="login-form-header">',b.hasOwnProperty("brandingClass")&&(c+='<div class="'+b.brandingClass+'">'),b.hasOwnProperty("logo")&&(c+='<div styling="login-form-logo-wrapper"><div styling="login-form-logo"><img src="'+b.logo+'" ',b.hasOwnProperty("logoWidth")&&(c+='width="'+b.logoWidth+'" '),b.hasOwnProperty("logoAlt")&&(c+='alt="'+b.logoAlt+'" '),c+="> </div> </div>"),b.hasOwnProperty("title")&&(c+="<"+b.titleElement+">{{title}}</"+b.titleElement+">"),b.hasOwnProperty("message")&&(c+="<"+b.messageElement+">"+b.message+"</"+b.messageElement+">"),b.hasOwnProperty("brandingClass")&&(c+="</div>"),c+="</div>",c+='<div styling="login-form-body">',c+='<div class="error-message" ng-if="error">'+b.errorMessage+"</div>";var d=b.hasOwnProperty("usernameClass");d&&(c+='<div class="input-group '+b.usernameClass+'">'),b.hasOwnProperty("usernameLabel")&&(c+='<label for="'+b.username+'">attributes.usernameLabel</label>'),c+='<input type="text" ng-model="username" name="'+b.username+'" class="username" placeholder="'+b.usernamePlaceholder+'" autofocus required>',c+='<small class="error-message" ng-show="(loginForm[\''+b.username+"'].$touched || submitted) && loginForm['"+b.username+"'].$error.required\">"+b.usernameErrorMessage+"</small>",d&&(c+="</div>");var e=b.hasOwnProperty("passwordClass");e&&(c+='<div class="input-group '+b.passwordClass+'">'),b.hasOwnProperty("passwordLabel")&&(c+='<label for="'+b.password+'">attributes.passwordLabel</label>'),c+='<input type="password" ng-model="password" name="'+b.password+'" placeholder="'+b.passwordPlaceholder+'" class="password" required>',c+='<small class="error-message" ng-show="(loginForm[\''+b.password+"'].$touched || submitted) && loginForm['"+b.password+"'].$error.required\">"+b.passwordErrorMessage+"</small>",e&&(c+="</div>"),"false"!=b.remember&&(c+='<label for="remember" class="tk-stl-checkbox"><input id="remember" name="'+b.remember+'" type="checkbox" ng-model="remember"> '+b.rememberLabel,c+="</label>");var f=b.hasOwnProperty("submitClass");return f&&(c+='<div class="'+b.submitClass+'">'),c+='<button type="submit" class="tk-stl-button tk-stl-width-1">'+b.submitLabel+"</button>",f&&(c+="</div>"),(b.hasOwnProperty("resetLink")||b.hasOwnProperty("createLink"))&&(c+='<div class="links">',b.hasOwnProperty("resetLink")&&(c+='<a href="'+b.resetLink+'">Password Reset</a>'),b.hasOwnProperty("createLink")&&(c+='<a href="'+b.createLink+'">Create Account</a>'),c+="</div>"),c+="</div></form>"}};return a}angular.module("lightning").directive("widgetLoginForm",a)}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,controller:["$scope","$location","$attrs",function(a,b,c){var d=!1,e=!1;if(c.hasOwnProperty("accessDenied")){var f=c.accessDenied.split("=");d=f.length>0&&f[0],e=f.length>1&&f[1]}var g=b.search();a.animate="animated animate-fadeInUp",d&&(e&&g[d]==e||!e&&g.hasOwnProperty(d))&&(a.animate=!1)}],template:function(a,b){b.action=b.hasOwnProperty("action")?b.action:"/j_spring_security_check",b.method=b.method||"POST",b.username=b.username||"j_username",b.password=b.password||"j_password",b.usernamePlaceholder=b.usernamePlaceholder||"Username",b.passwordPlaceholder=b.passwordPlaceholder||"Password",b.remember=b.hasOwnProperty("remember")?b.remember:"remember",b.rememberLabel=b.hasOwnProperty("rememberLabel")?b.rememberLabel:"Remember me",b.submitLabel=b.submitLabel||"Log in",b.errorMessage=b.errorMessage||"Invalid username or password";var c='<layout:grid styling="stretch-content hero-banner"><layout:block styling="center-content" ng-class="animate"><layout:block xs="11-12" sm="3-5" md="2-5" lg="1-3" xl="1-4"><widget:login-form ';return b.hasOwnProperty("logo")&&(c+='logo="'+b.logo+'"'),b.hasOwnProperty("logoAlt")&&(c+='logo-alt="'+b.logoAlt+'"'),b.hasOwnProperty("title")&&(c+='title="'+b.title+'"'),b.hasOwnProperty("message")&&(c+='message="'+b.message+'"'),b.hasOwnProperty("action")&&(c+='action="'+b.action+'"'),b.hasOwnProperty("method")&&(c+='method="'+b.method+'"'),b.hasOwnProperty("username")&&(c+='username="'+b.username+'"'),b.hasOwnProperty("password")&&(c+='password="'+b.password+'"'),b.hasOwnProperty("usernamePlaceholder")&&(c+='username-placeholder="'+b.usernamePlaceholder+'"'),b.hasOwnProperty("passwordPlaceholder")&&(c+='password-placeholder="'+b.passwordPlaceholder+'"'),b.hasOwnProperty("remember")&&(c+='remember="'+b.remember+'"'),b.hasOwnProperty("submitLabel")&&(c+='submit-label="'+b.submitLabel+'"'),b.hasOwnProperty("accessDenied")&&(c+='access-denied="'+b.accessDenied+'"'),b.hasOwnProperty("errorMessage")&&(c+='error-message="'+b.errorMessage+'"'),b.hasOwnProperty("resetLink")&&(c+='reset-link="'+b.resetLink+'"'),b.hasOwnProperty("createLink")&&(c+='create-link="'+b.createLink+'"'),c+="></widget:login-form> </layout:block></layout:block></layout:grid>"}};return a}angular.module("lightning").directive("widgetLoginPage",a)}(),function(){"use strict";function a(a){var b={restrict:"E",scope:{},transclude:!0,link:function(b){b.url=a.getContextPath("/")+"logout/"},template:function(){return'<a ng-href="{{url}}"><ng-transclude>Logout</ng-transclude></a>'}};return b}angular.module("lightning").directive("widgetLogout",["$twigkit",a])}(),function(){"use strict";function a(){var a={restrict:"E",scope:{id:"@",title:"@?",url:"@?"},transclude:!0,replace:!0,controller:["$scope","$attrs","$http","$document","$rootScope","$timeout","$element","ModalService",function(a,b,c,d,e,f,g,h){function i(b){return b.defaultPrevented?b:void(27==b.which&&(b.preventDefault(),e.$apply(function(){a.closeModal()})))}a.modalClass="true"==b.show?"show":"";var j=angular.element(document.getElementsByTagName("html")[0]),k="true"==b.show;a.closeModal=function(){d.off("keydown",i),j.removeClass("no-overflow"),e.$emit("modal_closed",a.id),e.$emit("modal_"+a.id+"_closed",a.id),a.modalClass="show closing",f(function(){a.modalClass="",k=!1},200)},a.preventClosing=function(a){a.stopPropagation()};var l={name:a.id,show:function(){k||(a.modalClass="show",d.on("keydown",i),j.addClass("no-overflow"),k=!0)},close:function(){a.closeModal()},unregister:function(){a.$destroy(),g.remove()}};h.register(l)}],link:{pre:function(a,b){var c=angular.element(document).find("ui-view").eq(0);c.append(angular.element(b))}},template:function(a,b){var c='<div class="tk-stl-modal-wrapper" ng-class="modalClass" ng-click="closeModal()">';return c+='<div class="tk-stl-modal '+b.modalClasses+'" ng-click="preventClosing($event)">',b.title&&(c+='<div class="tk-stl-modal-header">{{ title }} <span class="close" ng-click="closeModal()">&times;</span></div>'),c+='<section class="tk-stl-modal-content" ng-if="modalClass == \'show\'"><ng-transclude></ng-transclude></section>',c+="</div></div>"}};return a}angular.module("lightning").directive("widgetModal",a)}(),function(){"use strict";function a(a){var b={restrict:"A",link:function(b,c,d){""!=d.widgetOpenModal&&c.bind("click",function(){a.show(d.widgetOpenModal),"$apply"!=b.$root.$$phase&&"$digest"!=b.$root.$$phase&&b.$apply()}),b.$on("$destroy",function(){a.unregister(d.widgetOpenModal)}),c.on("$destroy",function(){a.unregister(d.widgetOpenModal)})}};return b}angular.module("lightning").directive("widgetOpenModal",a),a.$inject=["ModalService"]}(),function(){"use strict";function a(){var a={restrict:"E",transclude:{content:"?popoverContent",trigger:"?popoverTrigger"},replace:!0,scope:{onClose:"&"},controllerAs:"Popover",bindToController:!0,controller:["$scope","$element","$attrs","$window","$timeout",function(a,b,c,d,e){function f(){s=p.clientHeight,t=p.clientWidth,g();var a,b=p.getBoundingClientRect(),c=window.innerWidth,d=parseFloat(p.style.left,10),e=5;b.right>c?(a=d<0?d+(c-e-b.right):d-(b.right-(c-e)),p.style.left=a+"px"):b.left<0&&(p.style.left=d-(b.left-e)+"px")}function g(){var a=c.direction||"bottom";switch(a){case"top":p.style.bottom=Math.floor(q+v-1)+"px",p.style.left=(r-t)/2+"px",u.style.top=-q-v+"px",u.style.left=(r-y)/2+"px";break;case"bottom":p.style.top=v+"px",p.style.left=(r-t)/2+"px",u.style.top=-(y-v)+1+"px",u.style.left=(r-y)/2+"px";break;case"bottom-left":u.style.top=-(y-v)+1+"px",u.style.left=(r-y)/2+"px",p.style.top=v+"px",p.style.left=parseFloat(u.style.left,10)-20+"px";break;case"bottom-center-left":u.style.top=-(y-v)+1+"px",u.style.left=(r-y)/2+"px",p.style.top=v+"px",p.style.left=parseFloat(u.style.left,10)-t/4+"px";break;case"bottom-center-right":u.style.top=-(y-v)+1+"px",u.style.left=(r-y)/2+"px",p.style.top=v+"px",p.style.left=parseFloat(u.style.left,10)-t/1.5+"px";break;case"bottom-right":u.style.top=-(y-v)+1+"px",u.style.left=(r-y)/2+"px",p.style.top=v+"px",p.style.left=parseFloat(u.style.left,10)-t/8*6.5+"px";break;case"right":p.style.top=(q-s)/2-q+"px",p.style.left=r+v+"px",u.style.top=(q-y)/2-q+"px",u.style.left=r-(y-v)+1+"px";break;case"left":p.style.top=(q-s)/2-q+"px",p.style.right=v+"px",u.style.top=(q-y)/2-q+"px",u.style.left=-v-1+"px"}}function h(a){n.showPopover&&(a&&a.stopPropagation(),n.showPopover=!1,n.onClose(),j())}function i(){n.showPopover=!0,k()}function j(){w&&w.classList.add("ng-hide")}function k(){w&&w.classList.remove("ng-hide")}function l(){w&&w.classList.toggle("ng-hide")}var m,n=this;n.close=h,n.open=i,n.showPopover=!1;var o=d.getComputedStyle(b[0]).position;"static"==o&&(b[0].style.position="relative");var p,q,r,s,t,u,v,w=b[0].querySelector(".tk-stl-popover-container"),x=15,y=30;v=Math.sqrt(x*x/2);var z="hover"===c.mode?"mouseover":"click",A=void 0===c.closeOnClick?"click"!=z:"true"===c.closeOnClick,B=void 0===c.closeOnMouseleave?"mouseover"==z:"true"===c.closeOnMouseleave;B&&b[0].addEventListener("mouseleave",function(){m=e(function(){n.showPopover=!1,j()},1e3)}),"click"!=z&&A&&w.addEventListener("click",function(){n.showPopover=!1,j()}),b[0].addEventListener(z,function(){q=b[0].clientHeight<=0?b[0].offsetHeight:b[0].clientHeight,r=b[0].clientWidth<=0?b[0].offsetWidth:b[0].clientWidth,w.style.top=q+"px",p=b[0].querySelector(".tk-stl-popover");var a=b[0].querySelectorAll(".tk-stl-popover-triangle");u=a[a.length-1],"click"==z&&A?(n.showPopover=!n.showPopover,l()):"click"!=z||A||n.showPopover?n.showPopover||(e.cancel(m),n.showPopover=!0,k()):(n.showPopover=!0,k()),f()}),"mouseover"===z&&w.addEventListener(z,function(){e.cancel(m)}),a.$on("close_popovers",function(){h()})}],template:function(a,b){var c=b.direction||"bottom";return'<div class="tk-stl-popover-wrapper"><div class="tk-stl-popover-container ng-hide" click-outside="Popover.close()" outside-if-not="tk-stl-popover-trigger"><div class="tk-stl-popover" ng-transclude="content"></div> <div class="tk-stl-popover-triangle tk-stl-popover-triangle-'+c+'"></div></div><div class="tk-stl-popover-trigger" ng-transclude="trigger" ng-click="Popover.close($event)"></div> </div>'}};return a}angular.module("lightning").directive("widgetPopover",a)}(),function(){"use strict";function a(a,b){var c={restrict:"E",transclude:!0,replace:!0,scope:{},link:function(a,c,d){c.bind("click",function(){b.scrollToElement(d.scrollToId)})},template:function(){var a='<div class="tk-stl-scroll-to">';return a+="<ng-transclude>",a+='<a href="javascript:void(0);">Back to top</a>',a+="</ng-transclude>",a+="</div>"}};return c}angular.module("lightning").directive("widgetScrollTo",a),a.$inject=["$lightningLog","ScrollToService"]}(),function(){"use strict";function a(a){return{restrict:"AC",transclude:!0,scope:{response:"="},template:'<div class="tk-stl-widget-accordion" style="margin:0 !important; padding:0 !important" ng-transclude></div>',link:function(b,c,d){function e(){var a;a=d.hasOwnProperty("height")?d.height+"px":"auto",c.css({overflow:"auto",height:f?0:a,transitionProperty:"height",transitionDuration:d.duration,transitionTimingFunction:d.easing})}d.duration=d.duration?d.duration+"s":"0.3s",d.easing=d.easing?d.easing:"ease-in-out",d.delay=d.delay||0;var f=!!d.hasOwnProperty("closed");d.response?b.$watch("response",function(b){b&&a(function(){e()},d.delay)}):e(),b.$on("#"+d.id+"_close",function(){f=!0}),b.$on("#"+d.id+"_open",function(){f=!1})}}}function b(a,b){return{restrict:"A",link:function(c,d,e){function f(a,b){if(b){var c=angular.element(b).attr("height");if(c)return c}a.style.border="1px solid rgba(0,0,0,0)";var d=a.clientHeight;return a.style.border=0,d}var g,h,i;e.expanded=!1,d.bind("click",function(){if(g||(g=document.querySelector(e.widgetSlideToggle),i=!0),!h&&g&&(h=g.querySelector(".tk-stl-widget-accordion")),h){e.expanded=g.clientHeight>0;var c=f(h,g);if(e.expanded)g.style.height=c+"px",b(function(){g.style.height="0px"},0),d.removeClass("tk-stl-widget-toggle-open"),a.$broadcast(e.widgetSlideToggle+"_close");else{g.style.height=c+"px";var j=angular.element(g).attr("duration"),k=j?1e3*j:300;d.addClass("tk-stl-widget-toggle-open"),a.$broadcast(e.widgetSlideToggle+"_open"),b(function(){g.style.height="auto"},k)}e.expanded=!e.expanded}})}}}angular.module("lightning").directive("widgetSlideDown",["$timeout",a]).directive("widgetSlideToggle",["$rootScope","$timeout",b])}(),function(){"use strict";function a(){var a={restrict:"E",scope:{facetName:"@",facet:"=?"},require:"^?searchFacet",transclude:!0,controller:["$scope","$timeout","$element","$filter","$lightningUrl","$attrs","ResponseService","QueryService",function(a,b,c,d,e,f,g,h){function i(){if(b(function(){a.$broadcast("rzSliderForceRender")},0),null!=a.response&&(a.facet=a.response.facets[a.facetName]||a.facet),a.id=a.facetName||f.fieldName,a.facet?(null!=a.facet.filters[0]&&null!=a.facet.filters[0].val.act&&"range"==a.facet.filters[0].val.act.type||"false"==f.sort?a.filters=a.facet.filters:a.filters=a.facet.filters.sort(n),a.show=a.filters.length>1):a.show=!0,null!=a.response&&null!=a.response.query&&a.response.query.filters.length>0){a.values=angular.copy(a.response.query.filters),a.values=d("filter")(a.values,{field:a.id},!0),a.values=d("deepFilter")(a.values,"val.act.type","range")[0];var c,e;if(null!=a.values)if(a.facet){r();var g=m(a.values.val.act.from);c=a.originalSteps.indexOf(g)!=-1?a.originalSteps.indexOf(g):a.originalSteps.indexOf(g.toString())!=-1?a.originalSteps.indexOf(g.toString()):j(a.originalSteps,g,"from")!=-1?j(a.originalSteps,g,"from"):0;var h=m(a.values.val.act.to);e=a.originalSteps.indexOf(h)!=-1?a.originalSteps.indexOf(h):a.originalSteps.indexOf(h.toString())!=-1?a.originalSteps.indexOf(h.toString()):j(a.originalSteps,g,"to")!=-1?j(a.originalSteps,h,"to"):a.originalSteps.length-1,f.invertRange?(a.slider.maxValue=c,a.slider.minValue=e):(a.slider.minValue=c,a.slider.maxValue=e),a.slider.options.ceil=parseInt(a.filters.length-1)}else c=m(a.values.val.act.from),e=m(a.values.val.act.to),f.invertRange?(a.slider.maxValue=c,a.slider.minValue=e):(a.slider.minValue=c,a.slider.maxValue=e);else o()}else o()}function j(a,b,c){for(var d=0,e=a.length;d<e;d++)if(a[d][c]===b)return d;return-1}function k(a){return f.prefix+a+f.suffix}function l(a){return isNaN(a)?a:a*f.multiplier}function m(a){return a&&!isNaN(a)?a/f.multiplier:a}function n(a,b){return parseInt(d("actualValue")(a.val))<parseInt(d("actualValue")(b.val))?-1:parseInt(d("actualValue")(a.val))>parseInt(d("actualValue")(b.val))?1:0}function o(){a.facet?q():p()}function p(){a.slider.minValue=parseInt(f.min)||0,a.slider.maxValue=parseInt(f.max)||100,a.slider.options.step=parseInt(f.step)||1}function q(){a.slider.minValue=parseInt(f.min||0),a.slider.maxValue=parseInt(a.filters.length-1),a.slider.options.ceil=a.slider.maxValue,r()}function r(){a.steps=[],a.originalSteps=[],angular.forEach(a.filters,function(b){if(a.originalSteps.push(d("actualValue")(b.val)),null!=f.dateFormat){var c=d("displayValue")(b.val);b.val&&b.val.act&&b.val.act.type&&"range"==b.val.act.type?c=d("rangeDateFormat")(b.val,f.dateFormat):"undefined"!=typeof c.indexOf?0==c.indexOf("<")?(c=c.substring(1),c=d("dateFormat")(c.trim(),f.dateFormat),c="< "+c):0==c.indexOf(">")?(c=c.substring(1),c=d("dateFormat")(c.trim(),f.dateFormat),c="> "+c):c=d("dateFormat")(c,f.dateFormat):c=d("dateFormat")(c,f.dateFormat);var e=k(c);a.steps.push(e)}else a.steps.push(k(d("displayValue")(b.val)))}),a.slider.options.stepsArray=a.steps}f.prefix=null==f.prefix?"":f.prefix,f.suffix=null==f.suffix?"":f.suffix,f.multiplier=parseInt(f.multiplier)?parseInt(f.multiplier):1,a.buttonLabel=null==f.buttonLabel?"Apply":f.buttonLabel,a.showApply=!1,f.invertRange="true"==f.invertRange,b(function(){a.$broadcast("rzSliderForceRender")}),a.slider={minValue:1,maxValue:100,options:{floor:parseInt(f.min)||0,ceil:parseInt(f.max)||100,translate:function(a){return k(a)},rightToLeft:f.invertRange}},f.response?(a.response=g.getResponse(f.response,"facets,query"),a.$on(f.response+"_updated",function(b,c){a.response=c,i()}),null!=a.response&&i()):f.fieldName&&i(),a.$on("slideEnded",function(){a.$evalAsync(function(){a.slider.showApply=!0})}),a.applyFilter=function(){if(null!=f.query){var b=h.getQuery(f.query);null!=b&&e.setUrlParameters(b,!1)}e.removeFiltersFromUrl(a.id),a.showApply=!1;var c,d,g,i;if(null!=a.steps&&a.steps.length>0){c=a.originalSteps[a.slider.minValue],d=a.originalSteps[a.slider.maxValue],i=a.steps[a.slider.minValue],g=a.steps[a.slider.maxValue];var j;if(a.slider.minValue==a.slider.maxValue?(c=c.from||c,d=d.to||d,j=i||g):(null!=c.from?c=c.from:null!=c.to&&(c=c.to),null!=d.to?d=d.to:null!=d.from&&(d=d.from)),c=l(c),d=l(d),f.invertRange){var m=c,n=i;c=d,d=m,i=g,g=n}j?e.addRangeFilterDisplayToUrl(a.id,c,d,j,!0,!1,f.toLabel):e.addRangeFilterToUrl(a.id,c,d,i,g,!0,!1,f.toLabel)}else c=l(a.slider.minValue),d=l(a.slider.maxValue),i=k(a.slider.minValue),g=k(a.slider.maxValue),f.invertRange?e.addRangeFilterToUrl(a.id,d,c,g,i,!0,!1,f.toLabel):e.addRangeFilterToUrl(a.id,c,d,i,g,!0,!1,f.toLabel)},a.$watch(function(){return c[0].offsetTop>0&&c[0].offsetLeft>0},function(){c[0].offsetTop>0&&c[0].offsetLeft>0&&b(function(){a.$broadcast("rzSliderForceRender")})})}],link:function(a,b,c,d){null!=d&&a.$watch("facet",function(b){b&&(a.facet.filters.length>1?d.showFacet(!0):d.showFacet(!1))})},template:function(){return'<div ng-show="id != null && show"><rzslider rz-slider-model="slider.minValue" rz-slider-high="slider.maxValue" rz-slider-options="slider.options"></rzslider><br/><button class="tk-stl-button tk-stl-button-small ng-hide" ng-show="slider.showApply" ng-click="applyFilter()">{{::buttonLabel}}</button></div>'}};return a}angular.module("lightning").directive("widgetSlider",a)}(),function(){"use strict";function a(a,b,c,d,e){var f={restrict:"E",scope:{label:"@",suffix:"@",originalLabel:"@",originalSuffix:"@",correctedLabel:"@",correctedSuffix:"@"},replace:!0,link:function(f,g,h){function i(a){c.error("WidgetSpellingSuggestions",a),f.hide=!0}function j(){var a=d("property")(k.messages,"type","spelling");if(null==a)f.hide=!0;else{f.hide=!1,f.autoCorrected=1==a["auto-corrected"];var b=angular.copy(f.query);b.val=a.query,f.url=d("getUrlForQuery")(b),f.messageLabel=a.label}}if(f.hide=!0,f.spelling={},f.spelling.label=null==f.label?"Did you mean: ":f.label+" ",f.spelling.suffix=null==f.suffix?"":f.suffix,f.spelling.originalLabel=null==f.originalLabel?"No results found for ":f.originalLabel+" ",f.spelling.originalSuffix=null==f.originalSuffix?".":f.originalSuffix,f.spelling.correctedLabel=null==f.correctedLabel?" Showing results for ":" "+f.correctedLabel+" ",f.spelling.correctedSuffix=null==f.correctedSuffix?".":f.correctedSuffix,null==h.response)i("No response was found on this tag, the response is required!");else if(null==h.query)i("No query was found on this tag, the query is required!");else{var k=a.getResponse(h.response);f.query=b.getQuery(h.query),null!=k&&null!=k.messages&&j(),f.$on(h.response+"_updated",function(a,c){f.query=b.getQuery(h.query),f.hide=!0,k=c,null!=k&&null!=k.messages&&j()})}f.changeUrl=function(){f.hide=!0,e.url(e.path()+"?"+f.url)}},template:function(){var a='<div styling="alertbox" ng-show="!hide" ng-cloak>';return a+='<p ng-show="autoCorrected">',a+='<span class="original-label">{{::spelling.originalLabel}}</span>',a+='<span class="original-query"> {{query.val}}</span>',a+='<span class="original-suffix">{{::spelling.originalSuffix}}</span>',a+='<span class="corrected-label">{{::spelling.correctedLabel}}</span>',a+='<span class="corrected-query"><a href="javascript:void(0);" ng-click="changeUrl()">{{messageLabel}}</a></span>',a+='<span class="corrected-suffix">{{::spelling.correctedSuffix}}</span>',a+="</p>",a+='<p ng-show="!autoCorrected">',a+='<span class="label">{{::spelling.label}}</span>',a+='<span class="suggestion"><a  href="javascript:void(0);" ng-click="changeUrl()">{{messageLabel}}</a></span>',a+='<span class="suffix">{{::spelling.suffix}}</span>',a+="</p>",a+="</div>"}};return f}angular.module("lightning").directive("widgetSpellingSuggestions",a),a.$inject=["ResponseService","QueryService","$lightningLog","$filter","$location"]}(),function(){"use strict";function a(){var a={restrict:"E",replace:!0,template:function(){return'<div class="tk-stl-circle-loader"></div>'}};return a}angular.module("lightning").directive("widgetSpinner",a)}(),function(){"use strict";function a(a,b){var c={restrict:"E",transclude:!0,scope:!0,link:function(c,d,e){if(e.hasOwnProperty("cookie")&&""!=e.cookie.trim()){var f=a.get(e.cookie);f||(c.show=!0);var g=e.event||e.cookie+"_set";c.$on(g,function(){a.put(e.cookie,!0),b(function(){c.show=!1},0)});var h=e["delete"]||e.cookie+"_delete";c.$on(h,function(){a.remove(e.cookie),b(function(){c.show=!1},0)})}},template:'<div class="tk-stl-widget-tutorial" ng-if="show" ng-transclude></div>'};return c}angular.module("lightning").directive("widgetTutorial",["$cookies","$timeout",a])}(),function(){"use strict";function a(a){return function(b){return a("actualValue")(b)}}angular.module("lightning").filter("actual",a),a.$inject=["$filter"]}(),function(){"use strict";function a(){return function(a){return void 0==a?"":"string"==typeof a?a:(null!=a.val&&(a=a.val),angular.isArray(a)&&(a=a[0]),void 0!=a.act?angular.isArray(a.act)?"Long"==a.act[0]?a.act[1]:"Date"==a.act[0]?a.act[1]:a.act[0]:a.act:a)}}angular.module("lightning").filter("actualValue",a)}(),function(){"use strict";angular.module("lightning").filter("beautify",function(){return function(a){function b(a,b,c){return a.replace(new RegExp(b,"g"),c)}a=a||"";var c=a,d=a.lastIndexOf("/");return d>=0&&(c=a.substring(d+1)),b(c,"_"," ")}})}(),function(){"use strict";function a(a){return function(b,c,d){return void 0==c||null==b||""==b?b:"relative"==c?a("relativeDate")(b):a("date")(b,c,d)}}angular.module("lightning").filter("dateFormat",a),a.$inject=["$filter"]}(),function(){"use strict";angular.module("lightning").filter("deepFilter",function(){function a(a){return a.split(".")}function b(a,b){var c=a;return _.forEach(b,function(a){return null==c[a]?c:void(c=c[a])}),c}return function(c,d,e){var f=a(d);return _.filter(c,function(a){return b(a,f)==e})}})}(),function(){"use strict";function a(a){return function(b){return a("displayValue")(b)}}angular.module("lightning").filter("display",a),a.$inject=["$filter"]}(),function(){"use strict";function a(){return function(a){return void 0==a?"":"string"==typeof a?a:(null!=a.val&&(a=a.val),angular.isArray(a)&&(a=a[0]),void 0!=a.dsp?angular.isArray(a.dsp)?"Long"==a.dsp[0]?a.dsp[1]:a.dsp[0]:a.dsp:void 0!=a.act?angular.isArray(a.act)?"Long"==a.act[0]?a.act[1]:a.act[0]:a.act:a)}}angular.module("lightning").filter("displayValue",a)}(),function(){"use strict";angular.module("lightning").filter("encodeURIComponent",function(){return window.encodeURIComponent})}(),function(){"use strict";angular.module("lightning").filter("facet",function(){return function(a,b){return a&&b&&a.facets&&void 0!=a.facets[b]?a.facets[b]:null}})}(),function(){"use strict";function a(a){return function(b,c){var d;return d=angular.isObject(b)?b:a.getResponse(b,"facts"),null!=d&&null!=d.facts&&null!=d.facts[c]&&null!=d.facts[c][0]?d.facts[c][0]:null}}angular.module("lightning").filter("fact",a),a.$inject=["ResponseService"]}(),function(){"use strict";angular.module("lightning").filter("field",function(){return function(a,b){return void 0==a||null==a.fields||null==a.fields[b]?null:a.fields[b]}})}(),function(){"use strict";angular.module("lightning").filter("filterCount",function(){return function(a){return a&&a.count?a.count:null}})}(),function(){"use strict";angular.module("lightning").filter("filterValue",function(){return function(a,b){if(void 0==a||"object"!=typeof a||!a.filters||a.filters.constructor!=Array)return null;for(var c=0;c<a.filters.length;c++){if(a.filters[c].val==b)return a.filters[c];if("object"==typeof a.filters[c].val&&null!=a.filters[c].val&&a.filters[c].val.act==b)return a.filters[c]}return null}})}(),function(){"use strict";angular.module("lightning").filter("formatAsCssName",function(){return function(a){if(void 0==a)return"";var b=a.replace(/^[^-_a-zA-Z]+/,"").replace(/^-(?:[-0-9]+)/,"-"),c=b&&b.replace(/[^-_a-zA-Z0-9]+/g,"-");return c.toLowerCase()}})}(),function(){"use strict";function a(a){return function(b,c){if(!b||"object"!=typeof b)return"";var d=c;return a.convertQueryToUrl(b,d)}}angular.module("lightning").filter("getUrlForQuery",a),a.$inject=["QueryService"]}(),function(){"use strict";function a(a,b){return function(c,d,e){c=angular.copy(c);var f=!1;if(!c||"object"!=typeof c||!d||"string"!=typeof d)return f;if(c.hasOwnProperty("f")){var g=c.f;"string"==typeof c.f&&(g=[c.f]);for(var h=0;h<g.length;h++){var i=a.filterParse(g[h]);if(i&&i.field==d&&(f=i,e&&(f=i.value==e&&i),f))break}}if(c.hasOwnProperty("filters"))for(var j=0;j<c.filters.length&&(c.filters[j].field!=d||(f=c.filters[j],e&&(f=b("actualValue")(c.filters[j].val)==e&&c.filters[j]),!f));j++);return f}}angular.module("lightning").filter("hasFilter",["$lightningUrl","$filter",a])}(),function(){"use strict";angular.module("lightning").filter("htmlToPlainText",function(){return function(a){return a?String(a).replace(/<[^>]+>/gm,""):""}})}(),function(){"use strict";angular.module("lightning").filter("maxCharacters",function(){return function(a,b){return void 0==a?"":(a=String(a),parseInt(b)?(b=parseInt(b),b>-1&&a.length>b?a.substr(0,b)+"...":a):a)}})}(),function(){"use strict";function a(a){return function(c,d){return"rounded"==d?a("roundedNumber")(c):"plain"==d?c:"formatted"==d?a("number")(c):"none"==d?"":(null!=d&&""!=d.trim()||(d="#,###.###"),new b(d).format(c))}}function b(a){this.prefix="",this.suffix="",this.comma=0,this.minInt=1,this.minFrac=0,this.maxFrac=0;for(var b=0;b<a.length;b++)if("#"==a.charAt(b)||"0"==a.charAt(b)){this.prefix=a.substring(0,b),a=a.substring(b);break}this.suffix=a.replace(/[#]|[0]|[,]|[.]/g,"");var c=a.replace(/[^0#,.]/g,""),d="",e="",f=c.indexOf(".");f!=-1?(d=c.substring(0,f),e=c.substring(f+1)):d=c;var g=d.lastIndexOf(",");g!=-1&&(this.comma=d.length-1-g),d=d.replace(/[,]/g,""),e=e.replace(/[,]|[.]+/g,""),this.maxFrac=e.length;var h=d.replace(/[^0]/g,"");h.length>this.minInt&&(this.minInt=h.length),h=e.replace(/[^0]/g,""),this.minFrac=h.length}angular.module("lightning").filter("numberFormat",a),a.$inject=["$filter"],b.prototype.format=function(a){var b=this.formatBack(a).toLowerCase();if(isNaN(b)||0==b.length)return a;if(o=b.indexOf("e")!=-1){var c=Number(b);if("Infinity"==c||"-Infinity"==c)return b;if(b=c+"",b.indexOf("e")!=-1)return b}var d=!1;"-"==b.charAt(0)?(d=!0,b=b.substring(1)):"+"==b.charAt(0)&&(b=b.substring(1));var e=b.indexOf("."),f="",g="";e!=-1?(f=b.substring(0,e),g=b.substring(e+1)):f=b,g=g.replace(/[.]/,"");var h=this.suffix&&"%"===this.suffix.charAt(0),i=this.minInt,j=this.minFrac,k=this.maxFrac;
if(h&&(i-=2,j+=2,k+=2),g.length>k){var l=new Number("0."+g);l=0==k?Math.round(l):l.toFixed(k),g=l.toString(10).substr(2);for(var m,n=l>=1?1:0,o=f.length-1;n;){if(o==-1){f="1"+f;break}m=f.charAt(o),9==m?(m="0",n=1):(m=++m+"",n=0),f=f.substring(0,o)+m+f.substring(o+1,f.length),o--}}for(var o=g.length;o<j;o++)g+="0";for(;g.length>j&&"0"==g.charAt(g.length-1);)g=g.substring(0,g.length-1);for(var o=f.length;o<i;o++)f="0"+f;for(;f.length>i&&"0"==f.charAt(0);)f=f.substring(1);h&&(f+=g.substring(0,2),g=g.substring(2));for(var p=0,o=f.length;o>0;o--)0!=p&&p%this.comma==0&&(f=f.substring(0,o)+","+f.substring(o),p=0),p++;var q;return q=g.length>0?this.prefix+f+"."+g+this.suffix:this.prefix+f+this.suffix,d&&(q="-"+q),q},b.prototype.formatBack=function(a){if(a+="",!a)return"";if(!isNaN(a))return this.getNumericString(a);var b=a,c=!1;"-"==a.charAt(0)&&(b=b.substr(1),c=!0);var d=b.indexOf(this.prefix),e=""==this.suffix?b.length:b.indexOf(this.suffix,this.prefix.length+1);return 0==d&&e>0&&(b=b.substr(0,e),b=b.substr(this.prefix.length),b=b.replace(/,/g,""),c&&(b="-"+b),!isNaN(b))?this.getNumericString(b):a},b.prototype.getNumericString=function(a){var b=new Number(a),c=b+"";if(a.indexOf(".")>-1&&c.indexOf(".")<0){for(var d=a.indexOf(".")+1;d<a.length;d++)if("0"!==a.charAt(d))return a;return c}return a}}(),function(){"use strict";angular.module("lightning").filter("orderByValue",["$filter",function(a){return function(b,c){return b.sort(function(b,d){return b=a("displayValue")(b.val),d=a("displayValue")(d.val),c?b>d?-1:b<d?1:0:b>d?1:b<d?-1:0})}}])}(),function(){"use strict";angular.module("lightning").filter("placeholder",function(){return function(a,b){var c=null;return c=null!=a&&angular.isString(a)?a.trim():a,null!=c&&""!=c?a:void 0!=b&&null!=b?b:"Loading..."}})}(),function(){"use strict";angular.module("lightning").filter("property",function(){return function(a,b,c,d){if(null!=a&&0==a.length||null==b||null==c)return null;var e=[];return angular.forEach(a,function(a){a[b]==c&&e.push(a)}),0==e.length?null:null==d?e[0]:e[0][d]}})}(),function(){"use strict";angular.module("lightning").filter("pyramidSort",function(){return function(a,b){var c=[];for(a.sort(function(a,c){return null==b?a-c:a[b]-c[b]}),c.push(a.pop());a.length;)c[a.length%2===0?"push":"unshift"](a.pop());return c}})}(),function(){"use strict";function a(a){return function(b,c){b.val&&(b=b.val);var d=b.act;return d.to||d.from?d.to&&d.from?a("dateFormat")(d.from,c,"UTC"):d.from?"> "+a("dateFormat")(d.from,c,"UTC"):"< "+a("dateFormat")(d.to,c,"UTC"):a("dateFormat")(d,c,"UTC")}}angular.module("lightning").filter("rangeDateFormat",a),a.$inject=["$filter"]}(),function(){"use strict";angular.module("lightning").filter("result",function(){return function(a,b){if(b=parseInt(b)||0,void 0==a||null==a.results||a.results.length<1||a.results.length<b+1)return null;var c=a.results[b];return null!=c.result&&(c=c.result),c}})}(),function(){"use strict";angular.module("lightning").filter("roundedNumber",function(){return function(a){if(isNaN(a))return a;if(a<1e3)return a;var b,c=["k","M","B","T","P","E","Z","Y"];b=Math.floor(Math.log(a)/Math.log(1e3));var d;return b>c.length?(d=Number((a/Math.pow(1e3,c.length)).toFixed(1)),d.toString()+c[c.length-1]):(d=Number((a/Math.pow(1e3,b)).toFixed(1)),d.toString()+c[b-1])}})}(),function(){"use strict";angular.module("lightning").filter("translate",["TranslationService",function(a){return function(b,c){return a.get(b,c)}}])}(),function(){"use strict";angular.module("lightning").filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}])}(),function(){"use strict";function a(){function a(a,b){return d[a]=b,d[a]}function b(a){return d[a]}function c(){d={}}var d={},e={setBookmark:a,getBookmark:b,clearBookmarks:c};return e}angular.module("lightning").factory("BookmarkService",a)}(),function(){"use strict";function a(a){function b(a,b,c){return c?a.sort(function(a,c){return new Date(a.result.fields[b].val[0])-new Date(c.result.fields[b].val[0])}):a.sort(function(a,c){return new Date(c.result.fields[b].val[0])-new Date(a.result.fields[b].val[0])}),a}function c(a,b,c){c||(c=d(a,b));var g=[];g.push(f(a[0],b,c));var h,i,j=0;for(h=0;h<a.length;h++){var k=new Date(a[h].result.fields[b].val[0]);i&&(e(k,i,c)?g[j].events.push(a[h]):(g.push(f(a[h],b,c)),j++)),i=k}return g}function d(a,b){var c,d,e=new Date(a[0].result.fields[b].val[0]),f=new Date(a[a.length-1].result.fields[b].val[0]);e>f?(c=f,d=e):(c=e,d=f);var g=Math.abs(d.getTime()-c.getTime()),h=Math.ceil(g/864e5);return h>365?"year":h>28?"month":h>1?"day":"hour"}function e(a,b,c){switch(c){case"year":return a.getFullYear()===b.getFullYear();case"month":return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth();case"day":return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate();case"hour":return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()&&a.getHours()===b.getHours();default:return!1}}function f(b,c,d){var e;switch(d){case"year":e="yyyy";break;case"month":e="MMM";break;case"day":e="EEE";break;case"hour":e="HH:mm:ss";break;default:e="d MM yyyy HH:mm:ss"}return{label:a("date")(b.result.fields[c].val[0],e),events:[b]}}var g={dateSortResults:b,groupByDateRanges:c};return g.determineDateGrouping=d,g.areDatesGrouped=e,g.createGroup=f,g}angular.module("lightning").factory("DateUtils",a),a.$inject=["$filter"]}(),function(){"use strict";function a(){function a(a){var c=b(a);return c.length>0?c[0]:""}function b(a){var b=[];if("string"==typeof a||"number"==typeof a)return[a];if(null!==a&&"object"==typeof a&&a.val)for(var c=0;c<a.val.length;c++)"object"==typeof a.val[c]?a.val[c].act&&a.val[c].act[1]&&b.push(a.val[c].act[1]):b.push(a.val[c]);return b}var c={getDisplayValue:a,getValues:b};return c}angular.module("lightning").factory("FieldService",a)}(),function(){"use strict";function a(){function a(a){return a.indexOf(",")>0}function b(a){var b=a.split(",");return b[0].length>0&&(b[0]=c(b[0])),b[1].length>0&&(b[1]=c(b[1])),b}function c(a){return d(a)?a=e(a):f(a)&&(a=g(a)),a}function d(a){return"true"==a.toLowerCase()||"false"==a.toLowerCase()}function e(a){return"true"==a.toLowerCase()}function f(a){return!isNaN(a)}function g(a){return Number(a)}function h(d){var e=/(-?)(~?)([A-Za-z_.][A-Za-z_0-9\-.:\/# ]*)(?:(?:\()([0-9]+)(?:\)))?(?:\[)(.*?)(?:])(?:\[['"](.*?)['"]])?(\*?)/g,f=e.exec(d),g=/(['"]?)(.*?)['"]?$/g,h=g.exec(f[5]),i=h[2];return 0==h[1].length&&(i=a(i)?b(i):c(i)),{field:f[3],exclude:"-"==f[1],optional:"~"==f[2]?"field":"*"==f[7]?"value":null,group:void 0!=f[4]?Number(f[4]):null,value:{actual:i,display:void 0!=f[6]?f[6]:""+i}}}var i={parse:h};return i}angular.module("lightning").factory("$filterService",a)}(),function(){"use strict";angular.module("lightning").factory("httpInterceptor",["$q","$rootScope",function(a,b){var c={},d=function(c){return b.$broadcast("httpInterceptorError",c),a.reject(c)};return c.responseError=d,c}])}(),function(){"use strict";function a(a,b,c,d){function e(c,d,e){b.preventReloadSearch=1!=e,a.search(c,d),b.$broadcast("paramChange",c),e&&b.$broadcast("reloadSearch")}function f(a,c){b.preventReloadSearch=1!=c,x(!1),angular.forEach(a,function(b,c){e(c,a[c],!1)}),c&&b.$broadcast("reloadSearch")}function g(b,c){var d=a.search()[b];return void 0==d&&void 0!=c&&(d=c),d}function h(b,c){var d=a.search()[b];if(void 0!=d&&""!=d||void 0==c||(d=c),!angular.isArray(d)){var e=[];return void 0!=d&&""!=d&&e.push(d),e}for(var f=d.length-1;f>=0;f--){var g=d[f];""==g&&d.splice(f,1)}return d}function i(a,b){var c=h("f");a=t(a),c.indexOf(a)==-1&&(c.push(a),e("p",1),e("f",c,b))}function j(a,b,c,d,f,g,i){var j=h("f"),k=u(a,b,c,f,g,i);j.indexOf(k)==-1&&(j.push(k),e("p",1),e("f",j,d))}function k(a,b,c,d,e,f,g){var i=h("f"),j=u(a,b,c,d,f,g);i.indexOf(j)==-1&&(i.push(j),e.search("p",1),e.search("f",i))}function l(a,b,c,d,f,g,i,j,k,l,m){var n=h("f"),o=v(a,b,c,d,f,i,j,k,l,m);n.indexOf(o)==-1&&(n.push(o),e("p",1),e("f",n,g))}function m(a,b,c,d,f,g,i,j,k){var l=h("f"),m=w(a,b,c,d,g,i,j,k);l.indexOf(m)==-1&&(l.push(m),e("p",1),e("f",l,f))}function n(a,b){var c=h("f"),d=angular.copy(c),f=[];angular.forEach(d,function(b){var c=A(b);c.field!=a&&f.push(b)}),e("p",1),e("f",f,b)}function o(b,c,d){var f=h("f"),g=angular.copy(f),i=[];angular.forEach(g,function(d){var e=new RegExp(b+'\\["?\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z'),f=decodeURIComponent(a.url());f.match(e)&&(c=c.replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})(?![Zz])/g,"$&Z"));var g=new RegExp(b+'\\["?'+c+'"?\\]'),h=d.match(g);h||(g=new RegExp(b+'\\["?.+?(?="\\])"?\\]\\["?'+c+'"?\\]'),h=d.match(g)),h||i.push(d)}),e("p",1),e("f",i,d)}function p(a){var b=h("f"),c=angular.copy(b);if(null==a)return c;for(var d=[],e=0;e<c.length;e++){var f=c[e],g=A(f);g.field==a&&d.push(f)}return d}function q(a,b,c,d,e,f){var g=u(a,b,c,d,e,f);return g=A(g),r(g)}function r(a){var b=h("f");a=angular.copy(a),null!=a.val.dsp&&(a.val.dsp=null);for(var c=t(a),d=0;d<b.length;d++){var e=A(b[d]);null!=e.val.dsp&&(e.val.dsp=null);var f=t(e);if(c==f)return!0}return!1}function s(){return angular.copy(a.search())}function t(a){return a=null!=a.val&&null!=a.val.act&&null!=a.val.act.to?w(a.field,a.val.act.from,a.val.act.to,a.val.dsp,a.optional,a.val.act.fromExcluded,a.val.act.toExcluded,a.exclude):u(a.field,c("actualValue")(a.val),c("displayValue")(a.val),a.optional,a.exclude,a.match,a.val.type)}function u(a,b,c,e,f,g,h){var i="",j=!1;return"field"==e?i+="~":f&&(i+="-"),b==c&&(j=!0),"string"!=h&&(d.isDate(b)||d.isNumeric(b))||(b='"'+b+'"'),"left_partial"==g?b="*"+b:"right_partial"==g?b+="*":"partial"==g&&(b="*"+b+"*"),i+=""+a+"["+b+"]",j||(i+='["'+c+'"]'),"value"==e&&(i+="*"),i}function v(a,b,c,d,e,f,g,h,i,j){g=null==g||""==g.trim()?" - ":" "+g+" ";var k="";return 1==j&&(k+="-"),"field"==f&&(k+="~"),null==b&&(b=""),null==c&&(c=""),k+=a+(h?"(":"[")+b+","+c+(i?")":"]")+'["'+d+g+e+'"]',"value"==f&&(k+="*"),k}function w(a,b,c,d,e,f,g,h){null!=d&&"undefined"!=typeof d.trim&&(d=d.trim()),null==b&&(b=""),null==c&&(c="");var i="";return 1==h&&(i+="-"),"field"==e&&(i+="~"),i+=a+(f?"(":"[")+b+","+c+(g?")":"]")+'["'+d+'"]',"value"==e&&(i+="*"),i}function x(c){var d=a.search();angular.forEach(d,function(a,b){e(b,null)}),c&&b.$broadcast("reloadSearch")}function y(){b.$broadcast("reloadSearch")}function z(a){var b=/^([\-~]{0,2})([A-Za-z_\.][A-Za-z_0-9\-\.:\/# ]*)((?:\()([0-9]+)(?:\)))?(([\[\(]{1})([*]?["']?(\\*?.*?)["']?[*]?)([\]\)]{1}))(\[["'](.*?)["']\])?(\*)?$/,c=b.exec(a);if(c){var d={};return d.exclude=!!(c[1]&&c[1].indexOf("-")>-1),d.field=c[2],d.group=c[4]?c[4]:-1,d.excludeLeftEndpoint="("==c[6],d.match="exact",0==c[7].indexOf("*")&&(d.match="left_partial"),c[7].length>1&&c[7].lastIndexOf("*")==c[7].length-1&&(d.match="left_partial"==d.match?"partial":"right_partial"),d.value=c[8]||"",c[7].length>1&&(0==c[7].indexOf('"')||0==c[7].indexOf('*"')?d.type="string":B(d.value)?d.type="range":d.type="number"),d.excludeRightEndpoint=")"==c[9],d.displayName=c[11]||""==c[11]?c[11]:d.value,d.optional=!1,c[1]&&c[1].indexOf("~")>-1&&(d.optional="field"),void 0!=c[12]&&"*"==c[12]&&(d.optional="value"),d}return null}function A(a){var b=z(a);if(null===b)return null;var c={exclude:b.exclude,field:b.field,val:{act:null,dsp:b.displayName},grp:b.group,match:b.match,optional:b.optional},d=b.value.split(",");return 2==d.length&&"range"==b.type?c.val.act={from:d[0],to:d[1],type:"range",fromExcluded:b.excludeLeftEndpoint,toExcluded:b.excludeRightEndpoint}:(c.val.act=b.value,c.val.type=typeof b.value),c.val.type=b.type,c}function B(a){return a.indexOf(",")!=-1&&(1==a.split(",").length||2==a.split(",").length)}var C={setUrlParameter:e,setUrlParameters:f,getUrlParameter:g,getUrlParametersAsArray:h,addFilterObjectToUrl:i,addFilterToUrl:j,addFilterToLocationCopy:k,addRangeFilterToUrl:l,addRangeFilterDisplayToUrl:m,removeFiltersFromUrl:n,removeFilterValueFromUrl:o,getFiltersFromUrl:p,urlContainsFilter:q,urlContainsFilterFromObject:r,getAllUrlParameters:s,createFilterFromObject:t,createFilter:u,createRangeFilter:v,createRangeFilterDisplay:w,resetAllParameters:x,reloadSearch:y,filterParse:z,stringToFilter:A};return C}angular.module("lightning-locations",["lightning"]).factory("$lightningUrl",a),a.$inject=["$location","$rootScope","$filter","$util"]}(),function(){"use strict";function a(a,b){function c(c,d){var e=b("date")(new Date,"HH:mm:ss:sss");a.debug("DEBUG: "+e+" "+c+" - "+d)}function d(c,d){var e=b("date")(new Date,"HH:mm:ss:sss");a.error("ERROR: "+e+" "+c+" - "+d)}function e(c,d){var e=b("date")(new Date,"HH:mm:ss:sss");a.warn("WARNING: "+e+" "+c+" - "+d)}var f={debug:c,error:d,warn:e};return f}angular.module("lightning").factory("$lightningLog",a),a.$inject=["$log","$filter"]}(),function(){"use strict";function a(a,b){function c(a){h[a.name]=a}function d(b){if(h.hasOwnProperty(b)){var c=h[b];c.unregister(),delete h[b]}else a.debug("ModalService","No modal found with the ID - "+b)}function e(b){var c=h[b];c?c.show():a.debug("ModalService","No modal found with the ID - "+b)}function f(b){var c=h[b];c?c.close():a.debug("ModalService","No modal found with the ID - "+b)}function g(a,c,d){var e=a?"modal_"+a+"_closed":"modal_closed",f=b.$on(e,function(a,b){c(b)});return d&&d.$on("$destroy",f),f}var h={},i={register:c,unregister:d,show:e,close:f,onClose:g};return i}angular.module("lightning").factory("ModalService",a),a.$inject=["$lightningLog","$rootScope"]}(),function(){"use strict";function a(a){function b(b,c){e[b]=c,a.$broadcast(b+"_updated",c)}function c(a){return void 0!=e[a]?e[a]:null}function d(){e={}}var e={},f={setPlatform:b,getPlatform:c,clearPlatforms:d};return f}angular.module("lightning").factory("PlatformService",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(a){function b(b,c){e[b]=c,a.$broadcast(b+"_updated",c)}function c(a){return void 0!=e[a]?e[a]:null}function d(){e={}}var e={},f={setQuery:b,getQuery:c,clearQueries:d};return f}angular.module("lightning").factory("QueryIdService",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(a,b,c){function d(b,c){p[b]=h(c),a.$broadcast("query_"+b+"_updated",p[b])}function e(a){return void 0!=p[a]?angular.copy(p[a]):null}function f(a,b){var c=e(a);return g(c,b)}function g(a,c){if(null==a)return null;var d={};if(null!=a.filters)if(angular.isArray(a.filters))for(var e=a.filters.length-1;e>=0;e--){var f=a.filters[e];1!=c||c&&1!=f.hidden?a.filters[e]=b.createFilterFromObject(f):a.filters.splice(e,1)}else angular.isObject(a.filters)&&(1!=c||c&&1!=a.filters.hidden?a.filters=[b.createFilterFromObject(a.filters)]:a.filters=[]);if(null!=a.sorts){var g=angular.copy(a.sorts);a.sorts="",angular.forEach(g,function(b,c){var d=j(b);a.sorts+=d,c<g.length-1&&(a.sorts+=",")})}if(null!=a.custom&&angular.isObject(a.custom)){var h=[];angular.forEach(a.custom,function(a,b){angular.forEach(a,function(a){h.push(b+"["+a+"]")})}),a.custom=h}return angular.forEach(a,function(a,b){null!=r[b]?angular.isArray(a)?(d[r[b]]=[],angular.forEach(a,function(a){d[r[b]].push(a)})):d[r[b]]=a:"val"==b?null!=a.act?(d.mq=a.act,d.q=a.dsp):""!=a&&null!=a&&(d.q=a):angular.isArray(a)?(d[b]=[],angular.forEach(a,function(a){d[b].push(a)})):d[b]=a}),angular.isArray(d.f)&&0==d.f.length?delete d.f:void 0!=d.f&&null==d.f&&delete d.f,d}function h(a){if(null!=a.f&&(angular.isArray(a.f)?angular.forEach(a.f,function(c,d){angular.isString(c)&&(a.f[d]=b.stringToFilter(c))}):angular.isString(a.f)&&(a.f=[b.stringToFilter(a.f)])),null!=a&&null!=a.s){var c=a.s.split(",");a.s=[],angular.forEach(c,function(b){a.s.push(i(b))})}if(null!=a&&null!=a.c){var d=angular.copy(a.c),e={};if(angular.isArray(d))angular.forEach(d,function(a){var b=new RegExp("[^[]*"),c=b.exec(a),d=new RegExp("\\[(.*)\\]"),f=d.exec(a);null!=f&&2==f.length&&(f=f[1],angular.isArray(e[c])?e[c].push(f):e[c]=[f])});else{var f=new RegExp("[^[]*"),g=f.exec(d),h=new RegExp("\\[(.*)\\]"),j=h.exec(d);null!=j&&2==j.length&&(j=j[1],e[g]=[j])}a.c=e}var k={};return angular.forEach(a,function(a,b){null!=q[b]?angular.isArray(a)?(k[q[b]]=[],angular.forEach(a,function(a){k[q[b]].push(a)})):k[q[b]]=a:"q"==b||"mq"==b||(angular.isArray(a)?(k[b]=[],angular.forEach(a,function(a){k[b].push(a)})):k[b]=a)}),null!=a.q&&""!=a.q&&null!=a.mq?k.val={act:a.mq,dsp:a.q}:null!=a.mq?k.val={act:a.mq,dsp:a.mq}:null!=a.q?k.val=a.q:k.val="",null==k.filters&&(k.filters=[]),k}function i(a){var b={};return a.length>0&&(b={field:a.substring(1),order:"+"==a.substring(0,1)?"asc":"desc"}),b}function j(a){var b=("asc"==a.order?"+":"-")+a.field;return b}function k(a,d,e){var f=c("filter")(a.filters,{field:d});e=angular.copy(e),e.val.dsp&&(e.val.dsp=null);var g=b.createFilterFromObject(e);if(f&&f.length>0){var h=!1;if(angular.forEach(f,function(a){a.val.dsp&&(a.val.dsp=null);var c=b.createFilterFromObject(a);if(g==c)return h=!0,!0}),h)return!0}return!1}function l(a,b){if(null!=a.filters)for(var d=c("filter")(a.filters,{field:b},!0),e=0;e<d.length;e++){var f=d[e];a.filters.indexOf(f)!=-1&&a.filters.splice(a.filters.indexOf(f),1)}return a}function m(){p={}}function n(a,b){var c=angular.copy(a);return c=g(c,!b),o(c)}function o(a){var b="";for(var c in a)if(angular.isArray(a[c]))for(var d=0;d<a[c].length;d++)b+=c+"="+window.encodeURIComponent(a[c][d])+"&";else b+=c+"="+window.encodeURIComponent(a[c])+"&";return b=b.slice(0,-1)}var p={},q={c:"custom",f:"filters",fa:"facets",fi:"fields",p:"page",s:"sorts",v:"view",t:"type",co:"collection"},r=_.invert(q),s={setQuery:d,getQuery:e,getQueryAsHttpParams:f,convertHttpParamsToQuery:h,convertQueryToHttpParams:g,convertSortParamToObject:i,convertSortObjectToParam:j,queryContainsFilterForField:k,removeFiltersForField:l,clearQueries:m,convertQueryToUrl:n,convertHttpParamsToUrl:o};return s}angular.module("lightning").factory("QueryService",a),a.$inject=["$rootScope","$lightningUrl","$filter"]}(),function(){"use strict";function a(a,b){function c(b,c){h[b]=c,a.$broadcast(b+"_updated",c)}function d(a,b){var c;if(void 0!=h[a]&&(c=angular.copy(h[a])),null==c)return null;if(null!=b){for(var d=b.split(","),e={},f=0;f<d.length;f++){var g=d[f].trim();null!=c[g]&&(e[g]=c[g])}c=e}return c}function e(){h={}}function f(a,c){var d="",e={},f={};return e=c?c:b.getAllUrlParameters(),angular.forEach(e,function(a,b){"q"==b?d=a:f[b]=a}),{query:d,params:e,searchParams:f}}function g(a){return{hits:{act:["Long",0]},results:a}}var h={},i={setResponse:c,getResponse:d,clearResponses:e,getParams:f,createResponseFromResults:g};return i}angular.module("lightning").factory("ResponseService",a),a.$inject=["$rootScope","$lightningUrl"]}(),function(){"use strict";function a(a,b,c){function d(){var a=b[0].documentElement.clientHeight,c=b[0].documentElement.clientWidth;for(var d in h)h.hasOwnProperty(d)&&h[d](a,c)}var e,f,g=0,h={};return a.addEventListener("scroll",function(){c.cancel(e),e=c(d,0)}),a.addEventListener("resize",function(){c.cancel(f),f=c(d,0)}),{bindListener:function(a){var b=++g;return h[g]=a,function(){delete h[b]}}}}angular.module("lightning").service("scrollAndResizeListener",a),a.$inject=["$window","$document","$timeout"]}(),function(){"use strict";function a(a){function b(b){function c(){return window.self.pageYOffset?window.self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function d(b){var c;if(c=null!=b?document.getElementById(b):document.getElementsByTagName("body")[0],null==c)return a.debug("ScrollToService","Unable to scroll to element as element was not found."),null;for(var d=c.offsetTop,e=c;e.offsetParent&&e.offsetParent!=document.body;)e=e.offsetParent,d+=e.offsetTop;return d}var e,f=c(),g=d(b);if(null!=g){var h=g>f?g-f:f-g;if(h<100)return void scrollTo(0,g);var i=Math.round(h/100);i>=20&&(i=20);var j=Math.round(h/25),k=g>f?f+j:f-j,l=0;if(g>f)for(e=f;e<g;e+=j)setTimeout("window.scrollTo(0, "+k+")",l*i),k+=j,k>g&&(k=g),l++;else for(e=f;e>g;e-=j)setTimeout("window.scrollTo(0, "+k+")",l*i),k-=j,k<g&&(k=g),l++}}var c={scrollToElement:b};return c}angular.module("lightning").factory("ScrollToService",a),a.$inject=["$lightningLog"]}(),function(){"use strict";angular.module("lightning-services",["lightning"]).factory("$twigkit",["$http","$httpParamSerializerJQLike","PlatformService","ResponseService","$q","QueryService","$injector","$lightningLog","$lightningUrl","UserService","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){throw new Error("$twigkit."+a+": Platform is missing, please make sure the tag includes a valid platform or you are passing a valid platform to this function.")}var m={},n=null,o="cancel_reload_search";return m.getConstant=function(a,b){var c;try{c=g.get(a)}catch(d){c=b}return c},m.getContextPath=function(a){if(void 0==a&&(a="/"),null!==n)return n;var b=document.getElementsByTagName("base");return b.length>0?(n=b[0].getAttribute("context")||b[0].href||"/","/"!=n.slice(-1)&&(n+="/"),n):(n=m.getConstant("contextPath",a),n==a?n:"string"==typeof n?("/"!=n.slice(-1)&&(n+="/"),n):(h.error("$twigkit:getContextPath",'Context path must be a string! Please make sure the constant "contextPath" is declared correctly!'),a))},m.search=function(b,c,d,f,g){f=0!=f;var h=m.getContextPath("/");null!=c&&null!=c.conf||l("search()"),g&&g.promise||(g=e.defer());var i=(null!=c&&c.host?c.host:h)+"twigkit/api/core/services/platform/search/"+c.conf;return d?d.q=b:d={q:b},a({method:"GET",url:i,timeout:g.promise,params:d,ignoreLoadingBar:f})},m.searchSeriesFacet=function(b,c,d,e,f){var g=m.getContextPath("/");null!=c&&null!=c.conf||l("searchSeriesFacet()");var h=(null!=c&&c.host?c.host:g)+"twigkit/api/core/services/platform/series/"+c.conf,i=null!=b?angular.copy(b):{};return i.facets=d,null!=e&&(i.facts=e),null==i.q&&(i.q=""),i.facts=e,i.rpp=f,a({method:"GET",url:h,params:i,ignoreLoadingBar:!0})},m.searchSeriesFields=function(b,c,e,f){var g=m.getContextPath("/");null!=c&&null!=c.conf||l("searchSeriesFields()");var h=(null!=c&&c.host?c.host:g)+"twigkit/api/core/services/platform/series/"+c.conf,i=d.getParams(!0,b),j=angular.copy(i.searchParams);return j.fields=e,j.q=i.query,j.rpp=f,a({method:"GET",url:h,params:j,ignoreLoadingBar:!0})},m.getGraphFacet=function(b,d,e,g,h,i){var j=m.getContextPath("/");d=c.getPlatform(d),d&&d.conf||l("getGraphFacet()");var k=encodeURI(e+"-"+g),n=(null!=d&&d.host?d.host:j)+"twigkit/api/core/services/platform/graph/"+d.conf+"/facet/"+k,o=f.getQueryAsHttpParams(b)||{};return o.c||(o.c=[]),h&&i?(o.c.push("facet.pivot[{!stats=piv}"+e+","+g+"]"),o.c.push("stats[true]"),o.c.push("stats.field[{!tag=piv "+h+"=true}"+i+"]")):o.c.push("facet.pivot["+e+","+g+"]"),a({method:"GET",url:n,params:o,ignoreLoadingBar:!0})},m.getComments=function(b,c){var d=m.getContextPath("/"),e=(null!=b&&b.host?b.host:d)+"twigkit/api/social/comments?target="+c;return a({method:"GET",url:e,ignoreLoadingBar:!0})},m.deleteComment=function(b,c){var d=m.getContextPath("/"),e=(null!=b&&b.host?b.host:d)+"twigkit/api/social/comment/"+c;return a({method:"DELETE",url:e,ignoreLoadingBar:!0})},m.postComment=function(c,d){var e=m.getContextPath("/"),f=(null!=c&&c.host?c.host:e)+"twigkit/api/social/comment";return a({url:f,dataType:"json",method:"POST",data:b(d),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},m.getBookmarks=function(b,c){var d=m.getContextPath(""),e=d+"twigkit/api/social/bookmarks";return a({method:"GET",url:e,params:c,ignoreLoadingBar:!0})},m.postBookmark=function(c){var d=m.getContextPath(""),e=d+"twigkit/api/social/bookmark";return a({url:e,dataType:"json",method:"POST",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},m.deleteBookmark=function(b){var c=m.getContextPath(""),d=c+"twigkit/api/social/bookmark/"+b;return a({method:"DELETE",url:d,ignoreLoadingBar:!0})},m.getTopics=function(b){var c=m.getContextPath(""),d=c+"twigkit/api/social/topics";return a({method:"GET",url:d,params:b,ignoreLoadingBar:!0})},m.postLike=function(c,d,e,f){var g=m.getContextPath("/"),h=(null!=c&&c.host?c.host:g)+"twigkit/api/social/link",i={id:0,target:d,topic:e,collection:f};return a({url:h,dataType:"json",method:"POST",data:b(i),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},m.deleteLike=function(b,c){var d=m.getContextPath("/"),e=(null!=b&&b.host?b.host:d)+"twigkit/api/social/link/"+c;return a({method:"DELETE",url:e,ignoreLoadingBar:!0})},m.getLikes=function(b){var c=m.getContextPath(""),d=c+"twigkit/api/social/links";return a({method:"GET",url:d,params:b,ignoreLoadingBar:!0})},m.postTopic=function(c){var d=m.getContextPath(""),e=d+"twigkit/api/social/topic";return a({url:e,dataType:"json",method:"POST",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},m.deleteTopic=function(b){var c=m.getContextPath(""),d=c+"twigkit/api/social/topic/"+b;return a({method:"DELETE",url:d,ignoreLoadingBar:!0})},m.getSavedQueries=function(b,c){var d=m.getContextPath()+"twigkit/api/social/saved-queries";return a({method:"GET",url:d,ignoreLoadingBar:!0})},m.saveQuery=function(c){var d=m.getContextPath(""),e=d+"twigkit/api/social/saved-query";return a({url:e,dataType:"json",method:"POST",data:b(c),headers:{"Content-Type":"application/x-www-form-urlencoded"},ignoreLoadingBar:!0})},m.deleteSavedQuery=function(b){var c=m.getContextPath(""),d=c+"twigkit/api/social/saved-query/"+b;return a({method:"DELETE",url:d,ignoreLoadingBar:!0})},m.searchFacet=function(b,f,g,h,j,k,n){k=1==k,angular.isString(f)&&(f=c.getPlatform(f)),null!=f&&null!=b||e.reject("No platform or facet was called for this function.");var o=m.getContextPath("");null!=f&&null!=f.conf||l("searchFacet()");var p=(null!=f&&f.host?f.host:o)+"twigkit/api/core/services/search/facet/"+b+"/in/"+f.conf;null!=n&&(p+="/on/"+n);var q={};return null!=g&&(null==g.searchParams&&(g=d.getParams(!0,g)),q=angular.copy(g.searchParams),q.q=g.query,q.p=1,q.c="facet.mincount[1]",q.f=[],angular.forEach(g.searchParams.f,function(a){i.stringToFilter(a).field==b&&0!=k||q.f.push(a)})),q.facetQuery=j,null!=h&&(q.rpp=h),a({method:"GET",url:p,params:q,ignoreLoadingBar:!0})},m.getUser=function(){var b=m.getContextPath(""),c=b+"twigkit/api/user",d=j.getUser(),f=e.defer();return null!=d?f.resolve(d):a({method:"GET",url:c,ignoreLoadingBar:!0}).then(function(a){j.setUser(a.data),f.resolve(a.data)},function(){f.reject("Failed to get user")}),f.promise},m.cancelAllResponses=function(){k.$emit(o)},m.onCancelAllResponses=function(a,b){var c=k.$on(o,function(b,c){a(c)});return b&&b.$on("$destroy",c),c},m}]).factory("$util",["$compile","$timeout",function(a,b){var c={};return c.params=function(a,b,c){var d=angular.copy(a);return angular.forEach(d,function(a,e){b&&b.indexOf(e)>-1&&(d[e]=a.split(",")),c&&angular.forEach(c,function(a,b){d[b]||(d[b]=a)})}),d.styling&&(d.classes="",angular.forEach(d.styling.split(" "),function(a){d.classes.length>0&&(d.classes+=" "),d.classes+="tk-"+a})),d},c.remove=function(a,c){a.length>0&&(angular.forEach(a,function(a){a&&b(function(){if(null!=a.scope){var b=a.scope;b.$destroy()}a.elem.remove()},0)}),c&&c())},c.render=function(a,b,c){var d=a(c,function(a){b.append(a)});return d},c.hasChildren=function(a){var b=!1;return a(function(a,c){a.length>0&&angular.forEach(a,function(a){"#comment"==a.nodeName&&a.nodeValue.match(/^\s*(ng\S+)/)&&(b=!0),"#text"!=a.nodeName&&"#comment"!=a.nodeName&&1!=b&&(b=!0)}),a.remove(),c.$destroy()}),b},c.escapeRegex=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},c.hasStyle=function(a,b){return!(!a||!b)&&b.search(new RegExp("\\b"+c.escapeRegex(a)+"\\b"))>-1},c.isDate=function(a){return!(!moment(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]",!0).isValid()&&!moment(a,"YYYY-MM-DD[T]HH:mm:ss[Z]",!0).isValid())},c.isNumeric=function(a){return!(isNaN(a-parseFloat(a))||"function"==typeof a.trim&&0==a.trim().indexOf("0")&&0!=a.trim().indexOf("0."))},c}])}(),function(){"use strict";function a(a){function b(b,c){a.$emit(d+b,c)}function c(b,c,e){var f=a.$on(d+b,function(a,b){c(b)});return e&&e.$on("$destroy",f),f}var d="toggle_pane_",e={togglePane:b,onTogglePane:c};return e}angular.module("lightning").factory("TogglePanesService",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(a){function b(b,c){if(!a.AppkitTranslations)return b;c=c||"default";for(var d=c.split(","),e=0;e<d.length;e++){var f=_.get(a.AppkitTranslations,d[e]+"."+b);if(null!=f)return f}return b}function c(b,c,d,e){if(d=d||"default",b&&null!=c){var f=_.get(a.AppkitTranslations,d+"."+b);f&&!e||_.set(a,"AppkitTranslations."+d+"."+b,c)}}function d(b,c){b&&c&&_.set(a,"AppkitTranslations."+b,c)}var e={get:b,put:c,addBundle:d};return e}angular.module("lightning").factory("TranslationService",a),a.$inject=["$window"]}(),function(){"use strict";function a(a){function b(b){e=b,a.$broadcast("user_updated",e)}function c(){return null!=e?e:null}function d(){e=null}var e=null,f={setUser:b,getUser:c,clearUser:d};return f}angular.module("lightning").factory("UserService",a),a.$inject=["$rootScope"]}();